{
    "version": "https://jsonfeed.org/version/1",
    "title": "Carpe diem",
    "subtitle": "pluck the day",
    "icon": "https://quas-modo.github.io/undergraduate/images/favicon.ico",
    "description": "notes/thoughts/nonsense",
    "home_page_url": "https://quas-modo.github.io/undergraduate",
    "items": [
        {
            "id": "https://quas-modo.github.io/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture11-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/",
            "url": "https://quas-modo.github.io/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture11-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/",
            "title": "Lecture11-网络安全",
            "date_published": "2023-02-08T09:53:41.000Z",
            "content_html": "<h1 id=\"lecture11-网络安全\"><a class=\"anchor\" href=\"#lecture11-网络安全\">#</a> Lecture11 - 网络安全</h1>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_01.jpg\" alt=\"第11讲：网络安全_页面_01\" /></p>\n<h2 id=\"网络安全问题概述\"><a class=\"anchor\" href=\"#网络安全问题概述\">#</a> 网络安全问题概述</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_02.jpg\" alt=\"第11讲：网络安全_页面_02\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_03.jpg\" alt=\"第11讲：网络安全_页面_03\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_04.jpg\" alt=\"第11讲：网络安全_页面_04\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_05.jpg\" alt=\"第11讲：网络安全_页面_05\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_06.jpg\" alt=\"第11讲：网络安全_页面_06\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_07.jpg\" alt=\"第11讲：网络安全_页面_07\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_08.jpg\" alt=\"第11讲：网络安全_页面_08\" /></p>\n<h2 id=\"一般的数据加密模型\"><a class=\"anchor\" href=\"#一般的数据加密模型\">#</a> 一般的数据加密模型</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_09.jpg\" alt=\"第11讲：网络安全_页面_09\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_10.jpg\" alt=\"第11讲：网络安全_页面_10\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_11.jpg\" alt=\"第11讲：网络安全_页面_11\" /></p>\n<h2 id=\"对称密钥和公钥密码体制\"><a class=\"anchor\" href=\"#对称密钥和公钥密码体制\">#</a> 对称密钥和公钥密码体制</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_12.jpg\" alt=\"第11讲：网络安全_页面_12\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_13.jpg\" alt=\"第11讲：网络安全_页面_13\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_14.jpg\" alt=\"第11讲：网络安全_页面_14\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_15.jpg\" alt=\"第11讲：网络安全_页面_15\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_16.jpg\" alt=\"第11讲：网络安全_页面_16\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_17.jpg\" alt=\"第11讲：网络安全_页面_17\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_18.jpg\" alt=\"第11讲：网络安全_页面_18\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_19.jpg\" alt=\"第11讲：网络安全_页面_19\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_20.jpg\" alt=\"第11讲：网络安全_页面_20\" /></p>\n<h2 id=\"数字签名\"><a class=\"anchor\" href=\"#数字签名\">#</a> 数字签名</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_21.jpg\" alt=\"第11讲：网络安全_页面_21\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_22.jpg\" alt=\"第11讲：网络安全_页面_22\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_23.jpg\" alt=\"第11讲：网络安全_页面_23\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_24.jpg\" alt=\"第11讲：网络安全_页面_24\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_25.jpg\" alt=\"第11讲：网络安全_页面_25\" /></p>\n<h2 id=\"防火墙\"><a class=\"anchor\" href=\"#防火墙\">#</a> 防火墙</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_26.jpg\" alt=\"第11讲：网络安全_页面_26\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_27.jpg\" alt=\"第11讲：网络安全_页面_27\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_28.jpg\" alt=\"第11讲：网络安全_页面_28\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_29.jpg\" alt=\"第11讲：网络安全_页面_29\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_30.jpg\" alt=\"第11讲：网络安全_页面_30\" /></p>\n<h2 id=\"acl\"><a class=\"anchor\" href=\"#acl\">#</a> ACL</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_31.jpg\" alt=\"第11讲：网络安全_页面_31\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_32.jpg\" alt=\"第11讲：网络安全_页面_32\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_33.jpg\" alt=\"第11讲：网络安全_页面_33\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_34.jpg\" alt=\"第11讲：网络安全_页面_34\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_35.jpg\" alt=\"第11讲：网络安全_页面_35\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_36.jpg\" alt=\"第11讲：网络安全_页面_36\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_37.jpg\" alt=\"第11讲：网络安全_页面_37\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_38.jpg\" alt=\"第11讲：网络安全_页面_38\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_39.jpg\" alt=\"第11讲：网络安全_页面_39\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_40.jpg\" alt=\"第11讲：网络安全_页面_40\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_41.jpg\" alt=\"第11讲：网络安全_页面_41\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_42.jpg\" alt=\"第11讲：网络安全_页面_42\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_43.jpg\" alt=\"第11讲：网络安全_页面_43\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_44.jpg\" alt=\"第11讲：网络安全_页面_44\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_45.jpg\" alt=\"第11讲：网络安全_页面_45\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_46.jpg\" alt=\"第11讲：网络安全_页面_46\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_47.jpg\" alt=\"第11讲：网络安全_页面_47\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_48.jpg\" alt=\"第11讲：网络安全_页面_48\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_49.jpg\" alt=\"第11讲：网络安全_页面_49\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_50.jpg\" alt=\"第11讲：网络安全_页面_50\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_51.jpg\" alt=\"第11讲：网络安全_页面_51\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_52.jpg\" alt=\"第11讲：网络安全_页面_52\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_53.jpg\" alt=\"第11讲：网络安全_页面_53\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_54.jpg\" alt=\"第11讲：网络安全_页面_54\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_55.jpg\" alt=\"第11讲：网络安全_页面_55\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC11%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8_%E9%A1%B5%E9%9D%A2_56.jpg\" alt=\"第11讲：网络安全_页面_56\" /></p>\n",
            "tags": [
                "NJUSE",
                "互联网计算",
                "计网"
            ]
        },
        {
            "id": "https://quas-modo.github.io/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture10-%E5%B9%BF%E5%9F%9F%E7%BD%91/",
            "url": "https://quas-modo.github.io/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture10-%E5%B9%BF%E5%9F%9F%E7%BD%91/",
            "title": "Lecture10-广域网",
            "date_published": "2023-02-08T09:53:29.000Z",
            "content_html": "<h1 id=\"lecture10-wan广域网\"><a class=\"anchor\" href=\"#lecture10-wan广域网\">#</a> Lecture10-WAN 广域网</h1>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_01.jpg\" alt=\"第10讲：广域网(wan)_页面_01\" /></p>\n<h2 id=\"广域网技术和设备\"><a class=\"anchor\" href=\"#广域网技术和设备\">#</a> 广域网技术和设备</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_02.jpg\" alt=\"第10讲：广域网(wan)_页面_02\" /></p>\n<h3 id=\"广域网服务\"><a class=\"anchor\" href=\"#广域网服务\">#</a> 广域网服务</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_03.jpg\" alt=\"第10讲：广域网(wan)_页面_03\" /></p>\n<p>定义：WAN 是通过 WAN 服务提供商连接 LAN 的通信网络</p>\n<p>WAN 在 OSI 的前三层运行，但<strong>主要集中在物理和数据链路层</strong>。</p>\n<p>广域网和局域网相比相对低效</p>\n<h3 id=\"公司的发展\"><a class=\"anchor\" href=\"#公司的发展\">#</a> 公司的发展</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_04.jpg\" alt=\"第10讲：广域网(wan)_页面_04\" /></p>\n<ul>\n<li>广域网的最小单位是公司</li>\n<li>随着公司逐渐的发展才发展 (公司的发展是需求)</li>\n<li>最上角：公司刚成立的时候，小的局域网就可以搞定了 (几台主机)，对外提供服务少，局域网协同办公。</li>\n<li>右上角：随着公司的发展，一家发展到几十家，需要将不同的项目分开，每一个项目都有对应的项目经理和开发人员，多个局域网组成一个 AS (自治系统)。还是一个出口，ASP 要求高，VLAN 隔离和防火墙</li>\n<li>左下角：再次发展，有多个分支机构，区域办事处等，物理上隔离的很远，这时候建立一个数据中心 (存放全部业务数据)，保证团队可以在任何位置访问，公司向 ISP 请求租用一个广域网链路。</li>\n<li>右下角：最后进一步发展，覆盖全球：公司规模足够大，考虑成本，需要部署站点到站点之间的 VPN，保证效率更高。</li>\n</ul>\n<h3 id=\"广域网物理结构\"><a class=\"anchor\" href=\"#广域网物理结构\">#</a> 广域网物理结构</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_05.jpg\" alt=\"第10讲：广域网(wan)_页面_05\" /></p>\n<p>通过 NetWork 远程接入，通过 WSP 提供的 CO Swtich 来连接到中心局</p>\n<p>CPE: 位于公司本地的设备 (主要是接入设备)，可以向 ISP 购买或者租用，购买上网服务 (猫)</p>\n<h3 id=\"广域网虚拟电路\"><a class=\"anchor\" href=\"#广域网虚拟电路\">#</a> 广域网虚拟电路</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_06.jpg\" alt=\"第10讲：广域网(wan)_页面_06\" /></p>\n<p>交换虚拟电路 (SVC，Switched Virtual Circuits) 是到目的地的 WAN 路径，可根据需要建立 (established) 和终止 (terminated)</p>\n<p>广域网虚拟电路的三个阶段 (phases)</p>\n<ol>\n<li>电路建立–创建虚拟电路 (逻辑确定)</li>\n<li>数据传输–发送和接收用户数据 (含有虚电路号等)</li>\n<li>电路中断–拆除虚拟电路</li>\n</ol>\n<p>永久 (Permanent) 虚拟电路 (PVC) 是采用以下一种模式的永久建立的电路：数据传输</p>\n<ol>\n<li>X.25 和帧中继使用 PVC</li>\n<li>减少带宽使用，但增加成本</li>\n</ol>\n<p><img data-src=\"C:/Users/QUAS/AppData/Roaming/Typora/typora-user-images/image-20230110112813672.png\" alt=\"image-20230110112813672\" /></p>\n<h3 id=\"链接类型和带宽\"><a class=\"anchor\" href=\"#链接类型和带宽\">#</a> 链接类型和带宽</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230110112856731.png\" alt=\"image-20230110112856731\" /></p>\n<ol>\n<li>T：美国标准</li>\n<li>E：欧洲标准</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_07.jpg\" alt=\"第10讲：广域网(wan)_页面_07\" /></p>\n<h3 id=\"交换电路连接\"><a class=\"anchor\" href=\"#交换电路连接\">#</a> 交换电路连接</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_08.jpg\" alt=\"第10讲：广域网(wan)_页面_08\" /></p>\n<p>ISDN: 多个 B 信道和 P 信道组合</p>\n<ul>\n<li>BRI:2 个 B 和一个 D</li>\n<li>PRI:T1:23B + D 和 E1:30B + D</li>\n</ul>\n<h3 id=\"网络连接\"><a class=\"anchor\" href=\"#网络连接\">#</a> 网络连接</h3>\n<p><a href=\"https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec10/5.png\"><img data-src=\"https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec10/5.png\" alt=\"img\" /></a></p>\n<ul>\n<li>直接连接到运营商，DSL 接入 (以太网转换成 DSL 信号)</li>\n</ul>\n<p><a href=\"https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec10/6.png\"><img data-src=\"https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec10/6.png\" alt=\"img\" /></a></p>\n<ul>\n<li>永久在线连接，用于有线电视传输等，共享电缆开关等</li>\n</ul>\n<p><a href=\"https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec10/5.jpg\"><img data-src=\"https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec10/5.jpg\" alt=\"img\" /></a></p>\n<ul>\n<li>无线\n<ul>\n<li>地面无线信道</li>\n<li>无线信道</li>\n</ul>\n</li>\n</ul>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_09.jpg\" alt=\"第10讲：广域网(wan)_页面_09\" /></p>\n<h3 id=\"广域网设备\"><a class=\"anchor\" href=\"#广域网设备\">#</a> 广域网设备</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_10.jpg\" alt=\"第10讲：广域网(wan)_页面_10\" /></p>\n<p>为了连接到专线 (leased line)，客户必须具备以下条件：</p>\n<ol>\n<li>访问服务提供商的电路</li>\n<li>可用的适当路由器端口</li>\n<li>CSU/DSU，调制解调器，ISDN 终端适配器等。</li>\n</ol>\n<h4 id=\"调制解调器\"><a class=\"anchor\" href=\"#调制解调器\">#</a> 调制解调器</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_11.jpg\" alt=\"第10讲：广域网(wan)_页面_11\" /></p>\n<ol>\n<li>通道服务单元 CSU,Channel Service Units / 数字服务单元 DSU,Digital Service Units</li>\n<li>与语音级 (voice-grade) 连接接口，以便将模拟信号转换为数字信号。</li>\n</ol>\n<h2 id=\"广域网和osi模型\"><a class=\"anchor\" href=\"#广域网和osi模型\">#</a> 广域网和 OSI 模型</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_12.jpg\" alt=\"第10讲：广域网(wan)_页面_12\" /></p>\n<h3 id=\"广域网标准\"><a class=\"anchor\" href=\"#广域网标准\">#</a> 广域网标准</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_13.jpg\" alt=\"第10讲：广域网(wan)_页面_13\" /></p>\n<p>WAN 标准主要描述 OSI 模型的哪些层？<strong>物理层和数据链路层</strong>，物理层提供电器标准，数据链路层封装到远程的部分：帧标准</p>\n<h3 id=\"wan物理层\"><a class=\"anchor\" href=\"#wan物理层\">#</a> wan 物理层</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_14.jpg\" alt=\"第10讲：广域网(wan)_页面_14\" /></p>\n<ol>\n<li>描述如何为 WAN 服务提供电气，机械，操作和功能连接的协议。</li>\n<li>这些服务通常是从 WAN 服务提供商，备用运营商，电话后和电报 (PTT) 机构获得的。</li>\n<li>描述数据终端设备 (DTE, Data Terminal Equipment) 和数据电路终端设备 (DCE. Data Circuit-terminating Equipment) 之间的接口。</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_15.jpg\" alt=\"第10讲：广域网(wan)_页面_15\" /></p>\n<ol>\n<li>通常，DCE 是服务提供商，而 DTE 是连接的设备。</li>\n<li>在此模型中，通过调制解调器或 CSU / DSU 提供给 DTE 的服务。</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_16.jpg\" alt=\"第10讲：广域网(wan)_页面_16\" /></p>\n<p>指定 DTE 和 DCE 之间此接口的几种物理层标准是…</p>\n<ol>\n<li>EIA/TIA-232 (RS-232): 计算机常用</li>\n<li>EIA/TIA-449</li>\n<li>V.24</li>\n<li>V.35</li>\n<li>X.21</li>\n<li>G.703</li>\n<li>EIA-530</li>\n</ol>\n<h3 id=\"wan数据链路层\"><a class=\"anchor\" href=\"#wan数据链路层\">#</a> wan 数据链路层</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_17.jpg\" alt=\"第10讲：广域网(wan)_页面_17\" /></p>\n<ol>\n<li>WAN 数据链路协议描述了如何在单个数据链路上的系统之间承载帧。</li>\n<li>它们包括旨在在专用 (dedicated) 点对点，多点和多址交换服务上运行的协议。</li>\n<li>WAN 标准由许多公认的机构定义和管理，包括以下机构：ITU-T，ISO，IETF 和 EIA</li>\n<li>不是那么可靠，帧结构和以太网帧不同，协议是点对点，点对多点，多链路交换机切换</li>\n<li>为了确保正确：需要为每一个串口指定一个方式组成帧</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_18.jpg\" alt=\"第10讲：广域网(wan)_页面_18\" /></p>\n<p>WAN 数据链路层定义了如何封装数据以传输到远程站点</p>\n<ol>\n<li><strong>点对点协议 (PPP,Point-to-Point Protocol)</strong>: 由 IETF 开发。PPP 包含用于识别网络层协议的协议字段 (包含一个协议单元，指定网络协议)</li>\n<li><strong>高级数据链路控制 (HDLC, High-Level Data Link Control)</strong>:ISO 标准，不同供应商之间不兼容的 HDLC，因为每个供应商都选择了实现方式。HDLC 支持点对点 / 多点配置 (抽象规范和约束，各个厂商不同)</li>\n<li><strong>帧中继 (Frame Relay)</strong>：使用简化的封装，对高质量的数字设备不进行纠错。(比较高速)</li>\n<li><strong>ISDN</strong>：通过现有电话线传输语音和数据的一组数字服务。</li>\n<li><strong>平衡的链路访问程序 (LAPB, Link Access Procedure, Balanced)</strong>：用于在 X.25 堆栈的第 2 层封装数据包的数据包交换网络。 提供点对点的可靠性和流量控制。</li>\n</ol>\n<h2 id=\"广域网访问方法\"><a class=\"anchor\" href=\"#广域网访问方法\">#</a> 广域网访问方法</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_19.jpg\" alt=\"第10讲：广域网(wan)_页面_19\" /></p>\n<h3 id=\"ppp-hdlc-ppp重要考试考\"><a class=\"anchor\" href=\"#ppp-hdlc-ppp重要考试考\">#</a> PPP/ HDLC PPP（重要考试考）</h3>\n<p>点对点的标准</p>\n<p>以思科厂商为标准</p>\n<p>工作在串行链路上的</p>\n<p>如果都是同一个厂商的可以用 HDLC，不然使用 PPP</p>\n<h4 id=\"串行线框字段\"><a class=\"anchor\" href=\"#串行线框字段\">#</a> 串行线框字段</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_20.jpg\" alt=\"第10讲：广域网(wan)_页面_20\" /></p>\n<ol>\n<li>两种最常见的点对点 WAN 封装是 HDLC (High-level Data Protocol) 和 PPP (Point to Poing Protocol)</li>\n<li>所有串行线封装共享一个通用的帧格式，该格式具有以下字段</li>\n<li>封装协议的选择取决于 WAN 技术和通信设备</li>\n</ol>\n<h4 id=\"ppp-and-hdlc\"><a class=\"anchor\" href=\"#ppp-and-hdlc\">#</a> PPP and HDLC</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_21.jpg\" alt=\"第10讲：广域网(wan)_页面_21\" /></p>\n<ol>\n<li>\n<p>PPP 是一种标准的</p>\n<p>串行线路</p>\n<p>封装方法</p>\n<ol>\n<li>由 IETF (The Internet Engineering Task) 开发；取代 SLIP (Serial Line Internet Protocol)</li>\n<li>包含标识网络层协议的字段</li>\n<li>PPP 可以在建立连接期间检查链接质量</li>\n<li>通过密码认证协议 (PAP) 和质询握手认证协议 (CHAP) 提供认证。</li>\n</ol>\n</li>\n<li>\n<p>HDLC 是 Cisco 串行线的默认封装</p>\n<ol>\n<li>没有窗口或流量控制</li>\n<li>框架中插入了专有类型 (所有权) 代码，这意味着 HDLC 帧不能与其他供应商的设备互操作。</li>\n<li>当专用线路连接的两端是运行 Cisco IOS 的路由器时使用</li>\n<li>不做出窗口控制和流控制</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"ppp\"><a class=\"anchor\" href=\"#ppp\">#</a> ppp</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_22.jpg\" alt=\"第10讲：广域网(wan)_页面_22\" /></p>\n<ol>\n<li>串行链路上使用最广泛的第 2 层协议</li>\n<li>从 SLIP 开发，\n<ol>\n<li>仅支持 IP 协议</li>\n<li>不支持动态 IP 分配</li>\n<li>不支持身份验证</li>\n<li>不支持压缩</li>\n<li>不支持错误检测</li>\n</ol>\n</li>\n<li>PPP 提供以下功能\n<ol>\n<li>网络协议多路复用</li>\n<li>动态分配 IP 地址</li>\n<li>验证：PAP，CHAP</li>\n<li>压缩</li>\n<li>错误检测</li>\n</ol>\n</li>\n</ol>\n<h4 id=\"ppp组件\"><a class=\"anchor\" href=\"#ppp组件\">#</a> PPP 组件</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_23.jpg\" alt=\"第10讲：广域网(wan)_页面_23\" /></p>\n<p>使用 HDLC (ISO HDLC，而非 Cisco HDLC) 作为封装第 3 层数据报的基础</p>\n<p>实现 LCP (链接控制协议) 以：</p>\n<ol>\n<li>建立连接</li>\n<li>连接配置选项</li>\n<li>链接质量测试</li>\n</ol>\n<p>实施 NCP (网络控制协议，Network Control Protocol) 以选择和配置第 3 层协议</p>\n<h4 id=\"ppp帧格式\"><a class=\"anchor\" href=\"#ppp帧格式\">#</a> PPP 帧格式</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_24.jpg\" alt=\"第10讲：广域网(wan)_页面_24\" /></p>\n<ol>\n<li>Flag: 01111110 标记：帧的开头或结尾，01111110，一位可能会连续接受到多个帧</li>\n<li>Address：11111111，广播地址</li>\n<li>Control：00000011，用户数据作为无序帧传输</li>\n<li>Protocol: 数据字段中的协议类型</li>\n<li>Data: 数据报，最大默认值为 1500 字节</li>\n<li>FCS: 2 或者 4 字节</li>\n</ol>\n<h4 id=\"ppp会话建立终止\"><a class=\"anchor\" href=\"#ppp会话建立终止\">#</a> PPP 会话建立 / 终止</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_25.jpg\" alt=\"第10讲：广域网(wan)_页面_25\" /></p>\n<ol>\n<li>为了通过点对点链路建立通信，PPP 经历四个不同的阶段：\n<ol>\n<li>步骤一：链接建立和配置协商 (negotiation)(LCP)。</li>\n<li>步骤二：链接质量测试。</li>\n<li>步骤三：网络层协议配置 (NCP)。</li>\n<li>步骤四：链接终止。</li>\n</ol>\n</li>\n<li>图示如下</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_26.jpg\" alt=\"第10讲：广域网(wan)_页面_26\" /></p>\n<h5 id=\"连接建立\"><a class=\"anchor\" href=\"#连接建立\">#</a> 连接建立</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_27.jpg\" alt=\"第10讲：广域网(wan)_页面_27\" /></p>\n<ol>\n<li>建立链接是交换任何网络层数据报之前的第一阶段\n<ol>\n<li>每个 PPP 设备发送 LCP 来打开连接</li>\n<li>LCP 数据包包含一个配置选项字段，该字段允许设备协商选项的使用，例如<strong>压缩和身份验证协议</strong>等。</li>\n<li>如果 LCP 数据包中未包含配置选项，则采用该配置选项的<strong>默认值</strong>。</li>\n<li>当已发送和接收配置<strong>确认</strong>帧时，此阶段完成。</li>\n</ol>\n</li>\n<li>在完成这个步骤前不会传输具体数据帧的。</li>\n</ol>\n<h5 id=\"链路质量确定\"><a class=\"anchor\" href=\"#链路质量确定\">#</a> 链路质量确定</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_28.jpg\" alt=\"第10讲：广域网(wan)_页面_28\" /></p>\n<ol>\n<li>发送和接收 LCP 数据包以测量链路上的错误率 (如果已配置)</li>\n<li>身份验证 (如果使用) 在网络层协议配置阶段开始之前进行。(可选)</li>\n<li>LCP 可以延迟网络层协议信息的传输，直到完成此阶段。</li>\n<li>在这之前不能传输网络帧。</li>\n</ol>\n<h5 id=\"网络层协议配置\"><a class=\"anchor\" href=\"#网络层协议配置\">#</a> 网络层协议配置</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_29.jpg\" alt=\"第10讲：广域网(wan)_页面_29\" /></p>\n<ol>\n<li>在此阶段，PPP 设备发送 NCP 数据包以选择和配置一个或多个网络层协议 (例如 IP)。</li>\n<li>配置了每个选定的网络层协议后，可以通过链接发送来自每个网络层协议的数据报。</li>\n</ol>\n<h5 id=\"连接终止\"><a class=\"anchor\" href=\"#连接终止\">#</a> 连接终止</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_30.jpg\" alt=\"第10讲：广域网(wan)_页面_30\" /></p>\n<p>CP 可以随时终止链接：</p>\n<ol>\n<li>应用户要求；(一方请求终止)</li>\n<li>链接质量</li>\n<li>超时</li>\n</ol>\n<p>当 LCP 关闭链接时，它将通知网络层协议，以便它们可以采取适当的措施</p>\n<h4 id=\"pap\"><a class=\"anchor\" href=\"#pap\">#</a> PAP</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_31.jpg\" alt=\"第10讲：广域网(wan)_页面_31\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_32.jpg\" alt=\"第10讲：广域网(wan)_页面_32\" /></p>\n<ol>\n<li>链接的发起方 (Calling Side) 输入身份验证信息，以帮助确保用户具有网络管理员的许可来进行连接。</li>\n<li>远程节点使用双向握手 PAP 建立其身份。</li>\n<li>远程节点<strong>重复</strong>发送用户名 / 密码对，直到确认身份验证或连接终止</li>\n<li>密码以明文形式通过链接发送。</li>\n<li>在建立连接阶段之后，仅对远程节点进行一次身份验证。</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_33.jpg\" alt=\"第10讲：广域网(wan)_页面_33\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_34.jpg\" alt=\"第10讲：广域网(wan)_页面_34\" /></p>\n<h4 id=\"chap\"><a class=\"anchor\" href=\"#chap\">#</a> CHAP</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_35.jpg\" alt=\"第10讲：广域网(wan)_页面_35\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_36.jpg\" alt=\"第10讲：广域网(wan)_页面_36\" /></p>\n<ol>\n<li>被叫方使用三向握手 CHAP 协议定期验证主叫方。</li>\n<li>CHAP 不允许呼叫者在没有 Challenge (随机数) 的情况下尝试进行身份验证。(Challenge-&gt; 随机数)</li>\n<li>主机 (称为参与者) 将质询消息发送到远程节点。</li>\n<li>远程节点以一个值 (加密的值，包括：接收到的质询，其用户名和密码) 进行响应:value 是 challenge 和密钥生成的</li>\n<li>主机根据自己的价值检查响应\n<ol>\n<li>如果值匹配，则确认身份验证</li>\n<li>否则，连接终止</li>\n</ol>\n</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_37.jpg\" alt=\"第10讲：广域网(wan)_页面_37\" /></p>\n<ul>\n<li>RTB 请求连接 RTA</li>\n<li>他们都存储一个用户名密码，但是用户名不同，密码相同</li>\n<li>RTB 发送一个连接请求</li>\n<li>RTA 找一个时间来发起挑战</li>\n<li>挑战中内容:\n<ul>\n<li>编号</li>\n<li>id 是第几次挑战</li>\n<li>random: 生成的随机数</li>\n<li>RTA: 谁发起的挑战</li>\n</ul>\n</li>\n</ul>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_38.jpg\" alt=\"第10讲：广域网(wan)_页面_38\" /></p>\n<ul>\n<li>RTB 进行应答，</li>\n<li>RTB 操作:pass + random 使用 MD5 算法 -&gt; 哈希值</li>\n</ul>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_39.jpg\" alt=\"第10讲：广域网(wan)_页面_39\" /></p>\n<p>RTA 收到 RTB 的回复，然后比较是否相同</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_40.jpg\" alt=\"第10讲：广域网(wan)_页面_40\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_41.jpg\" alt=\"第10讲：广域网(wan)_页面_41\" /></p>\n<h3 id=\"isdn\"><a class=\"anchor\" href=\"#isdn\">#</a> ISDN</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_42.jpg\" alt=\"第10讲：广域网(wan)_页面_42\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_43.jpg\" alt=\"第10讲：广域网(wan)_页面_43\" /></p>\n<ol>\n<li>集成服务数字网络允许通过现有电话线传输数字信号：提供远程站点的连接</li>\n<li>ISDN 具有以下优点：\n<ol>\n<li>可以携带语音，视频和数据</li>\n<li>使用带外 D (或 Delta) 信道比调制解调器 (有时 &lt; 1s) 更快的呼叫建立</li>\n<li>使用 B (或屏障) 通道以 64kps 提供更快的数据传输</li>\n</ol>\n</li>\n</ol>\n<h4 id=\"bribasic-rate-interface-and-priprimary-rate-interface\"><a class=\"anchor\" href=\"#bribasic-rate-interface-and-priprimary-rate-interface\">#</a> BRI(Basic Rate Interface) and PRI(Primary Rate Interface)</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_44.jpg\" alt=\"第10讲：广域网(wan)_页面_44\" /></p>\n<ol>\n<li>ISDN 服务有两种：\n<ol>\n<li>BRI (基本速率接口，Basic Rate Interface), 用户虚拟电路数据传，HDLC,PPP</li>\n<li>PRI (主速率接口，Primary Rate Interface)，发送控制信息，LAPD</li>\n</ol>\n</li>\n<li>ISDN BRI 服务提供两个 B 通道和一个 D 通道。</li>\n<li>ISDN BRI 将 144kbps (2B + D = 144kps) 线路的总带宽传送到三个单独的通道中。</li>\n<li>BRI B 信道服务以 64 kbps 的速率运行，旨在承载用户数据和语音流量。</li>\n<li>第三个通道，D 通道，是一个 16 kbps 信令通道，用于承载指令，这些指令告诉电话网络如何处理每个 B 通道。</li>\n<li>BRI 和 DRI 都是基于电话信道的</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_45.jpg\" alt=\"第10讲：广域网(wan)_页面_45\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_46.jpg\" alt=\"第10讲：广域网(wan)_页面_46\" /></p>\n<ol>\n<li>ISDN 利用一套 (suit) ITU-T 标准套件，涵盖 OSI 参考模型的物理，数据链路和网络层。</li>\n<li>有几种封装选择。两种最常见的封装是 PPP 和 HDLC。</li>\n<li>ISDN 默认为 HDLC。但是，PPP 更为健壮，因为它为兼容链接和协议配置的身份验证和协商提供了出色的机制。</li>\n<li>ISDN 接口仅允许使用一种封装类型，不允许混合使用封装。</li>\n</ol>\n<h4 id=\"非对称数字用户线路adslasymmetric-digital-subscriber-line\"><a class=\"anchor\" href=\"#非对称数字用户线路adslasymmetric-digital-subscriber-line\">#</a> 非对称数字用户线路 (ADSL,Asymmetric Digital Subscriber Line)</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_47.jpg\" alt=\"第10讲：广域网(wan)_页面_47\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_48.jpg\" alt=\"第10讲：广域网(wan)_页面_48\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_49.jpg\" alt=\"第10讲：广域网(wan)_页面_49\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_50.jpg\" alt=\"第10讲：广域网(wan)_页面_50\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_51.jpg\" alt=\"第10讲：广域网(wan)_页面_51\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_52.jpg\" alt=\"第10讲：广域网(wan)_页面_52\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_53.jpg\" alt=\"第10讲：广域网(wan)_页面_53\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_54.jpg\" alt=\"第10讲：广域网(wan)_页面_54\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_55.jpg\" alt=\"第10讲：广域网(wan)_页面_55\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_56.jpg\" alt=\"第10讲：广域网(wan)_页面_56\" /></p>\n<h3 id=\"sonet\"><a class=\"anchor\" href=\"#sonet\">#</a> SONET</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_57.jpg\" alt=\"第10讲：广域网(wan)_页面_57\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_58.jpg\" alt=\"第10讲：广域网(wan)_页面_58\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_59.jpg\" alt=\"第10讲：广域网(wan)_页面_59\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_60.jpg\" alt=\"第10讲：广域网(wan)_页面_60\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_61.jpg\" alt=\"第10讲：广域网(wan)_页面_61\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_62.jpg\" alt=\"第10讲：广域网(wan)_页面_62\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_63.jpg\" alt=\"第10讲：广域网(wan)_页面_63\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_64.jpg\" alt=\"第10讲：广域网(wan)_页面_64\" /></p>\n<h3 id=\"hfc\"><a class=\"anchor\" href=\"#hfc\">#</a> HFC</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_65.jpg\" alt=\"第10讲：广域网(wan)_页面_65\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_66.jpg\" alt=\"第10讲：广域网(wan)_页面_66\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_67.jpg\" alt=\"第10讲：广域网(wan)_页面_67\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_68.jpg\" alt=\"第10讲：广域网(wan)_页面_68\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_69.jpg\" alt=\"第10讲：广域网(wan)_页面_69\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_70.jpg\" alt=\"第10讲：广域网(wan)_页面_70\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_71.jpg\" alt=\"第10讲：广域网(wan)_页面_71\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_72.jpg\" alt=\"第10讲：广域网(wan)_页面_72\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_73.jpg\" alt=\"第10讲：广域网(wan)_页面_73\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC10%E8%AE%B2%EF%BC%9A%E5%B9%BF%E5%9F%9F%E7%BD%91(wan)_%E9%A1%B5%E9%9D%A2_74.jpg\" alt=\"第10讲：广域网(wan)_页面_74\" /></p>\n",
            "tags": [
                "NJUSE",
                "互联网计算",
                "计网"
            ]
        },
        {
            "id": "https://quas-modo.github.io/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture09-%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E5%92%8Cvlan/",
            "url": "https://quas-modo.github.io/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture09-%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E5%92%8Cvlan/",
            "title": "Lecture09-局域网交换和vlan",
            "date_published": "2023-02-08T09:53:17.000Z",
            "content_html": "<h1 id=\"lecture9-局域网交换与vlan\"><a class=\"anchor\" href=\"#lecture9-局域网交换与vlan\">#</a> Lecture9- 局域网交换与 VLAN</h1>\n<h2 id=\"交换机\"><a class=\"anchor\" href=\"#交换机\">#</a> 交换机</h2>\n<h3 id=\"交换机基本功能\"><a class=\"anchor\" href=\"#交换机基本功能\">#</a> 交换机基本功能</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_03.jpg\" alt=\"第9讲：局域网交换与vlan_页面_03\" /></p>\n<ol>\n<li>根据 MAC 地址建立和维护<strong>交换表</strong> (类似于网桥表)</li>\n<li>将帧切换出接口到目标</li>\n</ol>\n<h3 id=\"对称交换\"><a class=\"anchor\" href=\"#对称交换\">#</a> 对称交换</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_04.jpg\" alt=\"第9讲：局域网交换与vlan_页面_04\" /></p>\n<ol>\n<li>对称交换可在具有相同带宽 (10/10 Mbps 或 100/100 Mbps) 的端口之间提供交换连接</li>\n<li>用户尝试访问其他网段上的服务器时，可能会导致瓶颈 (对称交换可能会导致带宽不足)</li>\n</ol>\n<h3 id=\"不对称交换\"><a class=\"anchor\" href=\"#不对称交换\">#</a> 不对称交换</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_05.jpg\" alt=\"第9讲：局域网交换与vlan_页面_05\" /></p>\n<ol>\n<li>通过将带有服务器的网段连接到<strong>更高带宽的端口 (100 Mbps)</strong>，非对称交换 (asymmetric switching) 减少了服务器上潜在瓶颈的可能性</li>\n<li>非对称交换需要在交换器中进行内存缓冲</li>\n<li>非对称交换端口解决对称交换端口中的对称阻塞问题 (进一步保证了服务器的稳定实现)</li>\n</ol>\n<h3 id=\"内存缓存\"><a class=\"anchor\" href=\"#内存缓存\">#</a> 内存缓存</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_06.jpg\" alt=\"第9讲：局域网交换与vlan_页面_06\" /></p>\n<ol>\n<li>交换机中存储目标和传输数据的内存区域，直到可以将其切换出正确的端口为止。\n<ol>\n<li>基于端口 (Port) 的内存缓冲\n<ol>\n<li>数据包存储在每个端口的队列中</li>\n<li>由于目标端口繁忙，一个数据包可能会延迟其他数据包的传输</li>\n<li>其他端口存在不均衡的问题。</li>\n</ol>\n</li>\n<li>共享 (Shared) 内存缓冲\n<ol>\n<li>所有端口共享的公用内存缓冲</li>\n<li>允许将数据包在一个端口上接收并在另一个端口上发送出去，而无需将其更改为其他队列。</li>\n<li>需要自己记录端口的信息</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>发生阻塞的时候，根据情况按照端口或者内存将包缓存下来</li>\n</ol>\n<h3 id=\"交换方式\"><a class=\"anchor\" href=\"#交换方式\">#</a> 交换方式</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_07.jpg\" alt=\"第9讲：局域网交换与vlan_页面_07\" /></p>\n<p>储存转发 (Store-and-Forward，网桥、路由器等通过软件的设备)</p>\n<ol>\n<li>交换机<strong>接收整个帧</strong>，最后将其计算为 CRC，然后再将其发送到目的地</li>\n<li>接收后，校验，正确再发送</li>\n</ol>\n<p>Cut-through 直通</p>\n<ol>\n<li>转发会增加延迟：通过使用直通切换方法可以减少它</li>\n<li>快速转发切换：仅在立即转发帧之前检查目标 MAC (只看到<strong>帧的目的地址</strong>就转发)</li>\n<li>碎片释放：读取前 64 个字节去减少碰撞和帧碎片，在转发帧之前</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_08.jpg\" alt=\"第9讲：局域网交换与vlan_页面_08\" /></p>\n<p>三种查看方式</p>\n<h3 id=\"第二层交换机\"><a class=\"anchor\" href=\"#第二层交换机\">#</a> 第二层交换机</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_09.jpg\" alt=\"第9讲：局域网交换与vlan_页面_09\" /></p>\n<ol>\n<li>大规模集成电路，保证链路效率，低时延，低成本</li>\n<li>有一个 MAC 地址</li>\n</ol>\n<h3 id=\"第三层交换机\"><a class=\"anchor\" href=\"#第三层交换机\">#</a> 第三层交换机</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_10.jpg\" alt=\"第9讲：局域网交换与vlan_页面_10\" /></p>\n<p>基于硬件的帧转发机制，较高的帧转发性能，低时延</p>\n<p>较高速的计算</p>\n<p>每一个端口的代价低</p>\n<p>流控制</p>\n<p>安全性更高</p>\n<p>对数据流进行路由，生成 MAC 和 IP 的映射，直接经过第二层（？，智能性较差</p>\n<h3 id=\"第四层交换机\"><a class=\"anchor\" href=\"#第四层交换机\">#</a> 第四层交换机</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_11.jpg\" alt=\"第9讲：局域网交换与vlan_页面_11\" /></p>\n<h3 id=\"多层交换机协议\"><a class=\"anchor\" href=\"#多层交换机协议\">#</a> 多层交换机协议</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_12.jpg\" alt=\"第9讲：局域网交换与vlan_页面_12\" /></p>\n<h2 id=\"stp-the-spanning-tree-protocol-生成树协议\"><a class=\"anchor\" href=\"#stp-the-spanning-tree-protocol-生成树协议\">#</a> STP the Spanning-Tree Protocol 生成树协议</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_13.jpg\" alt=\"第9讲：局域网交换与vlan_页面_13\" /></p>\n<h3 id=\"桥回路\"><a class=\"anchor\" href=\"#桥回路\">#</a> 桥回路</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_14.jpg\" alt=\"第9讲：局域网交换与vlan_页面_14\" /></p>\n<ol>\n<li>出于各种原因，网络中可能会出现环路。\n<ol>\n<li>通常，网络中的环路是<strong>故意提供冗余</strong>的结果。</li>\n<li>也可能由于配置错误而发生：在桥接网络中，环路可能是绝对灾难性的两个主要原因：\n<ol>\n<li>广播回路 (广播风暴)，没有 TTL</li>\n<li>路由表的错误</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"冗余造成了路由回路\"><a class=\"anchor\" href=\"#冗余造成了路由回路\">#</a> 冗余造成了路由回路</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_15.jpg\" alt=\"第9讲：局域网交换与vlan_页面_15\" /></p>\n<h3 id=\"第二层路由回路\"><a class=\"anchor\" href=\"#第二层路由回路\">#</a> 第二层路由回路</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_16.jpg\" alt=\"第9讲：局域网交换与vlan_页面_16\" /></p>\n<ol>\n<li>广播和第 2 层回路可能是危险的组合。</li>\n<li>以太网帧没有 TTL 字段</li>\n<li>以太网帧开始循环后，它可能会继续下去，直到有人关闭其中一台交换机或断开链路为止 (外部条件)</li>\n<li>交换机将抖动 (flip flop) 主机 A 的桥接表条目 (创建极高的 CPU 利用率)。</li>\n<li>消耗 CPU 和内存</li>\n</ol>\n<h4 id=\"泛洪单播帧\"><a class=\"anchor\" href=\"#泛洪单播帧\">#</a> 泛洪单播帧</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_17.jpg\" alt=\"第9讲：局域网交换与vlan_页面_17\" /></p>\n<ul>\n<li>过一段时间 CAT-1 和 CAT-2 没有收到 Host-B 的信息，删除表中的对应记录</li>\n<li>在这之后，Host A 发送给 Host B 信息，然后在 CAT-1 和 CAT-2 之间进行循环</li>\n</ul>\n<h3 id=\"生成树概述\"><a class=\"anchor\" href=\"#生成树概述\">#</a> 生成树概述</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_18.jpg\" alt=\"第9讲：局域网交换与vlan_页面_18\" /></p>\n<ol>\n<li>生成树协议的元素\n<ol>\n<li>主要功能：在<strong>交换 / 桥接网络</strong>中允许<strong>冗余路径</strong>，而不会因环路的影响而引起延迟。</li>\n<li>STP 通过计算<strong>稳定的生成树</strong>网络拓扑来防止环路</li>\n<li><strong>生成树帧</strong> (称为桥协议数据单元 - BPDU) 用于确定生成树拓扑</li>\n</ol>\n</li>\n<li>在正常情况下禁用一些端口来防止出现冗余</li>\n</ol>\n<h4 id=\"决策顺序\"><a class=\"anchor\" href=\"#决策顺序\">#</a> 决策顺序</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_19.jpg\" alt=\"第9讲：局域网交换与vlan_页面_19\" /></p>\n<p>生成树始终使用相同的四步决策序列：</p>\n<ol>\n<li>在拓扑里面最低的 root BID (网桥标识)【找到 root 路由器】</li>\n<li>找到 Root bridgh 的最低路径成本</li>\n<li>每个路径都会选择一个最低 BID 的 sender 这个是针对一个链路的，详见例子</li>\n<li>每个路径再指定一个最低的 ID 端口</li>\n</ol>\n<h4 id=\"bpdu-bridge-protocol-data-unit\"><a class=\"anchor\" href=\"#bpdu-bridge-protocol-data-unit\">#</a> BPDU Bridge Protocol Data Unit</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_20.jpg\" alt=\"第9讲：局域网交换与vlan_页面_20\" /></p>\n<p>STP 建立一个称为<strong>根网桥的根节点</strong></p>\n<p>生成的树源自根桥。</p>\n<p>不属于最短路径树的冗余连接将被阻止。(block 端口，不转发，但是接收)（只会有一条路最短）</p>\n<p>在阻塞的链接上收到的数据帧将被丢弃。</p>\n<p>交换机发送的允许形成无环逻辑拓扑的消息是 BPDU</p>\n<h4 id=\"stp-bpdu\"><a class=\"anchor\" href=\"#stp-bpdu\">#</a> stp bpdu</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_21.jpg\" alt=\"第9讲：局域网交换与vlan_页面_21\" /></p>\n<h4 id=\"bridge-identificationbid\"><a class=\"anchor\" href=\"#bridge-identificationbid\">#</a> Bridge Identification/BID</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_22.jpg\" alt=\"第9讲：局域网交换与vlan_页面_22\" /></p>\n<ol>\n<li>网桥 ID (BID)：8 个字节 (2 + 6)\n<ol>\n<li>高阶 BID 子字段 (2 个字节)：网桥优先级\n<ol>\n<li>216 个可能的值：0-65,535 (默认值：32,768)</li>\n<li>通常以十进制格式表示</li>\n</ol>\n</li>\n<li>低阶子字段 (6 个字节)：分配给交换机的 MAC 地址，以十六进制格式表示</li>\n</ol>\n</li>\n<li>STP 成本值：成本越低越好。</li>\n</ol>\n<h4 id=\"选举根路由器\"><a class=\"anchor\" href=\"#选举根路由器\">#</a> 选举根路由器</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_23.jpg\" alt=\"第9讲：局域网交换与vlan_页面_23\" /></p>\n<ol>\n<li>交换机通过查找具有<strong>最低 BID</strong> 的交换机 (通常称为根战争) 来选择单个根交换机。</li>\n<li>如果所有交换机都使用默认的网桥优先级 32768，则最低的 MAC 地址将作为平局。</li>\n<li>配置优先级来调整根桥</li>\n</ol>\n<h3 id=\"路径代价cost\"><a class=\"anchor\" href=\"#路径代价cost\">#</a> 路径代价 cost</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_24.jpg\" alt=\"第9讲：局域网交换与vlan_页面_24\" /></p>\n<h3 id=\"5个stp的状态\"><a class=\"anchor\" href=\"#5个stp的状态\">#</a> 5 个 STP 的状态</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_25.jpg\" alt=\"第9讲：局域网交换与vlan_页面_25\" /></p>\n<ol>\n<li>通过根据策略配置每个端口来建立状态</li>\n<li>然后，STP 根据流量模式 (traffic Patterns) 和潜在环路 (Protential Loops) 修改状态</li>\n<li>STP 状态的默认顺序为：\n<ol>\n<li>阻塞：没有转发帧，听到了 BPDU</li>\n<li>监听：不转发任何帧，监听数据帧 (确定自己可以参加的交换)，也会发送一些数据帧表示自己状态变了</li>\n<li>学习：不转发帧，学习地址</li>\n<li>转发：转发帧，学习地址</li>\n<li>禁用：没有转发帧，没有听到 BPDU</li>\n</ol>\n</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230109113837280.png\" alt=\"image-20230109113837280\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230109113900889.png\" alt=\"image-20230109113900889\" /></p>\n<h3 id=\"初始stp收敛\"><a class=\"anchor\" href=\"#初始stp收敛\">#</a> 初始 STP 收敛</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_26.jpg\" alt=\"第9讲：局域网交换与vlan_页面_26\" /></p>\n<ol>\n<li>当网络首次启动时，所有网桥都会混合使用 BPDU 信息来泛洪网络。(开始泛洪 BPDU 信息)</li>\n<li>立即，他们应用决策序列，允许他们 BPDU 进行 PK，然后选择出来 ROOT，从而形成整个网络的单个生成树。</li>\n</ol>\n<pre><code>(Step 1) 根交换机决定：选择一个根桥作为该网络的中心点\n(Step 2) 选择根端口：所有剩余的网桥都会计算出一组根端口\n(Step 3) 选择指定端口：其余所有网桥计算一组指定端口\n</code></pre>\n<h4 id=\"步骤1-根交换机决定\"><a class=\"anchor\" href=\"#步骤1-根交换机决定\">#</a> 步骤 1 根交换机决定</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_27.jpg\" alt=\"第9讲：局域网交换与vlan_页面_27\" /></p>\n<ol>\n<li>（所有路由器都）宣布自己为根</li>\n<li>检查端口上收到的所有 BPDU 以及将在该端口上发送的 BPDU</li>\n<li>对于每个到达的 BPDU，如果其值小于为端口保存的现有 BPDU</li>\n<li>旧值被替换（由于 cat-A 的 BID 最小，所有 BC 均替换）</li>\n<li>BPDU 的发送者被接受为新的根</li>\n</ol>\n<h4 id=\"步骤2选择根端口\"><a class=\"anchor\" href=\"#步骤2选择根端口\">#</a> 步骤 2：选择根端口</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_28.jpg\" alt=\"第9讲：局域网交换与vlan_页面_28\" /></p>\n<ol>\n<li>每个非根桥必须选择一个根端口。\n<ol>\n<li>桥的根端口是最接近根桥的端口。</li>\n<li>根路径成本是到根网桥的所有链接的累积 (cumulative) 成本。</li>\n</ol>\n</li>\n</ol>\n<h4 id=\"步骤3选择网段的指定端口\"><a class=\"anchor\" href=\"#步骤3选择网段的指定端口\">#</a> 步骤 3：选择网段的指定端口</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_29.jpg\" alt=\"第9讲：局域网交换与vlan_页面_29\" /></p>\n<ol>\n<li>每个网段都有一个指定的端口：充当单个网桥 / 交换机端口，该端口既向该网段又向根网桥发送流量，也从该网段和根网桥接收流量。</li>\n<li>包含给定网段的指定端口的网桥 / 交换机称为该网段的指定网桥。</li>\n<li>所有网桥 / 交换机将阻止它们上未指定的端口，根网桥上的每个活动端口都将成为指定端口</li>\n<li>每个链路只有一个指定端口，一旦选定其他就 block 了</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_30.jpg\" alt=\"第9讲：局域网交换与vlan_页面_30\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_31.jpg\" alt=\"第9讲：局域网交换与vlan_页面_31\" /></p>\n<h2 id=\"vlan\"><a class=\"anchor\" href=\"#vlan\">#</a> Vlan</h2>\n<h3 id=\"vlan介绍\"><a class=\"anchor\" href=\"#vlan介绍\">#</a> vlan 介绍</h3>\n<h4 id=\"现有的共享局域网配置\"><a class=\"anchor\" href=\"#现有的共享局域网配置\">#</a> 现有的共享局域网配置</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_33.jpg\" alt=\"第9讲：局域网交换与vlan_页面_33\" /></p>\n<ol>\n<li>在典型的共享局域网中…\n<ol>\n<li>根据用户所插入 (plug) 的集线器对用户进行物理分组</li>\n<li>路由器分割局域网并提供广播防火墙</li>\n</ol>\n</li>\n<li>在虚拟局域网中\n<ol>\n<li>您可以按使用的功能，部门或应用程序对用户进行逻辑分组</li>\n<li>通过专有软件进行配置</li>\n</ol>\n</li>\n</ol>\n<h4 id=\"lan和vlan之间的差异\"><a class=\"anchor\" href=\"#lan和vlan之间的差异\">#</a> LAN 和 VLAN 之间的差异</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_34.jpg\" alt=\"第9讲：局域网交换与vlan_页面_34\" /></p>\n<p>虚拟局域网</p>\n<ol>\n<li>在第 2 层和第 3 层工作</li>\n<li>控制网络广播</li>\n<li>允许用户由网络管理员分配。</li>\n<li>提供更严格的网络安全性。</li>\n</ol>\n<h4 id=\"vlan标准\"><a class=\"anchor\" href=\"#vlan标准\">#</a> vlan 标准</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_35.jpg\" alt=\"第9讲：局域网交换与vlan_页面_35\" /></p>\n<p>特点</p>\n<ol>\n<li>不限于物理交换机网段的网络设备或用户的<strong>逻辑分组</strong>。</li>\n<li>VLAN 中的设备或用户可以按功能，部门，应用程序等进行分组，而<strong>不管其物理网段的位置</strong>如何。</li>\n<li>VLAN<strong> 创建一个不限于物理网段</strong>的单个广播域，并且将其视为子网。</li>\n<li>VLAN 设置是由网络管理员使用供应商的软件在交换机中完成的。</li>\n</ol>\n<h4 id=\"分组用户\"><a class=\"anchor\" href=\"#分组用户\">#</a> 分组用户</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_36.jpg\" alt=\"第9讲：局域网交换与vlan_页面_36\" /></p>\n<ol>\n<li>VLAN 可以从逻辑上将用户划分为不同的子网 (广播域)</li>\n<li>广播帧仅在具有相同 VLAN ID 的一个或多个交换机的端口之间切换。(VLAN ID 属于端口)</li>\n<li>可以通过基于以下内容的软件对用户进行逻辑分组：\n<ol>\n<li>端口号</li>\n<li>MAC 地址</li>\n<li>使用的协议</li>\n<li>使用的应用</li>\n</ol>\n</li>\n</ol>\n<h4 id=\"有无vlan的网络广播\"><a class=\"anchor\" href=\"#有无vlan的网络广播\">#</a> 有无 vlan 的网络广播</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_37.jpg\" alt=\"第9讲：局域网交换与vlan_页面_37\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_38.jpg\" alt=\"第9讲：局域网交换与vlan_页面_38\" /></p>\n<p>faculty studeng 分别在自己的 vlan 中传输</p>\n<h4 id=\"vlan间通信\"><a class=\"anchor\" href=\"#vlan间通信\">#</a> vlan 间通信</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_39.jpg\" alt=\"第9讲：局域网交换与vlan_页面_39\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_40.jpg\" alt=\"第9讲：局域网交换与vlan_页面_40\" /></p>\n<h3 id=\"vlan结构\"><a class=\"anchor\" href=\"#vlan结构\">#</a> vlan 结构</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_41.jpg\" alt=\"第9讲：局域网交换与vlan_页面_41\" /></p>\n<h4 id=\"backbone\"><a class=\"anchor\" href=\"#backbone\">#</a> backbone</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_42.jpg\" alt=\"第9讲：局域网交换与vlan_页面_42\" /></p>\n<ol>\n<li>VLAN 配置需要支持互连的路由器和交换机之间的骨干数据传输。</li>\n<li>骨干网是用于 VLAN 间通信的区域</li>\n<li>骨干网应该是高速链路，通常为 100Mbps 或更高</li>\n<li>BackBone 可以跑多个 VLAN，是骨干网</li>\n</ol>\n<h4 id=\"vlan中路由器的作用\"><a class=\"anchor\" href=\"#vlan中路由器的作用\">#</a> vlan 中路由器的作用</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_43.jpg\" alt=\"第9讲：局域网交换与vlan_页面_43\" /></p>\n<ol>\n<li>路由器提供不同 VLAN 之间的连接</li>\n<li>例如，您有 VLAN1 和 VLAN2。\n<ol>\n<li>在交换机内，位于不同 VLAN 上的用户无法相互通信 (VLAN 的好处！)</li>\n<li>但是，VLAN1 上的用户可以向 VLAN2 上的用户发送电子邮件，但他们需要路由器才能执行此操作。</li>\n</ol>\n</li>\n</ol>\n<h4 id=\"在vlan中帧的作用\"><a class=\"anchor\" href=\"#在vlan中帧的作用\">#</a> 在 vlan 中帧的作用</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_44.jpg\" alt=\"第9讲：局域网交换与vlan_页面_44\" /></p>\n<ol>\n<li>交换机根据帧中的数据做出过滤和转发决策。</li>\n<li>使用了两种技术\n<ol>\n<li>帧过滤：检查有关每个帧的特定信息 (MAC 地址或第 3 层协议类型), 特定的 VLAN 记录或者映射</li>\n<li>帧标记：在整个网络骨干网中转发时，在每个帧的标题中放置一个唯一的标识符。</li>\n</ol>\n</li>\n</ol>\n<h5 id=\"帧过滤\"><a class=\"anchor\" href=\"#帧过滤\">#</a> 帧过滤</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_45.jpg\" alt=\"第9讲：局域网交换与vlan_页面_45\" /></p>\n<h5 id=\"帧标记\"><a class=\"anchor\" href=\"#帧标记\">#</a> 帧标记</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_46.jpg\" alt=\"第9讲：局域网交换与vlan_页面_46\" /></p>\n<ol>\n<li>帧标记实施过程：\n<ol>\n<li>在整个网络骨干网中转发时，在每个帧的标题中放置一个 VLAN 标识符。</li>\n<li>每个开关都可以理解和检查标识符。</li>\n<li>当帧离开网络骨干网时，交换机会在帧发送到目标终端站之前删除标识符。只和端口绑定，而不影响主机</li>\n</ol>\n</li>\n<li>帧标记在第 2 层起作用</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_47.jpg\" alt=\"第9讲：局域网交换与vlan_页面_47\" /></p>\n<p><strong>主机并不知道 vlan 的存在</strong></p>\n<h5 id=\"帧标签标准\"><a class=\"anchor\" href=\"#帧标签标准\">#</a> 帧标签标准</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_48.jpg\" alt=\"第9讲：局域网交换与vlan_页面_48\" /></p>\n<p>IEEE802.1Q:IEEE 标准，在标头中插入 VLAN 的标签以标识所属的 VLAN。(帧标记)。</p>\n<p>ISL (Inter-Switch Link)：思科专有。ISL 在数据帧的前面添加一个 26 字节的标头，并在末尾附加一个 CRC (4 字节)。</p>\n<h3 id=\"vlan实现\"><a class=\"anchor\" href=\"#vlan实现\">#</a> vlan 实现</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_49.jpg\" alt=\"第9讲：局域网交换与vlan_页面_49\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_50.jpg\" alt=\"第9讲：局域网交换与vlan_页面_50\" /></p>\n<p>实现 VLAN 的两种方法</p>\n<ol>\n<li>静态的</li>\n<li>动态的</li>\n</ol>\n<p>每一个端口绑定给一个 VLAN</p>\n<ol>\n<li>确保不共享同一 VLAN 的端口不共享广播。</li>\n<li>确保共享相同 VLAN 的端口将共享广播</li>\n</ol>\n<p>实现途径:</p>\n<ol>\n<li>基于端口的虚拟局域网</li>\n<li>基于 MAC 地址的虚拟局域网</li>\n<li>基于 IP 地址的虚拟局域网</li>\n<li>基于上层协议的虚拟局域网</li>\n</ol>\n<h4 id=\"静态vlan\"><a class=\"anchor\" href=\"#静态vlan\">#</a> 静态 vlan</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_51.jpg\" alt=\"第9讲：局域网交换与vlan_页面_51\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_52.jpg\" alt=\"第9讲：局域网交换与vlan_页面_52\" /></p>\n<p>定义：静态 VLAN 是指将交换机上的<strong>端口</strong>管理性地分配给 VLAN 的时间</p>\n<p>优点：</p>\n<ol>\n<li>安全，易于配置和监控</li>\n<li>在控制移动的网络中效果很好</li>\n</ol>\n<h4 id=\"动态vlan\"><a class=\"anchor\" href=\"#动态vlan\">#</a> 动态 vlan</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_53.jpg\" alt=\"第9讲：局域网交换与vlan_页面_53\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_54.jpg\" alt=\"第9讲：局域网交换与vlan_页面_54\" /></p>\n<ol>\n<li>当工作站最初连接到未分配的端口时，交换机会检查表中的条目，并使用正确的 VLAN 动态配置端口</li>\n<li>优点\n<ol>\n<li>添加或移动用户时减少管理 (更多前期工作)</li>\n<li>集中通知未授权用户</li>\n</ol>\n</li>\n</ol>\n<h4 id=\"以端口为中心的vlan\"><a class=\"anchor\" href=\"#以端口为中心的vlan\">#</a> 以端口为中心的 vlan</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_55.jpg\" alt=\"第9讲：局域网交换与vlan_页面_55\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_56.jpg\" alt=\"第9讲：局域网交换与vlan_页面_56\" /></p>\n<ol>\n<li>同一 VLAN 中的所有节点都连接到同一路由器接口</li>\n<li>使管理更容易，因为…\n<ol>\n<li>通过路由器端口分配用户</li>\n<li>VLAN 易于管理。</li>\n<li>提供更高的安全性</li>\n<li>数据包不会 &quot;泄漏&quot; 到其他域</li>\n</ol>\n</li>\n</ol>\n<h4 id=\"access-and-trunk-links\"><a class=\"anchor\" href=\"#access-and-trunk-links\">#</a> access and trunk links</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_57.jpg\" alt=\"第9讲：局域网交换与vlan_页面_57\" /></p>\n<p>分为两类:</p>\n<ol>\n<li>接入链路：通过一个 VLAN 报文</li>\n<li>骨干链路：通过多个 VLAN 报文</li>\n</ol>\n<h5 id=\"access\"><a class=\"anchor\" href=\"#access\">#</a> access</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_58.jpg\" alt=\"第9讲：局域网交换与vlan_页面_58\" /></p>\n<ol>\n<li>访问连接是仅作为一个 VLAN 成员的交换机上的连接。</li>\n<li>此 VLAN 被称为端口的本机 VLAN，连接到端口的任何设备都完全不知道 VLAN 存在。</li>\n</ol>\n<h5 id=\"trunk-links\"><a class=\"anchor\" href=\"#trunk-links\">#</a> trunk links</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_59.jpg\" alt=\"第9讲：局域网交换与vlan_页面_59\" /></p>\n<ol>\n<li>主干链路能够支持多个 VLAN。</li>\n<li>主干链路通常用于将交换机连接到其他交换机或路由器。</li>\n<li>交换机在快速以太网和千兆位以太网端口上都支持骨干链路。</li>\n<li>也存在访问和骨干链接</li>\n<li>一般 Trunk 就是 BackBone</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_60.jpg\" alt=\"第9讲：局域网交换与vlan_页面_60\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_61.jpg\" alt=\"第9讲：局域网交换与vlan_页面_61\" /></p>\n<p>骨干链路不属于特定的 VLAN：充当交换机和路由器之间 VLAN 的通道。</p>\n<p>可以将骨干链路配置为传输所有 VLAN 或有限数量的 VLAN。</p>\n<p>但是，骨干链路可能具有本地 VLAN。</p>\n<p>如果骨干线链路由于任何原因失败，则骨干线的本地 VLAN 是该骨干线使用的 VLAN。</p>\n<h4 id=\"配置vlan\"><a class=\"anchor\" href=\"#配置vlan\">#</a> 配置 vlan</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_62.jpg\" alt=\"第9讲：局域网交换与vlan_页面_62\" /></p>\n<p>在 Cisco 29xx 交换机上配置 VLAN 时，必须遵循以下准则：</p>\n<ol>\n<li>VLAN 的最大数量取决于交换机本身。</li>\n<li>VLAN 1 是出厂默认 VLAN 之一。(native VLAN 往往是 VLAN1，以及广播也是)</li>\n<li>VLAN 1 是默认的以太网 VLAN。</li>\n<li>思科发现协议 (CDP) 和 VLAN 骨干协议 (VTP) 通告在 VLAN 1 上发送。</li>\n<li>默认情况下，Catalyst 29xx IP 地址在 VLAN 1 广播域中。</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_63.jpg\" alt=\"第9讲：局域网交换与vlan_页面_63\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_64.jpg\" alt=\"第9讲：局域网交换与vlan_页面_64\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_65.jpg\" alt=\"第9讲：局域网交换与vlan_页面_65\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_66.jpg\" alt=\"第9讲：局域网交换与vlan_页面_66\" /></p>\n<h3 id=\"vlan间中的路由\"><a class=\"anchor\" href=\"#vlan间中的路由\">#</a> vlan 间中的路由</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_67.jpg\" alt=\"第9讲：局域网交换与vlan_页面_67\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_68.jpg\" alt=\"第9讲：局域网交换与vlan_页面_68\" /></p>\n<ol>\n<li>每个端口连接一个 VLAN，每个 IP 和一个 VLAN 连接</li>\n<li>如下图，我们使用串口线，物理上是一个一个接口，划分成多个 IP 和子接口</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230109125803577.png\" alt=\"image-20230109125803577\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_69.jpg\" alt=\"第9讲：局域网交换与vlan_页面_69\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_70.jpg\" alt=\"第9讲：局域网交换与vlan_页面_70\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_71.jpg\" alt=\"第9讲：局域网交换与vlan_页面_71\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_72.jpg\" alt=\"第9讲：局域网交换与vlan_页面_72\" /></p>\n",
            "tags": [
                "NJUSE",
                "互联网计算",
                "计网"
            ]
        },
        {
            "id": "https://quas-modo.github.io/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture08-%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AERIPOSPF/",
            "url": "https://quas-modo.github.io/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture08-%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AERIPOSPF/",
            "title": "Lecture08-路由协议RIPOSPF",
            "date_published": "2023-02-08T09:53:03.000Z",
            "content_html": "<h1 id=\"lecture08-路由协议rip-ospf\"><a class=\"anchor\" href=\"#lecture08-路由协议rip-ospf\">#</a> Lecture08 - 路由协议 RIP、OSPF</h1>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_01.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_01\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_02.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_02\" /></p>\n<h2 id=\"rip\"><a class=\"anchor\" href=\"#rip\">#</a> RIP</h2>\n<h3 id=\"rip历史\"><a class=\"anchor\" href=\"#rip历史\">#</a> RIP 历史</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_03.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_03\" /></p>\n<p>RIP v1 被认为是一种<strong>内部网关协议</strong>。</p>\n<ol>\n<li>RIP v1 是一种距离向量协议，它以预定间隔将其整个路由表广播到每个邻居路由器。默认间隔为<strong> 30 秒</strong>。</li>\n<li>RIP 使用<strong>跳数</strong>作为度量标准，最大跳数为<strong> 15</strong>，达到 16 跳的报文自动抛弃。</li>\n</ol>\n<p>RIP v1 能够在多达六个等价路径上进行<strong>负载平衡 (Load Balancing)</strong>，默认情况下为四个路径，最多 6 个，跳数相同才能完成负载均衡，跳数不同不满足条件</p>\n<p>RIP 最初是在 RFC 1058 中指定的</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_04.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_04\" /></p>\n<p>RIP v1 具有以下限制：</p>\n<ol>\n<li>它不会在其更新中发送子网掩码信息：意味着必须用同样的子网掩码，不支持 VLSM 或无类域间路由 (CIDR，Classless Interdomain Routing)。</li>\n<li>它以 255.255.255.255 的广播形式发送更新：只能发给邻居，不能通过路由器转发。</li>\n<li>它不支持身份验证 (authentication): 只要启动 RIP 就可以接受到信息，也就意味着只要接入网络并且启动 RIP 进程，就可以了解到整个网络拓扑</li>\n</ol>\n<h3 id=\"rip配置\"><a class=\"anchor\" href=\"#rip配置\">#</a> RIP 配置</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_05.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_05\" /></p>\n<p><code>router rip</code>  命令选择 RIP 作为路由协议。</p>\n<p>network 命令分配基于 NIC 的网络地址，路由器将直接连接到该网络地址</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_06.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_06\" /></p>\n<p>routerA 启用端口，可以简化为 <code>1.0.0.0</code>   <code>2.0.0.0</code></p>\n<h3 id=\"rip-v2\"><a class=\"anchor\" href=\"#rip-v2\">#</a> RIP v2</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_07.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_07\" /></p>\n<p>RIP v2 是 RIP v1 的改进版本，并且新增了以下的功能：</p>\n<ol>\n<li>这是一种使用<strong>跳数指标</strong>的距离矢量协议。</li>\n<li>它使用<strong>抑制计时器</strong>来防止路由循环 - 默认值为<strong> 180 秒</strong>，6 倍于交换时间</li>\n<li>它使用水平分割 (Split Horizon) 来防止路由循环 (Routing Loops)。</li>\n<li>它使用 16 跳作为<strong>无限距离的度量</strong>。(15 跳及以内可达)</li>\n</ol>\n<h3 id=\"ripv1-与-ripv2的比较\"><a class=\"anchor\" href=\"#ripv1-与-ripv2的比较\">#</a> RIPv1 与 RIPv2 的比较</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_08.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_08\" /></p>\n<p>V2 和 V1 不同的特点:</p>\n<ol>\n<li>支持有类路由：可以携带子网掩码</li>\n<li>使用主播地址 <code>244.0.0.9</code>  进行发送广播：特定给 RIP 接受，避免了接受后发现没有启动 RIP 进程耽误时间</li>\n<li>需要身份认证才确定是否继续进行接收。</li>\n</ol>\n<h3 id=\"ripv2-配置\"><a class=\"anchor\" href=\"#ripv2-配置\">#</a> RIPv2 配置</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_09.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_09\" /></p>\n<p>network 命令导致实现以下三个功能：</p>\n<ol>\n<li>路由更新从接口多播。</li>\n<li>如果路由更新进入相同的界面，则将对其进行处理。</li>\n<li>广播直接连接到该接口的子网。</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_10.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_10\" /></p>\n<p>需要设置 version2</p>\n<h3 id=\"验证和故障排除\"><a class=\"anchor\" href=\"#验证和故障排除\">#</a> 验证和故障排除</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_11.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_11\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_12.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_12\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_13.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_13\" /></p>\n<ol>\n<li>The debug ip ripcommand displays RIP routing updates as they are  sent and received. In this example, the update is sent by 183.8.128.130. debug ip rip 命令显示 RIP 路由更新的发送和接收。 在本示例中，更新是通过 183.8.128.130 发送的。</li>\n<li>It reported on three routers, one of which is inaccessible because  its hop count is greater than 15. Updates were then broadcast through  183.8.128.2. 它报告了三台路由器，其中一台无法访问，因为其跳数大于 15。然后通过 183.8.128.2 广播了更新。</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_14.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_14\" /></p>\n<p>120/1：表示 1 跳到达，120/2：表示 2 跳到达</p>\n<h2 id=\"ospf-open-shortest-path-first\"><a class=\"anchor\" href=\"#ospf-open-shortest-path-first\">#</a> OSPF Open Shortest Path First</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_16.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_16\" /></p>\n<p>开放最短路径优先 (OSPF，Open Shortest Path First) 是基于开放标准的链路状态路由协议。</p>\n<p>It is described in several standards of the Internet Engineering  Task Force (IETF) Internet 网络工程任务组 (IETF，Internet Engineering Task  Force) 的多个标准中对此进行了描述：The most recent description is RFC 2328. 最新的描述是 RFC  2328。(已经不是最新的了)</p>\n<p>与 RIP v1 和 RIP v2 相比，OSPF 正在成为首选的 IGP 协议，因为它具有可伸缩性。</p>\n<p>和 RIP 相比优势比较大，很多网络公司在研究 OSPF 的优化。</p>\n<h3 id=\"路由信息\"><a class=\"anchor\" href=\"#路由信息\">#</a> 路由信息</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_17.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_17\" /></p>\n<ol>\n<li>链接的状态是对接口及其与其相邻路由器的关系的描述。</li>\n<li>链接状态的集合形成一个<strong>链接状态数据库</strong>，有时也称为<strong>拓扑数据库</strong>。</li>\n<li>路由器应用<strong> Dijkstra 最短路径优先</strong> (SPF) 算法来构建以自己为根的 SPF 树。</li>\n<li>路由器通过 SPF 树计算最佳路径，然后选择最佳路径并将其放置在<strong>路由表</strong>中。</li>\n</ol>\n<h3 id=\"ospf-vs-rip\"><a class=\"anchor\" href=\"#ospf-vs-rip\">#</a> OSPF vs RIP</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_18.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_18\" /></p>\n<p>用于大型网络，基于带宽，可以分层 (将网络划分成 2 层)，收敛更快，支持多路负载均衡</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_19.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_19\" /></p>\n<ul>\n<li>上面带宽大，2 跳达到，下面带宽小，1 跳到达。</li>\n<li>OSPF 从上面走，RIP 从下面走，但是上面会快一些</li>\n</ul>\n<h3 id=\"ospf-特征\"><a class=\"anchor\" href=\"#ospf-特征\">#</a> OSPF 特征</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_20.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_20\" /></p>\n<ol>\n<li>OSPF 的特征克服了这些限制\n<ol>\n<li>更健壮</li>\n<li>更具可扩展性</li>\n</ol>\n</li>\n<li>大型 OSPF 网络使用分层设计。\n<ol>\n<li>将大的网络分成多个 area，每一个 area 只和 area 0 相连，保证 area 没有回路</li>\n<li>层次最多只有 2 个，一个 area 就是 area 0。</li>\n<li>层次维持树的关系</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"ospf术语\"><a class=\"anchor\" href=\"#ospf术语\">#</a> OSPF 术语</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_21.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_21\" /></p>\n<p>Link: 两个设备之间的物理链路</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_22.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_22\" /></p>\n<ul>\n<li>Neighbors: 相邻的路由器</li>\n<li>Link-State: 物理链路的信息：路由器连接关系、通过什么接口、链路带宽、网络类型 (点对点、多路复用) 等</li>\n<li>不同网络类型处理代价不同</li>\n</ul>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_23.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_23\" /></p>\n<p>Cost: 不同网络链路处理的时候的代价，和链路带宽相关，成反比关系，一般是固定值除以带宽</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_24.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_24\" /></p>\n<p>Area: 一个有很多路由器的端口都属于的区域 (相同)</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_25.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_25\" /></p>\n<p>Autonomous System: 多个 Area 形成一个自治系统</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_26.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_26\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_27.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_27\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_28.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_28\" /></p>\n<ul>\n<li>Neighbours 必须在一个 Area 中才算是，Neighbour 之间交换 Topology Databases</li>\n<li>一个 Area 中获得全部 LS (Link State) 后计算 Tree，生成表</li>\n</ul>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_29.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_29\" /></p>\n<ul>\n<li>DR: 指定路由器，只有在多路复用的情况下使用</li>\n<li>BDR: 如果 DR 坏了，再次选举会出现问题，如果 DR 损坏，BDR 立即成为 DR</li>\n</ul>\n<h3 id=\"opsf域\"><a class=\"anchor\" href=\"#opsf域\">#</a> OPSF 域</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_30.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_30\" /></p>\n<ol>\n<li>区域用 32 位数字标识\n<ol>\n<li>可以是 IP 格式，也可以是一个十进制值</li>\n<li>区域 0 或区域 0.0.0.0</li>\n</ol>\n</li>\n<li>区域 0：区域编号为 0 的单个区域</li>\n<li>OSPF 使用 2 级分层模型：逻辑上必须是 2 层结构，而物理实现上可能有一定的差异，如果更多需要进行逻辑配置。</li>\n<li>在多区域 OSPF 网络中，要求所有区域都连接到区域 0 (主干)</li>\n<li>Example:Area 是和端口相关 (注意端口)</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_31.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_31\" /></p>\n<h3 id=\"ospf行为\"><a class=\"anchor\" href=\"#ospf行为\">#</a> OSPF 行为</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_32.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_32\" /></p>\n<ol>\n<li>OSPF 使用邻居的邻接关系 (Adjacencies) 来全面了解网络。</li>\n<li>OSPF 操作包括五个步骤：\n<ol>\n<li>步骤 1：建立邻接关系</li>\n<li>步骤 2：选择 DR 和 BDR (如果需要): 多路复用的时候才需要</li>\n<li>步骤 3：发现路线</li>\n<li>步骤 4：选择适当的路线</li>\n<li>步骤 5：维护路线信息</li>\n</ol>\n</li>\n<li>OSPF 具有七个状态。简而言之，它们是：\n<ol>\n<li>Init, 2Way, Ex Start, Exchange, Loading, Full</li>\n<li>初始化，双向操作，预先启动，交换，加载，完成</li>\n</ol>\n</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_33.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_33\" /></p>\n<h3 id=\"选择dr和bdr\"><a class=\"anchor\" href=\"#选择dr和bdr\">#</a> 选择 DR 和 BDR</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_34.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_34\" /></p>\n<p>OSPF 网络类型</p>\n<ol>\n<li>广播多路复用网络，例如以太网</li>\n<li>点对点网络</li>\n<li>非广播多路复用网络 (NBMA, Nonbroadcasr multi-access)</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_35.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_35\" /></p>\n<p>只有多路复用才需要选择 DR 和 BDR</p>\n<p>原先，每一个都要建立 10 (5 * 4/2) 个链接，如果有了 DR 就只需要 4 个连接</p>\n<p>对于所有 OSPF 路由器，DR 使用 224.0.0.5 (自己的 IP) 的<strong>主播地址</strong>向该网段上的所有其他路由器发送链接状态信息。</p>\n<p>为确保 DR/BDR 看到所有路由器在网段上发送的链接状态，使用了所有 DR/BDR 的多播地址 224.0.0.6。(DR 和 BDR 之间）</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_36.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_36\" /></p>\n<h3 id=\"ospf报文\"><a class=\"anchor\" href=\"#ospf报文\">#</a> OSPF 报文</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_37.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_37\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_38.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_38\" /></p>\n<p>包，并继续以固定的时间间隔 (intervals) 发送 hello。</p>\n<p>控制 (govern) OSPF hello 数据包交换的规则称为 Hello 协议。</p>\n<p>Hello 数据包的地址为 224.0.0.5。</p>\n<p>默认情况下，广播多路访问和点对点网络上<strong>每 10 秒</strong>发送一次 Hello 报文。</p>\n<p>在连接到 NBMA 网络的接口 (例如帧中继) 上，默认时间是 30 秒。</p>\n<p>保持心跳，确定还活着。Hello 几乎是空报文，给所有跑 OSPF 的路由器发送</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_39.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_39\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_40.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_40\" /></p>\n<h3 id=\"哪个路由器将成为dr\"><a class=\"anchor\" href=\"#哪个路由器将成为dr\">#</a> 哪个路由器将成为 DR？</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_41.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_41\" /></p>\n<ol>\n<li>优先级 + 路由器 ID，最大的是 DR，第二大的是 BDR。</li>\n<li>优先级：1-255，默认值：1</li>\n<li>路由器 ID\n<ol>\n<li>环回 IP 地址 (逻辑端口)，避免端口宕机出现问题。</li>\n<li>如果没有环回 IP 地址，则接口 IP 为最高值地址 (Active 的端口上的 IP 作为参考)</li>\n<li>如果接口出现故障，则路由器必须重新建立邻接关系并重新转换 (readvertising) LSA</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"ospf机制\"><a class=\"anchor\" href=\"#ospf机制\">#</a> OSPF 机制</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_42.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_42\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_43.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_43\" /></p>\n<ul>\n<li>准备交换数据库 (Exstart Starts)</li>\n<li>首先确认主方 (发送方)、从方 (接受方)，保证数据有序，简单就是谁的 Router ID 高</li>\n<li>Router ID 高的 (主方) 发送自己 DBD 报文，从方对主方发送的 DBD 接受处理并发送</li>\n</ul>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_44.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_44\" /></p>\n<p>交换完成后，各自检查自己是不是有全部的信息</p>\n<ul>\n<li>如果有完整的信息，则发送 LSAck</li>\n<li>如果发现有没有的，则发送 LSR，等待 LSU (整个链路的详细信息，不是 LSA) 来进行学习，之后收到完成后发送 LSAck</li>\n</ul>\n<h3 id=\"ospf操作\"><a class=\"anchor\" href=\"#ospf操作\">#</a> OSPF 操作</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_45.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_45\" /></p>\n<h4 id=\"建立邻接关系\"><a class=\"anchor\" href=\"#建立邻接关系\">#</a> 建立邻接关系</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_46.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_46\" /></p>\n<p>路由器每隔一段时间发送一次 hello 数据包，Hello 报文的 TTL 是 1，表明不会跨路由传播。</p>\n<p>如果邻居被发现了：将邻居添加到邻居数据库</p>\n<p>发现网络类型</p>\n<ol>\n<li>如果是多路复用网络，进入 DR/BDR 选举过程，然后进入步骤 2。</li>\n<li>如果是点对点或点对多点网络，则不会举行 DR/BDR 选举过程，并跳过步骤 2。</li>\n<li>如果 hello 数据包标头中的 DR/BDR 字段已被占用 (即 DR / BDR 对已经存在)，则不会进行 DR/BDR 选举，并跳过步骤 2。</li>\n</ol>\n<p>如果对方的 DP/BDP 优于我的 DP/BDP，则接受对方的</p>\n<h4 id=\"选举dr和bdr\"><a class=\"anchor\" href=\"#选举dr和bdr\">#</a> 选举 DR 和 BDR</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_47.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_47\" /></p>\n<ol>\n<li>如果没有其他路由器联机，则该路由器将成为 DR。下一个要 &quot;启动&quot; 的路由器将是 BDR。</li>\n<li>如果多个路由器 (两个或更多) 同时联机，则\n<ol>\n<li>优先级最高的路由器成为 DR：优先级为零表示 &quot;从不 DR&quot;</li>\n<li>如果存在平局，则具有最高路由器 ID 的路由器将成为 DR：路由器 ID 是最高的环回或接口 IP 地址</li>\n<li>具有第二高优先级或路由器 ID 的路由器成为 BDR</li>\n</ol>\n</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_48.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_48\" /></p>\n<ol>\n<li>如果 DR 无效，则 BDR 变为 DR。</li>\n<li>然而\n<ol>\n<li>如果新的 OSPF 路由器以更高的优先级或路由器 ID 加入网络，则当前的 DR 和 BDR<strong> 不会更改</strong>。</li>\n<li>仅当当前 DR 失败时，它才成为新的 BDR；或者仅当当前 DR 和 BDR 失败时，才成为新的 DR。</li>\n</ol>\n</li>\n</ol>\n<h4 id=\"发现路线\"><a class=\"anchor\" href=\"#发现路线\">#</a> 发现路线</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_49.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_49\" /></p>\n<ol>\n<li>这一步从 Ex Start 状态转换到完整状态</li>\n<li>路由器确定 &quot;主 / 从 (master/slave)&quot; 关系</li>\n<li>多路复用网络中的 DR/BDR 交换 LSA，并且所有其他 DR 将其 Type 2 DBD 发送给 DR/BDR。</li>\n<li>如有必要，路由器可以通过发送请求更多信息的 LSR 进入负载状态：所有路由器必须在 &quot;加载状态&quot; 中等待，直到完全更新请求的路由器。</li>\n<li>路由器现在进入完整状态</li>\n</ol>\n<h4 id=\"选择适当的路线\"><a class=\"anchor\" href=\"#选择适当的路线\">#</a> 选择适当的路线</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_50.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_50\" /></p>\n<p>现在，将与网络上的所有其他路由器并行地计算 SPF 算法。</p>\n<ol>\n<li>切记：在发生这种情况之前，所有路由器必须具有相同的链接状态数据库。</li>\n<li>SPF 使用 Cost 作为指标</li>\n<li>SPF 将从其自身到目的地的每条路径的成本相加，并以路由器为根来构建树</li>\n<li>OSPF 然后在路由表中安装成本最低的路径：最多将安装 4 条等价路径以进行负载共享</li>\n</ol>\n<h4 id=\"维护路由信息\"><a class=\"anchor\" href=\"#维护路由信息\">#</a> 维护路由信息</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_51.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_51\" /></p>\n<ol>\n<li>常规的 Hello 交换是 OSPF 用于检测新邻居或故障 (downed) 邻居的机制。</li>\n<li>根据网络的类型，Hello 数据包以不同的默认间隔发送。(确定对方是不是还好)\n<ol>\n<li>对于速度为 T1 (1.544 Mbps) 或更高的链接，每 10 秒：广播多路访问和点对点链接</li>\n<li>对于小于 T1 的链接，每 30 秒：非广播多路访问链接</li>\n<li>&quot;死间隔&quot; 是问候间隔的四倍。(如果在这样子对方还没有成功则对方死了)</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"链路状态出现变化\"><a class=\"anchor\" href=\"#链路状态出现变化\">#</a> 链路状态出现变化</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_52.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_52\" /></p>\n<ul>\n<li>Router A tells all OSPF DRs on 224.0.0.6</li>\n<li>Event 触发交换：比如 A 连接的网段断掉了</li>\n<li>A 使用 LSU 告知<strong> DR</strong></li>\n</ul>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_53.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_53\" /></p>\n<ul>\n<li>DR tells others on 224.0.0.5</li>\n<li>DR 通过 LSU 告知所有的路由器</li>\n</ul>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_54.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_54\" /></p>\n<p>如果 B 连接了别的 Area，则继续进行交换</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_55.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_55\" /></p>\n<p>所有的路由信息交换完毕后，同时更新路由表</p>\n<h3 id=\"基本的ospf配置\"><a class=\"anchor\" href=\"#基本的ospf配置\">#</a> 基本的 OSPF 配置</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_56.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_56\" /></p>\n<ol>\n<li>在路由器上启动 OSPF\n<ol>\n<li><code>Router (config)# router ospf process-id</code></li>\n<li>进程号:process-id\n<ol>\n<li>取值: 1 ~ 65535</li>\n<li>在一台路由器上识别多个 OSPF 进程</li>\n<li>通常在整个 AS (自治系统) 中保持相同的进程 ID</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>在路由器上识别 IP 网络\n<ol>\n<li><code>Router (config-router) # network address wildcardmask area area-id</code></li>\n<li>网络地址可以是整个网络，子网或接口的地址。</li>\n<li>address:IP 地址</li>\n</ol>\n</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_57.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_57\" /></p>\n<ul>\n<li>只有一个 Area，则为 0</li>\n<li><strong>Wild-card Mask 和子网掩码相反</strong>：子网掩码是 255.255.255.0，则 Wild-card Address 就是 0.0.0.255</li>\n<li>写 IP 和写网段最后都是一样的</li>\n</ul>\n<h3 id=\"配置回路地址\"><a class=\"anchor\" href=\"#配置回路地址\">#</a> 配置回路地址</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_58.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_58\" /></p>\n<p>为 OSPF 路由器 ID 添加稳定性</p>\n<ol>\n<li>必须在 OSPF 进程开始之<strong>前</strong>配置回环接口：会涉及到主从关系确定和 DR 的选举</li>\n<li>配置环回地址时，请使用 / 32 掩码以避免潜在的路由问题</li>\n<li>I 建议您在基于 OSPF 的网络中的所有关键路由器上使用环回地址 (专用或公用地址)。</li>\n<li>一旦配置立刻生效，不需要 no shutdown 的命令即可</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_59.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_59\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_60.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_60\" /></p>\n<p>操纵 DR/BDR 选举</p>\n<ol>\n<li><code>Router (config-if) # ip ospf priority number</code></li>\n<li>优先级：越大越高\n<ol>\n<li>值：0-255, 默认为 1</li>\n<li>优先级 0 表示接口不能被选为 DR 或 BDR</li>\n</ol>\n</li>\n</ol>\n<p>操作 OSPF 的端口的优先级： <code>Router # show ip ospf [interface type number]</code></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_61.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_61\" /></p>\n<h3 id=\"osof成本-标准\"><a class=\"anchor\" href=\"#osof成本-标准\">#</a> OSOF 成本 = 标准</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_62.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_62\" /></p>\n<ol>\n<li>Cost 适用于所有路由器连接路径</li>\n<li>16 位数字 (1 – 65,535)</li>\n<li>较低的 Cost-&gt; 更理想</li>\n<li>路径决定是基于路径的总成本。</li>\n<li>指标受到带宽的影响</li>\n<li>用一个很大的数字去除以当前的带宽得到代价，计算方法如下</li>\n</ol>\n<h3 id=\"ospf-path-cost\"><a class=\"anchor\" href=\"#ospf-path-cost\">#</a> OSPF Path Cost</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_63.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_63\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_64.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_64\" /></p>\n<ol>\n<li>需要更改成本的常见情况是在多供应商 (multi-vendor) 路由环境中。成本更改将确保一个供应商的成本值与另一供应商的成本值匹配。</li>\n<li>另一种情况是使用千兆以太网。默认成本将最低成本值 1 分配给 100 Mbps 链路。</li>\n</ol>\n<h3 id=\"设置ospf计时器\"><a class=\"anchor\" href=\"#设置ospf计时器\">#</a> 设置 OSPF 计时器</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_65.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_65\" /></p>\n<p>OSPF 区域中的所有路由器必须在相同的 hello 间隔和相同的死间隔上达成一致，默认情况下：</p>\n<ol>\n<li>T1 或更高链接 (广播) 为 10 秒</li>\n<li>慢于 T1 的链接为 30 秒 (非广播)</li>\n<li>死亡间隔 = <strong>4</strong> * 问候间隔</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC8%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AErip,ospf_%E9%A1%B5%E9%9D%A2_66.jpg\" alt=\"第8讲：路由协议rip,ospf_页面_66\" /></p>\n",
            "tags": [
                "NJUSE",
                "互联网计算",
                "计网"
            ]
        },
        {
            "id": "https://quas-modo.github.io/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture07-%E8%B7%AF%E7%94%B1%E5%99%A8/",
            "url": "https://quas-modo.github.io/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture07-%E8%B7%AF%E7%94%B1%E5%99%A8/",
            "title": "Lecture07-路由器",
            "date_published": "2023-02-08T09:52:47.000Z",
            "content_html": "<h1 id=\"lecture07-routing-and-routers路由器和网络\"><a class=\"anchor\" href=\"#lecture07-routing-and-routers路由器和网络\">#</a> Lecture07-Routing and Routers 路由器和网络</h1>\n<h2 id=\"路由器基础\"><a class=\"anchor\" href=\"#路由器基础\">#</a> 路由器基础</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_03.jpg\" alt=\"第7讲：路由与路由器_页面_03\" /></p>\n<h3 id=\"路由器内部组件\"><a class=\"anchor\" href=\"#路由器内部组件\">#</a> 路由器内部组件</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_04.jpg\" alt=\"第7讲：路由与路由器_页面_04\" /></p>\n<h3 id=\"ram-random-access-memory-随机存取存储器\"><a class=\"anchor\" href=\"#ram-random-access-memory-随机存取存储器\">#</a> RAM Random Access Memory 随机存取存储器</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_05.jpg\" alt=\"第7讲：路由与路由器_页面_05\" /></p>\n<p>路由器配置文件的临时存储，一般做为内存使用</p>\n<p>断电或重新启动时 RAM 内容丢失</p>\n<p>存储:</p>\n<ol>\n<li>路由表</li>\n<li>ARP 缓存</li>\n<li>快速切换缓存</li>\n<li>报文缓存：可能前面有正在处理的，需要等待</li>\n<li>数据包保留队列</li>\n</ol>\n<h3 id=\"nvram-non-volatile-ram-非易失随机存取存储器\"><a class=\"anchor\" href=\"#nvram-non-volatile-ram-非易失随机存取存储器\">#</a> NVRAM Non-volatile RAM 非易失随机存取存储器</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_06.jpg\" alt=\"第7讲：路由与路由器_页面_06\" /></p>\n<p>存储备份 (backup)/ 启动 (startup) 配置文件</p>\n<p>路由器掉电或重启时内容不会丢失</p>\n<h3 id=\"flash\"><a class=\"anchor\" href=\"#flash\">#</a> Flash</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_07.jpg\" alt=\"第7讲：路由与路由器_页面_07\" /></p>\n<ol>\n<li>电子可擦可编程只读存储器 (EEPROM, Electronically Erasable Programmable Read-Only Memory)</li>\n<li>存储了 Cisco IOS (互联网操作系统)</li>\n<li>允许更新软件而无需更换闪存芯片</li>\n<li>可以存储多个版本的 IOS</li>\n<li>断电保持</li>\n</ol>\n<h3 id=\"rom-read-only-memory\"><a class=\"anchor\" href=\"#rom-read-only-memory\">#</a> ROM Read-Only Memory</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_08.jpg\" alt=\"第7讲：路由与路由器_页面_08\" /></p>\n<ol>\n<li>包含 POST (开机自检):PC 也有，开机的时候，读取一些参数进行对比，如果一样则保证硬件是正常的。</li>\n<li>引导程序 (加载 Cisco IOS)</li>\n<li>作系统软件\n<ol>\n<li>IOS 的备份，精简 (trimmed down) 版本</li>\n<li>升级需要安装新的芯片组</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"接口\"><a class=\"anchor\" href=\"#接口\">#</a> 接口</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_09.jpg\" alt=\"第7讲：路由与路由器_页面_09\" /></p>\n<p>数据包通过其进入和离开路由器的网络连接口</p>\n<p>附在主板 (motherboard) 上或作为单独的模块。</p>\n<h2 id=\"路由器启动程序\"><a class=\"anchor\" href=\"#路由器启动程序\">#</a> 路由器启动程序</h2>\n<h3 id=\"系统启动程序\"><a class=\"anchor\" href=\"#系统启动程序\">#</a> 系统启动程序</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_11.jpg\" alt=\"第7讲：路由与路由器_页面_11\" /></p>\n<ol>\n<li>执行开机自检 (POST)：在此自检期间，路由器从所有硬件模块上的 ROM 执行诊断：如果有问题导致操作系统无法重启，那么我们就需要对硬件进行检查</li>\n<li>验证 CPU，内存和网络接口端口的基本操作。</li>\n<li>软件初始化。</li>\n</ol>\n<h3 id=\"软件启动程序\"><a class=\"anchor\" href=\"#软件启动程序\">#</a> 软件启动程序</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_12.jpg\" alt=\"第7讲：路由与路由器_页面_12\" /></p>\n<ol>\n<li>步骤 1:ROM 中的通用引导加载程序 (bootstrap) 在 CPU 卡上执行。</li>\n<li>步骤 2: 可以在以下几个位置之一找到操作系统 (Cisco IOS)。该位置在配置寄存器的引导字段中公开。</li>\n<li>步骤 3: 加载操作系统映像。\n<ol>\n<li>先从 Flash 找，也就只有一个 image 文件，将 image 导入内存</li>\n<li>如果 image 找不到，则到 TFTP Server，如果能找到则下载下拉一个 image</li>\n<li>如果 TFTP 也没有配置，则去 ROM 中导出 IOS</li>\n</ol>\n</li>\n<li>步骤 4: 将保存在 NVRAM 中的配置文件加载到主存储器中，并一次执行一行。\n<ol>\n<li>先看 NVRAM 中有没有配置 (start.config)</li>\n<li>然后看 TFTP Server 有没有配置，如果有则下载一个</li>\n<li>如果都没有，用 console 进行配置</li>\n</ol>\n</li>\n<li>步骤 5 - 如果 NVRAM 中<strong>没有</strong>有效的配置文件，则执行问题驱动 (question-driven) 的初始配置例程，该例程称为系统配置对话框，也称为<strong>设置模式</strong>。</li>\n</ol>\n<h3 id=\"路由器初始化过程\"><a class=\"anchor\" href=\"#路由器初始化过程\">#</a> 路由器初始化过程</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230107174143705.png\" alt=\"image-20230107174143705\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_13.jpg\" alt=\"第7讲：路由与路由器_页面_13\" /></p>\n<h3 id=\"基本的路由器配置\"><a class=\"anchor\" href=\"#基本的路由器配置\">#</a> 基本的路由器配置</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_14.jpg\" alt=\"第7讲：路由与路由器_页面_14\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_15.jpg\" alt=\"第7讲：路由与路由器_页面_15\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_16.jpg\" alt=\"第7讲：路由与路由器_页面_16\" /></p>\n<h2 id=\"路由和配置\"><a class=\"anchor\" href=\"#路由和配置\">#</a> 路由和配置</h2>\n<h3 id=\"使用网络寻址进行路由\"><a class=\"anchor\" href=\"#使用网络寻址进行路由\">#</a> 使用网络寻址进行路由</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_18.jpg\" alt=\"第7讲：路由与路由器_页面_18\" /></p>\n<p>路由器通常使用两个基本功能 (路径确定功能和交换功能) 将数据包从一条数据链路中继 (relay) 到另一条数据链路。</p>\n<ol>\n<li><strong>交换功能</strong>允许路由器在一个接口上<strong>接受数据包</strong>并<strong>通过第二个接口转发。</strong></li>\n<li><strong>路径确定</strong>功能使路由器能够选择<strong>最合适的接口</strong>来<strong>转发数据包</strong>。</li>\n</ol>\n<p>路由器使用地址的网络部分进行路径选择，以将数据包传递到下一个路由器</p>\n<p>地址的节点部分由直接连接到目标网络的路由器使用，以将数据包传递到正确的主机</p>\n<h3 id=\"静态路由\"><a class=\"anchor\" href=\"#静态路由\">#</a> 静态路由</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_19.jpg\" alt=\"第7讲：路由与路由器_页面_19\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_20.jpg\" alt=\"第7讲：路由与路由器_页面_20\" /></p>\n<p>尽管 (whereas) 动态路由倾向于显示 (reveal) 有关互联网络的所有已知信息，但是出于安全原因，您可能希望隐藏互联网络的某些部分。</p>\n<p>当只有一条路径可访问网络时，到网络的静态路由就足够了。(默认路由，将 B 所有不知道位置的全部交给 A，由 A 去进行访问)</p>\n<p>这种分区称为末节网络 (Stub Network）</p>\n<h3 id=\"静态路由配置\"><a class=\"anchor\" href=\"#静态路由配置\">#</a> 静态路由配置</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_21.jpg\" alt=\"第7讲：路由与路由器_页面_21\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_22.jpg\" alt=\"第7讲：路由与路由器_页面_22\" /></p>\n<ol>\n<li>** 管理距离 (administrative distance)** 是路由信息源的可信赖性的等级，表示为从 0 到 255 的数值。(管理距离)</li>\n<li>数字越大，可信度 (trustworthiness) 越低。</li>\n<li>因此静态路由的管理距离通常很短 (默认值为 1)</li>\n<li>管理距离是 0 的路由是什么情况？直连网段是最可信的，比静态路由还高</li>\n</ol>\n<h3 id=\"动态路由配置\"><a class=\"anchor\" href=\"#动态路由配置\">#</a> 动态路由配置</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_23.jpg\" alt=\"第7讲：路由与路由器_页面_23\" /></p>\n<p>动态路由协议还可以重定向网络中不同路径之间的流量 (或负载分担 (loadshare))</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_24.jpg\" alt=\"第7讲：路由与路由器_页面_24\" /></p>\n<ol>\n<li>动态路由依赖于路由协议在路由器之间共享知识。</li>\n<li>动态路由取决于两个基本路由器功能：\n<ol>\n<li>维护 (maintance) 路由表 (动态维持的)</li>\n<li>向其他路由器分发 (distribution) 路由信息</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"收敛时间\"><a class=\"anchor\" href=\"#收敛时间\">#</a> 收敛时间</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_25.jpg\" alt=\"第7讲：路由与路由器_页面_25\" /></p>\n<ul>\n<li>收敛发生在所有路由用了相对稳定的网络拓扑</li>\n<li>当拓扑变化的时候，路由器必须重新计算路由</li>\n<li>路由器重新发生收敛的进程和时间根据不同的路由协议有所区别</li>\n</ul>\n<h3 id=\"动态路由协议分类\"><a class=\"anchor\" href=\"#动态路由协议分类\">#</a> 动态路由协议分类</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_26.jpg\" alt=\"第7讲：路由与路由器_页面_26\" /></p>\n<h4 id=\"距离矢量协议\"><a class=\"anchor\" href=\"#距离矢量协议\">#</a> 距离矢量协议</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_27.jpg\" alt=\"第7讲：路由与路由器_页面_27\" /></p>\n<ol>\n<li>距离矢量算法不允许路由器知道互联网络的<strong>确切拓扑</strong></li>\n<li>基于距离矢量的路由算法 (也称为 Bellman-Ford 算法) 在路由器之间传递路由表的周期性副本。\n<ol>\n<li>大家交换 Routing Table</li>\n<li>只知道可达，但是不知道怎么可达 (知道 where, 但是不知道 how)，不知道整个网路的具体拓扑</li>\n</ol>\n</li>\n</ol>\n<h5 id=\"问题路由环路\"><a class=\"anchor\" href=\"#问题路由环路\">#</a> 问题：路由环路</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_28.jpg\" alt=\"第7讲：路由与路由器_页面_28\" /></p>\n<p><strong>稳定之后</strong>，如果 NetWork1 不可到达</p>\n<p>B 发现不可达，但是告知 C 的时候比较晚，C 已经将信息告诉了 D，这样子就可能循环下去，然后不收敛。</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_29.jpg\" alt=\"第7讲：路由与路由器_页面_29\" /></p>\n<p>网络 1 的无效更新将继续循环，直到其他进程停止循环为止。</p>\n<p>尽管有一个基本事实，即目标网络 (网络 1) 已关闭，但这种称为计数到无穷大的条件却使数据包在网络中连续循环。</p>\n<p>当路由器计数到无穷远时，无效信息将允许存在路由环路</p>\n<h5 id=\"解决方案设置最大值\"><a class=\"anchor\" href=\"#解决方案设置最大值\">#</a> 解决方案 —— 设置最大值</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_30.jpg\" alt=\"第7讲：路由与路由器_页面_30\" /></p>\n<p>设置最大跳数，比如最多转发 15 跳，16 跳以上为不可达</p>\n<h5 id=\"结局方案路由中毒\"><a class=\"anchor\" href=\"#结局方案路由中毒\">#</a> 结局方案 —— 路由中毒</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_31.jpg\" alt=\"第7讲：路由与路由器_页面_31\" /></p>\n<ol>\n<li>当网络 5 发生故障时，路由器 E 通过将网络 5 的表条目设置为<strong> 16 或不可访问</strong>来启动路由中毒。(而不是删除条目)</li>\n<li>、当路由器 C 从路由器 E 接收到路由中毒时，它会将更新 (称为毒性逆转，poison reverse) 发送回路由器 E。这确保网段上的所有路由器都已接收到中毒的路由信息。</li>\n<li>最终所有的路由器都知道不可达</li>\n<li>路由毒害，由信息在路由表中失效的时候，把该表项的的度量值 (metric) 设为无穷大 16，而不是马上从路由表中删掉这条路由信息，再将其信息发布出去，这样相邻的路由器就得知这条路由已无效了</li>\n</ol>\n<h5 id=\"解决方案水平分割\"><a class=\"anchor\" href=\"#解决方案水平分割\">#</a> 解决方案 —— 水平分割</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_32.jpg\" alt=\"第7讲：路由与路由器_页面_32\" /></p>\n<ol>\n<li>从某个端口收到的报文信息，不能再从端口发送回去</li>\n<li>比如 A 发送给 B 和 D，之后 B 和 D 又把之后的报文还给 A，这时候就不接受 B 和 D 的。也即使 A 只接受 B 的</li>\n<li>如果 B 和 D 接收到一个到达目的网段 1 的更好的路径，A 是会接收的</li>\n<li><strong>有名词解释题目</strong></li>\n</ol>\n<h5 id=\"解决方案计时器\"><a class=\"anchor\" href=\"#解决方案计时器\">#</a> 解决方案 —— 计时器</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_33.jpg\" alt=\"第7讲：路由与路由器_页面_33\" /></p>\n<ol>\n<li>我收到网络信息不可以到达的信息的时候，启动计时器，开始计时 (这个信息包含请计时信息)</li>\n<li>如果有任何一个计时的设备收到了一个比原来更好的达到路径，则会修改对应记录，但是如果更差不会记录。</li>\n<li>计时器结束后，删除掉对应的条目，避免出现问题</li>\n<li>每一条路由表的记录都有<strong>有效时间</strong></li>\n</ol>\n<h5 id=\"阻止发送路由更新\"><a class=\"anchor\" href=\"#阻止发送路由更新\">#</a> 阻止发送路由更新</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_34.jpg\" alt=\"第7讲：路由与路由器_页面_34\" /></p>\n<ol>\n<li>为了防止接口发出任何路由更新信息，请使用以下命令： <code>Router(config-router)#Passive-interface f0/0</code></li>\n<li>它仅在使用距离矢量路由协议时才有效，因为链接状态路由协议不会直接从其邻居的路由表中获取拓扑信息</li>\n<li><strong>接受路由表的更新，但是不发送报文出去</strong></li>\n</ol>\n<h4 id=\"链接状态协议lsp-link-state-protocol\"><a class=\"anchor\" href=\"#链接状态协议lsp-link-state-protocol\">#</a> 链接状态协议 (LSP, Link-state Protocol)</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_35.jpg\" alt=\"第7讲：路由与路由器_页面_35\" /></p>\n<ol>\n<li>基于链接状态的路由算法也称为 SPF (最短路径优先) 算法，维护复杂的拓扑信息数据库：对树处理路由表，没有环路问题</li>\n<li>链接状态路由使用：\n<ol>\n<li>链接状态广告 (LSAs): 告诉你我有这个链路 (每一个网段都是相同性质链路，链路上有唯一的 NetID、带宽、连接拓扑关系、网段、链路类型等属性，我们优化属性后，进行 LSA，告知对方主 Key，如果再需要的话，再给具体信息)</li>\n<li>拓扑数据库 (有 LSA 组成，每个结点都持有)</li>\n<li>根据 SPF (shortest path first) 算法生成的 SPF 树 (Tree 会不一样，因为每一个路由都是以自己为根的)</li>\n<li>每个网络的路径和端口的路由表</li>\n</ol>\n</li>\n<li>RFC 1583 包含对 OSPF 链路状态概念和操作的描述。</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_36.jpg\" alt=\"第7讲：路由与路由器_页面_36\" /></p>\n<ol>\n<li>路由器之间<strong>交换 LSA</strong>，每个路由器都以直接连接的网络开头</li>\n<li>每个路由器与其他路由器并行<strong>构建一个拓扑数据库</strong>，该拓扑数据库包含来自网络的所有 LSA。</li>\n<li><strong>SPF 算法计算网络可达性</strong>：路由器将此逻辑拓扑构建为一棵树，以其自身为根，由链路状态协议互联网络中每个网络的所有可能路径组成。然后，对这些路径进行最短路径优先 (SPF) 排序。</li>\n<li><strong>路由器在路由表中列出其最佳路径以及这些目标网络的端口</strong>。它还维护拓扑元素和状态详细信息的其他数据库。</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_37.jpg\" alt=\"第7讲：路由与路由器_页面_37\" /></p>\n<ol>\n<li>处理和存储要求\n<ul>\n<li>在大多数情况下，运行链路状态路由协议要求路由器比距离矢量路由协议使用更多的内存并执行更多的处理：需要 CPU 进行计算</li>\n</ul>\n</li>\n<li>带宽要求\n<ol>\n<li>在初始链路状态数据包泛洪 (flooding) 期间，所有使用链路状态路由协议的路由器会将 LSA 数据包发送到所有其他路由器。 随着路由器对带宽的需求增加，此操作将淹没互联网，并暂时减少可用于承载用户数据的路由流量的带宽。</li>\n<li>一开始的时候报文会比较频繁多 (所以告知 LSA 而不是 LS，减小压力)</li>\n<li>注：初期消耗大，之后消耗小，稳定之后是根据事务触发更新</li>\n</ol>\n</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_38.jpg\" alt=\"第7讲：路由与路由器_页面_38\" /></p>\n<p>链路状态路由必须确保所有路由器都获得所有必要的 LSA 数据包。</p>\n<p>具有不同 LSA 集的路由器根据不同的拓扑数据计算路由</p>\n<p>如果有一个链路的状态发生变化 (恢复或者被破坏)，必须将修改通知给全部路由器消耗代价比较大 (SPF 算法)。</p>\n<h4 id=\"ls和dv的比较\"><a class=\"anchor\" href=\"#ls和dv的比较\">#</a> LS 和 DV 的比较</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_39.jpg\" alt=\"第7讲：路由与路由器_页面_39\" /></p>\n<ol>\n<li>DV: 距离矢量\n<ol>\n<li>视野窄，代价小</li>\n<li>基于跳数</li>\n<li>定期交换路由表，收敛慢</li>\n<li>交换路由表</li>\n</ol>\n</li>\n<li>LS: 链路状态\n<ol>\n<li>视野宽，有一定代价</li>\n<li>基于带宽</li>\n<li>初期充分交换，收敛快</li>\n<li>交换 Linked State 的数据库</li>\n</ol>\n</li>\n</ol>\n<h4 id=\"混合协议\"><a class=\"anchor\" href=\"#混合协议\">#</a> 混合协议</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_40.jpg\" alt=\"第7讲：路由与路由器_页面_40\" /></p>\n<p>混合协议的示例：</p>\n<ol>\n<li>OSI’s IS-IS (Intermediate System-to-Intermediate System)</li>\n<li>Cisco’s EIGRP (Enhanced Interior Gateway Routing Protocol). 基于负载和带宽评判，定时交换路由表</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_41.jpg\" alt=\"第7讲：路由与路由器_页面_41\" /></p>\n<table>\n<thead>\n<tr>\n<th>英文缩写</th>\n<th>英文解释</th>\n<th>中文解释</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>RIP</td>\n<td>a distance-vector routing protocol</td>\n<td>距离矢量协议</td>\n<td>DV</td>\n</tr>\n<tr>\n<td>IGRP</td>\n<td>Cisco’s distance-vector routing protocol IGRP</td>\n<td>思科的距离矢量路由协议</td>\n<td>DV，基本启用</td>\n</tr>\n<tr>\n<td>OSPF</td>\n<td>Open Shortest Path First</td>\n<td>开放式最短路径优先</td>\n<td>LSP</td>\n</tr>\n<tr>\n<td>EIGRP</td>\n<td>-</td>\n<td>平衡的混合路由协议</td>\n<td>杂合</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"路由协议的主要目标\"><a class=\"anchor\" href=\"#路由协议的主要目标\">#</a> 路由协议的主要目标</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_42.jpg\" alt=\"第7讲：路由与路由器_页面_42\" /></p>\n<ol>\n<li>最佳 (Optimal) 路线：选择最佳路线</li>\n<li>效率 (Efficiency): 最少使用带宽和路由器处理器资源</li>\n<li>快速收敛 (Rapid Convergence): 越快越好。有些比其他人收敛更快。</li>\n<li>灵活性 (Flexibility): 可以处理各种情况，例如高使用率和失败的路由</li>\n</ol>\n<h3 id=\"动态路由配置-2\"><a class=\"anchor\" href=\"#动态路由配置-2\">#</a> 动态路由配置</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_43.jpg\" alt=\"第7讲：路由与路由器_页面_43\" /></p>\n<h3 id=\"设置默认路由\"><a class=\"anchor\" href=\"#设置默认路由\">#</a> 设置默认路由</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_44.jpg\" alt=\"第7讲：路由与路由器_页面_44\" /></p>\n<ol>\n<li>默认路由使路由表更短。(很多路由被省略)</li>\n<li>如果路由表中没有目标网络的条目，则将数据包发送到默认网络。</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_45.jpg\" alt=\"第7讲：路由与路由器_页面_45\" /></p>\n<p>使用动态路由协议定义默认路由: <code>Router(config)# ip default-network [network-number]</code></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC7%E8%AE%B2%EF%BC%9A%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8_%E9%A1%B5%E9%9D%A2_46.jpg\" alt=\"第7讲：路由与路由器_页面_46\" /></p>\n<ol>\n<li>将默认路由定义为静态路由： <code>Router(config)# ip route 0.0.0.0 0.0.0.0 [next-hop-ipaddress| exit-interface]</code></li>\n<li>配置默认路由后，使用 show ip route 将显示：(172.16.1.2 是默认的下一跳地址)\n<ol>\n<li>不得已的网关是到网络 0.0.0.0 的 172.16.1.2</li>\n<li>所有不知道转发给谁的都给 172.16.1.2</li>\n</ol>\n</li>\n</ol>\n<p>RAM</p>\n<p>报文缓存 —— 缓存区</p>\n<p>hold queues——</p>\n<p>路由器的启动过程（考试要求）</p>\n<p>阻止发送路由更新</p>\n<p>手动配置</p>\n<p>Why do we need split horizon? Because distance vector protocols, such as Routing Information Protocol (RIP), are susceptible to routing loops, which occur when a data <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudGVjaHRhcmdldC5jb20vc2VhcmNobmV0d29ya2luZy9kZWZpbml0aW9uL3BhY2tldA==\">packet</span> is caught in an endless circle and continuously routed through the same <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudGVjaHRhcmdldC5jb20vc2VhcmNobmV0d29ya2luZy9kZWZpbml0aW9uL3JvdXRlcg==\">routers</span>. To avoid these loops, the protocols often rely on split horizon. Other types of protocols, such as <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudGVjaHRhcmdldC5jb20vc2VhcmNobmV0d29ya2luZy9kZWZpbml0aW9uL09TUEYtT3Blbi1TaG9ydGVzdC1QYXRoLUZpcnN0\">Open Shortest Path First</span>, use different mechanisms to deter packet looping.</p>\n<p>When enabled, split horizon prevents a router from advertising a route back to the router from which it learned a route. In other words, if a router receives routing information from another router, the first router will not broadcast that information back to the second router, thus preventing routing loops from occurring.</p>\n<p>RIP</p>\n<p>SPF</p>\n<p>DR BDR</p>\n<p>A 类地址 0 1-126</p>\n<p>B 类地址 10 128-191</p>\n<p>C 类地址 110 128+64=192 192-223</p>\n",
            "tags": [
                "NJUSE",
                "互联网计算",
                "计网"
            ]
        },
        {
            "id": "https://quas-modo.github.io/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture06-%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82/",
            "url": "https://quas-modo.github.io/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture06-%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82/",
            "title": "Lecture06-会话、表示、应用层",
            "date_published": "2023-02-08T09:52:36.000Z",
            "content_html": "<h1 id=\"lecture6-会话层-展示层应用层\"><a class=\"anchor\" href=\"#lecture6-会话层-展示层应用层\">#</a> Lecture6 - 会话层、展示层应用层</h1>\n<h1 id=\"会话层\"><a class=\"anchor\" href=\"#会话层\">#</a> 会话层</h1>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_03.jpg\" alt=\"第6讲：会话、表示、应用层_页面_03\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_04.jpg\" alt=\"第6讲：会话、表示、应用层_页面_04\" /></p>\n<ol>\n<li>双向同步通讯？\n<ol>\n<li>全双工通信</li>\n<li>半双工通信</li>\n<li>单工通信</li>\n</ol>\n</li>\n<li>双向交替控制？\n<ol>\n<li>会话连接、活动开始、数据校验 (同步)</li>\n<li>令牌转换等</li>\n</ol>\n</li>\n<li>是否同步了您的会话的主题？</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_05.jpg\" alt=\"第6讲：会话、表示、应用层_页面_05\" /></p>\n<p>** 同步点 (CheckPoint)** 用于分隔会话的各个部分，以前称为对话 (dialogues)</p>\n<ol>\n<li>同步点：发送一定数据后设置同步点</li>\n<li>次同步点：作为同步点的一个子集，进行数据校验</li>\n<li>主同步点：按照主同步点进行校验确认</li>\n<li>如果错误，恢复到上次都已经同步的主同步点</li>\n</ol>\n<p>对话分离 (Seperation) 是通信的有序启动，终止和管理</p>\n<p>尽量保证了通话的效率和可靠性</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_06.jpg\" alt=\"第6讲：会话、表示、应用层_页面_06\" /></p>\n<h1 id=\"展示层\"><a class=\"anchor\" href=\"#展示层\">#</a> 展示层</h1>\n<h2 id=\"概述\"><a class=\"anchor\" href=\"#概述\">#</a> 概述</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_08.jpg\" alt=\"第6讲：会话、表示、应用层_页面_08\" /></p>\n<p>表示层负责以接收<strong>设备可以理解</strong>的形式表示数据。</p>\n<ol>\n<li>传送语法协商</li>\n<li>接受语法协商</li>\n</ol>\n<p>表示层具有 3 个主要功能：</p>\n<ol>\n<li>数据格式 (format)</li>\n<li>数据压缩 (compression): 早期网络比较慢，倾向于先压缩在发送</li>\n<li>数据加密 (encryption)</li>\n</ol>\n<h2 id=\"数据格式\"><a class=\"anchor\" href=\"#数据格式\">#</a> 数据格式</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_09.jpg\" alt=\"第6讲：会话、表示、应用层_页面_09\" /></p>\n<ol>\n<li>想象两个不同 (dissimilar) 的系统。\n<ol>\n<li>一种使用扩展二进制编码的十进制交换码 (EBCDIC,Extended Binary Coded Decimal Interchange Code) 格式化文本</li>\n<li>另一种使用 ** 美国信息交换标准码 (ASCII)** 格式化文本</li>\n<li>选择大家都能识别的编码形式传输，保证大家都能理解</li>\n</ol>\n</li>\n<li>第 6 层提供了这两种不同类型的代码之间的转换</li>\n</ol>\n<h3 id=\"图形文件格式\"><a class=\"anchor\" href=\"#图形文件格式\">#</a> 图形文件格式</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_10.jpg\" alt=\"第6讲：会话、表示、应用层_页面_10\" /></p>\n<ol>\n<li>互联网通常使用两种二进制文件格式来显示图像：\n<ol>\n<li>图形交换格式 (GIF，Graphic Interchange Format)</li>\n<li>联合图像专家组 (JPEG，Joint Photographic Experts Group)。</li>\n</ol>\n</li>\n<li>任何具有读取器的 GIF 和 JPEG 文件格式的计算机都可以读取这些文件类型，而与计算机的类型无关。</li>\n</ol>\n<h3 id=\"多媒体文件格式\"><a class=\"anchor\" href=\"#多媒体文件格式\">#</a> 多媒体文件格式</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_11.jpg\" alt=\"第6讲：会话、表示、应用层_页面_11\" /></p>\n<p>多媒体文件格式是另一种二进制文件，它存储声音，音乐和视频。</p>\n<ol>\n<li>这些文件可以完全下载，然后播放，也可以在播放时下载。</li>\n<li>后一种方法称为流音频。</li>\n</ol>\n<h2 id=\"数据加密和压缩\"><a class=\"anchor\" href=\"#数据加密和压缩\">#</a> 数据加密和压缩</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_12.jpg\" alt=\"第6讲：会话、表示、应用层_页面_12\" /></p>\n<ol>\n<li>第 6 层负责数据加密：数据加密可在信息传输过程中保护信息。</li>\n<li>表示层还负责文件的压缩。</li>\n</ol>\n<h1 id=\"应用层\"><a class=\"anchor\" href=\"#应用层\">#</a> 应用层</h1>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_14.jpg\" alt=\"第6讲：会话、表示、应用层_页面_14\" /></p>\n<p>第七层对应的是应用界面</p>\n<h2 id=\"应用层概述\"><a class=\"anchor\" href=\"#应用层概述\">#</a> 应用层概述</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_15.jpg\" alt=\"第6讲：会话、表示、应用层_页面_15\" /></p>\n<p>应用层（最接近用户）支持一个应用的交流模块</p>\n<p>应用层：</p>\n<ul>\n<li>确定并建立预期的通信合作伙伴的可用性</li>\n<li>同步合作的应用程序</li>\n<li>建立有关错误恢复程序的协议</li>\n<li>控制数据完整性</li>\n</ul>\n<h2 id=\"http-hypertext-transfrer-protocol超文本传输协议\"><a class=\"anchor\" href=\"#http-hypertext-transfrer-protocol超文本传输协议\">#</a> HTTP HyperText Transfrer Protocol 超文本传输协议</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_16.jpg\" alt=\"第6讲：会话、表示、应用层_页面_16\" /></p>\n<h3 id=\"url统一资源定位符\"><a class=\"anchor\" href=\"#url统一资源定位符\">#</a> URL 统一资源定位符</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_17.jpg\" alt=\"第6讲：会话、表示、应用层_页面_17\" /></p>\n<pre><code>&lt;URL的访问方式&gt;://&lt;主机&gt;:&lt;端口&gt;/&lt;路径&gt;\n</code></pre>\n<ol>\n<li>访问方式：协议 HTTPS 或者 HTTP</li>\n<li>主机：域名的方式</li>\n<li>端口对应进程</li>\n<li>路径对应具体的文件</li>\n</ol>\n<h2 id=\"http协议\"><a class=\"anchor\" href=\"#http协议\">#</a> HTTP 协议</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_18.jpg\" alt=\"第6讲：会话、表示、应用层_页面_18\" /></p>\n<p>无状态的</p>\n<h2 id=\"http报文结构\"><a class=\"anchor\" href=\"#http报文结构\">#</a> HTTP 报文结构</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_19.jpg\" alt=\"第6讲：会话、表示、应用层_页面_19\" /></p>\n<p>应答码：</p>\n<ol>\n<li>2xx: 成功</li>\n<li>3xx: 重定向</li>\n<li>4xx: 错误</li>\n<li>5xx: 服务器内部错误</li>\n</ol>\n<h3 id=\"http请求报文的一些方法\"><a class=\"anchor\" href=\"#http请求报文的一些方法\">#</a> HTTP 请求报文的一些方法</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_20.jpg\" alt=\"第6讲：会话、表示、应用层_页面_20\" /></p>\n<h3 id=\"html超文本标记语言\"><a class=\"anchor\" href=\"#html超文本标记语言\">#</a> html 超文本标记语言</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_21.jpg\" alt=\"第6讲：会话、表示、应用层_页面_21\" /></p>\n<h2 id=\"ftp-和-tftp\"><a class=\"anchor\" href=\"#ftp-和-tftp\">#</a> FTP 和 TFTP</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_22.jpg\" alt=\"第6讲：会话、表示、应用层_页面_22\" /></p>\n<p>FTP 是一种可靠的，<strong>面向连接</strong>的服务，它使用 TCP 传输文件。</p>\n<ol>\n<li>FTP 首先在客户端和服务器 (端口 21) 之间建立<strong>控制连接</strong></li>\n<li>然后，建立第二个连接，这是计算机之间通过其传输数据的链接。(端口 20)</li>\n</ol>\n<p>TFTP 是使用 UDP 的<strong>无连接</strong>服务 (简化的 FTP)</p>\n<ol>\n<li>体积小，易于实施。更加方便</li>\n<li>例如。 TFTP 在路由器上用于传输配置文件和 Cisco IOS 映像</li>\n<li>不支持交互，没有目录浏览功能</li>\n</ol>\n<p>互联网早期的时候，文件传输量是很大的。</p>\n<h3 id=\"主进程工作步骤\"><a class=\"anchor\" href=\"#主进程工作步骤\">#</a> 主进程工作步骤</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_23.jpg\" alt=\"第6讲：会话、表示、应用层_页面_23\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_24.jpg\" alt=\"第6讲：会话、表示、应用层_页面_24\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_25.jpg\" alt=\"第6讲：会话、表示、应用层_页面_25\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_26.jpg\" alt=\"第6讲：会话、表示、应用层_页面_26\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_27.jpg\" alt=\"第6讲：会话、表示、应用层_页面_27\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_28.jpg\" alt=\"第6讲：会话、表示、应用层_页面_28\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_29.jpg\" alt=\"第6讲：会话、表示、应用层_页面_29\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_30.jpg\" alt=\"第6讲：会话、表示、应用层_页面_30\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_31.jpg\" alt=\"第6讲：会话、表示、应用层_页面_31\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_32.jpg\" alt=\"第6讲：会话、表示、应用层_页面_32\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_33.jpg\" alt=\"第6讲：会话、表示、应用层_页面_33\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_34.jpg\" alt=\"第6讲：会话、表示、应用层_页面_34\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_35.jpg\" alt=\"第6讲：会话、表示、应用层_页面_35\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_36.jpg\" alt=\"第6讲：会话、表示、应用层_页面_36\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_37.jpg\" alt=\"第6讲：会话、表示、应用层_页面_37\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_38.jpg\" alt=\"第6讲：会话、表示、应用层_页面_38\" /></p>\n<h2 id=\"telnet\"><a class=\"anchor\" href=\"#telnet\">#</a> Telnet</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_39.jpg\" alt=\"第6讲：会话、表示、应用层_页面_39\" /></p>\n<p>Telnet 客户端软件提供了登录到运行 Telnet 服务器应用程序的远程 Internet 主机，然后从命令行执行命令的功能。</p>\n<h2 id=\"smtp-pop\"><a class=\"anchor\" href=\"#smtp-pop\">#</a> SMTP POP</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_40.jpg\" alt=\"第6讲：会话、表示、应用层_页面_40\" /></p>\n<p>电子邮件服务器使用 SMTP 发送和 POP 接收邮件相互通信。</p>\n<ol>\n<li>SMTP (Simple Mail Transfer Protocol) SMTP (简单邮件传输协议) 邮件发送，登录发送等操作</li>\n<li>POP3 (Post Office Protocol version 3) 邮件接收，邮件到达邮件服务端，由客户端和服务端联系接收邮件。</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_41.jpg\" alt=\"第6讲：会话、表示、应用层_页面_41\" /></p>\n<p>发送者先登录到服务器，通过服务器根据 SMTP 传输到对应的服务器，然后用户登录后通过 POP3 协议收邮件到本地</p>\n<h3 id=\"mime-multipurpose-internet-mail-extensions-因特网协议扩充\"><a class=\"anchor\" href=\"#mime-multipurpose-internet-mail-extensions-因特网协议扩充\">#</a> MIME Multipurpose Internet Mail Extensions 因特网协议扩充</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_42.jpg\" alt=\"第6讲：会话、表示、应用层_页面_42\" /></p>\n<p>将非 ASCII 码的文件转换成 ASCII 文件</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_43.jpg\" alt=\"第6讲：会话、表示、应用层_页面_43\" /></p>\n<h2 id=\"snmp-simple-network-management-protocol-简单网络管理协议\"><a class=\"anchor\" href=\"#snmp-simple-network-management-protocol-简单网络管理协议\">#</a> SNMP Simple Network Management Protocol 简单网络管理协议</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_44.jpg\" alt=\"第6讲：会话、表示、应用层_页面_44\" /></p>\n<p>一种促进管理信息交换的应用层协议</p>\n<p>网管，通过下发请求对上网的所有的主机关于流量等等信息进行管理 (监控)</p>\n<h2 id=\"dns-domain-name-system域名系统\"><a class=\"anchor\" href=\"#dns-domain-name-system域名系统\">#</a> DNS Domain Name System 域名系统</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_45.jpg\" alt=\"第6讲：会话、表示、应用层_页面_45\" /></p>\n<p>域名系统 (DNS) 是网络上的服务，该服务管理域名并响应客户端将域名转换为关联 IP 地址的请求。</p>\n<ol>\n<li>早期是用 IP 地址以及 Host 文件来进行访问</li>\n</ol>\n<h3 id=\"domain-name-域名\"><a class=\"anchor\" href=\"#domain-name-域名\">#</a> Domain Name 域名</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_46.jpg\" alt=\"第6讲：会话、表示、应用层_页面_46\" /></p>\n<h3 id=\"tld-top-level-domain-顶级域\"><a class=\"anchor\" href=\"#tld-top-level-domain-顶级域\">#</a> TLD Top Level Domain 顶级域</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_47.jpg\" alt=\"第6讲：会话、表示、应用层_页面_47\" /></p>\n<p>国家 TLD (nTLD)</p>\n<ol>\n<li>.cn (CHINA) 中国</li>\n<li>.us (United States) 美国</li>\n<li>.uk (United kingdom), etc. 英国等等</li>\n</ol>\n<p>通用 TLD (gTLD)，最早的域包括：</p>\n<ol>\n<li>.com Enterprises and companies 企业和公司</li>\n<li>.net Network services providers 网络服务提供者</li>\n<li>.org Nonprofit organizations 非盈利组织</li>\n<li>.edu Educational facilities 教育机构</li>\n<li>.gov Governments (only for U.S.A) 政府 (美国)</li>\n<li>.mil Military facilities (only for U.S.A) 军方 (美军)</li>\n<li>.int International organizations 国际组织</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_48.jpg\" alt=\"第6讲：会话、表示、应用层_页面_48\" /></p>\n<p>Infrastructure domain 基础设施领域</p>\n<ol>\n<li>Only one: arpa, for resolving domain names reversely 仅一个：arpa，用于反向解析域名</li>\n</ol>\n<p>Recently, new TLD domain added:</p>\n<ol>\n<li>.aero (航空运输企业)</li>\n<li>.biz (公司和企业)</li>\n<li>.cat (加泰隆人的语言和文化团体)</li>\n<li>.coop (合作团体)</li>\n<li>.info (各种资讯)</li>\n<li>.jobs (人力资源管理者)</li>\n<li>.mobi (移动产品与服务的用户和提供者)</li>\n<li>.museum (博物馆)</li>\n<li>.name   (个人)</li>\n<li>.pro (经过认证的专业人员)</li>\n<li>.travel  (旅游业)</li>\n</ol>\n<h3 id=\"域名服务器\"><a class=\"anchor\" href=\"#域名服务器\">#</a> 域名服务器</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_49.jpg\" alt=\"第6讲：会话、表示、应用层_页面_49\" /></p>\n<ul>\n<li>顶级域名底下的域名就是由顶级域名下面进行管理</li>\n<li>根域名服务器存储位置，所以子服务器知道根服务器的地址即可</li>\n</ul>\n<h3 id=\"结合域名服务器查找ip地址\"><a class=\"anchor\" href=\"#结合域名服务器查找ip地址\">#</a> 结合域名服务器查找 IP 地址</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_50.jpg\" alt=\"第6讲：会话、表示、应用层_页面_50\" /></p>\n<ol>\n<li>DNS 系统以层次 (hierarchy) 结构设置，该层次结构创建不同级别的 DNS 服务器。</li>\n<li>此级别的 DNS 服务器判断其自身是否能够将域名转换为关联的 IP 地址：\n<ol>\n<li>如果可以，则将结果返回给客户端</li>\n<li>如果没有，它将请求发送到更高级别。(向上级请求)</li>\n</ol>\n</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_51.jpg\" alt=\"第6讲：会话、表示、应用层_页面_51\" /></p>\n<ul>\n<li>请求分为两种:\n<ul>\n<li>能够应答</li>\n<li>不能够应答</li>\n</ul>\n</li>\n<li>递归地进行查找：具体过程在上图</li>\n<li>下面递归，上面迭代</li>\n</ul>\n<h3 id=\"应用层通讯方式\"><a class=\"anchor\" href=\"#应用层通讯方式\">#</a> 应用层：通讯方式</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6%E8%AE%B2%EF%BC%9A%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82_%E9%A1%B5%E9%9D%A2_52.jpg\" alt=\"第6讲：会话、表示、应用层_页面_52\" /></p>\n<ol>\n<li>通信处理发生的一种方式：(无上下文，请求后就断开)\n<ol>\n<li>当浏览器打开时，它将连接到默认页面，并且该页面的文件将传输到客户端。</li>\n<li>处理完成后，连接断开</li>\n</ol>\n</li>\n<li>第二种方式：(有上下文)\n<ol>\n<li>作为 Telnet 和 FTP，建立与服务器的连接并保持该连接，直到执行所有处理。</li>\n<li>当用户确定他 / 她已完成时，客户端将终止连接。</li>\n</ol>\n</li>\n<li>所有的交流活动都属于这两类之一。</li>\n</ol>\n<h2 id=\"dhcp-dynamic-host-configuration-protocol-动态主机配置协议\"><a class=\"anchor\" href=\"#dhcp-dynamic-host-configuration-protocol-动态主机配置协议\">#</a> DHCP Dynamic Host Configuration Protocol 动态主机配置协议</h2>\n<h2 id=\"dhcp工作原理\"><a class=\"anchor\" href=\"#dhcp工作原理\">#</a> DHCP 工作原理</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6.1%E8%AE%B2%EF%BC%9Adhcp_%E9%A1%B5%E9%9D%A2_03.jpg\" alt=\"第6.1讲：dhcp_页面_03\" /></p>\n<h3 id=\"dhcp过程\"><a class=\"anchor\" href=\"#dhcp过程\">#</a> DHCP 过程</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6.1%E8%AE%B2%EF%BC%9Adhcp_%E9%A1%B5%E9%9D%A2_04.jpg\" alt=\"第6.1讲：dhcp_页面_04\" /></p>\n<p>AB 是两个 Server</p>\n<p>Client 先 Discover 去搜索</p>\n<p>Server 返回一个 Offer 报文</p>\n<p>Client 选择优先返回的 Offer 来优先服务</p>\n<p>Client 进行广播，告知到底服务了谁</p>\n<p>然后 B 返回一个 Ack 报文</p>\n<p>到了时间之后，选择 release 或者续租</p>\n<h3 id=\"发现阶段\"><a class=\"anchor\" href=\"#发现阶段\">#</a> 发现阶段</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6.1%E8%AE%B2%EF%BC%9Adhcp_%E9%A1%B5%E9%9D%A2_05.jpg\" alt=\"第6.1讲：dhcp_页面_05\" /></p>\n<h3 id=\"响应阶段\"><a class=\"anchor\" href=\"#响应阶段\">#</a> 响应阶段</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6.1%E8%AE%B2%EF%BC%9Adhcp_%E9%A1%B5%E9%9D%A2_06.jpg\" alt=\"第6.1讲：dhcp_页面_06\" /></p>\n<h3 id=\"选择问题\"><a class=\"anchor\" href=\"#选择问题\">#</a> 选择问题</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6.1%E8%AE%B2%EF%BC%9Adhcp_%E9%A1%B5%E9%9D%A2_07.jpg\" alt=\"第6.1讲：dhcp_页面_07\" /></p>\n<h3 id=\"租约确认问题\"><a class=\"anchor\" href=\"#租约确认问题\">#</a> 租约确认问题</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6.1%E8%AE%B2%EF%BC%9Adhcp_%E9%A1%B5%E9%9D%A2_08.jpg\" alt=\"第6.1讲：dhcp_页面_08\" /></p>\n<h3 id=\"租期续约\"><a class=\"anchor\" href=\"#租期续约\">#</a> 租期续约</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6.1%E8%AE%B2%EF%BC%9Adhcp_%E9%A1%B5%E9%9D%A2_09.jpg\" alt=\"第6.1讲：dhcp_页面_09\" /></p>\n<h3 id=\"租期释放\"><a class=\"anchor\" href=\"#租期释放\">#</a> 租期释放</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6.1%E8%AE%B2%EF%BC%9Adhcp_%E9%A1%B5%E9%9D%A2_10.jpg\" alt=\"第6.1讲：dhcp_页面_10\" /></p>\n<h3 id=\"dhcp报文结构\"><a class=\"anchor\" href=\"#dhcp报文结构\">#</a> DHCP 报文结构</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6.1%E8%AE%B2%EF%BC%9Adhcp_%E9%A1%B5%E9%9D%A2_11.jpg\" alt=\"第6.1讲：dhcp_页面_11\" /></p>\n<ol>\n<li>op: 报文类型，1 请求，2 应答</li>\n<li>HTYPE: 硬件地址类型，1 表示 10M 以太网地址</li>\n<li>HLEN: 以太网地址长度，10M 为 6</li>\n<li>Hops: 是否使用代理服务器进行处理</li>\n</ol>\n<h3 id=\"报文类型\"><a class=\"anchor\" href=\"#报文类型\">#</a> 报文类型</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6.1%E8%AE%B2%EF%BC%9Adhcp_%E9%A1%B5%E9%9D%A2_12.jpg\" alt=\"第6.1讲：dhcp_页面_12\" /></p>\n<ol>\n<li>DHCP Discover：发现</li>\n<li>DHCP Offer：提供</li>\n<li>DHCP Request：告知决定</li>\n<li>DHCP ACK：租约确认</li>\n<li>DHCP NAK：租约不确认</li>\n<li>DHCP Release：释放租约</li>\n<li>DHCP Decline: 收到 Ack 后，Client 告诉服务器不接受</li>\n<li>DHCP Inform: 客户端向服务器端请求详细信息</li>\n</ol>\n<h2 id=\"dhcp-欺骗与防范\"><a class=\"anchor\" href=\"#dhcp-欺骗与防范\">#</a> DHCP 欺骗与防范</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6.1%E8%AE%B2%EF%BC%9Adhcp_%E9%A1%B5%E9%9D%A2_14.jpg\" alt=\"第6.1讲：dhcp_页面_14\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6.1%E8%AE%B2%EF%BC%9Adhcp_%E9%A1%B5%E9%9D%A2_15.jpg\" alt=\"第6.1讲：dhcp_页面_15\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6.1%E8%AE%B2%EF%BC%9Adhcp_%E9%A1%B5%E9%9D%A2_16.jpg\" alt=\"第6.1讲：dhcp_页面_16\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6.1%E8%AE%B2%EF%BC%9Adhcp_%E9%A1%B5%E9%9D%A2_17.jpg\" alt=\"第6.1讲：dhcp_页面_17\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC6.1%E8%AE%B2%EF%BC%9Adhcp_%E9%A1%B5%E9%9D%A2_18.jpg\" alt=\"第6.1讲：dhcp_页面_18\" /></p>\n<p>ARP ip-&gt;mac</p>\n<p>RARP mac-&gt;ip</p>\n",
            "tags": [
                "NJUSE",
                "互联网计算",
                "计网"
            ]
        },
        {
            "id": "https://quas-modo.github.io/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture05-%E4%BC%A0%E8%BE%93%E5%B1%82/",
            "url": "https://quas-modo.github.io/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture05-%E4%BC%A0%E8%BE%93%E5%B1%82/",
            "title": "Lecture05-传输层",
            "date_published": "2023-02-08T09:52:20.000Z",
            "content_html": "<h1 id=\"lecture05-第四层传输层\"><a class=\"anchor\" href=\"#lecture05-第四层传输层\">#</a> Lecture05 - 第四层传输层</h1>\n<p>第四层运输层主要是实现了主机之间的通信。数据通信是服务于主机上的<strong>进程</strong> (Session)。</p>\n<h2 id=\"第四层概述\"><a class=\"anchor\" href=\"#第四层概述\">#</a> 第四层概述</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_03.jpg\" alt=\"第5讲：传输层原理与技术_页面_03\" /></p>\n<ol>\n<li>\n<p>分割上层应用程序数据 (新的数据单元 - 数据段)</p>\n</li>\n<li>\n<p>建立端到端 (end to end) 的通讯</p>\n</li>\n<li>\n<p>从一个终端主机向另一个终端主机发送<strong>段 segment</strong></p>\n<p>(第三层和第二层不进行可靠性检验，第四层完成可靠性检验，接受方认为数据错误，在第四层进行要求重传)</p>\n</li>\n<li>\n<p>流量控制和可靠性</p>\n<ol>\n<li>可以比喻为与外国人交谈：通常，您会要求外国人重复他 / 她的话 (可靠性) 并慢声说话 (流量控制)</li>\n<li>双方主机的网络的处理能力不同，缓存能力不同</li>\n</ol>\n</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_04.jpg\" alt=\"第5讲：传输层原理与技术_页面_04\" /></p>\n<ol>\n<li>传输控制协议 (TCP, Transmission Control Protocol)</li>\n<li>用户数据报协议 (UDP, User Datagram Protocol)</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_05.jpg\" alt=\"第5讲：传输层原理与技术_页面_05\" /></p>\n<p>将传出邮件分成多个部分</p>\n<p>在目标站重新组合消息</p>\n<p>TCP: 可靠 (效率比较低，早期网络应用少，需要可靠性)</p>\n<ol>\n<li>面向连接</li>\n<li>软件检查段 segment</li>\n<li>重新发送丢失或错误的任何内容</li>\n<li>使用确认机制</li>\n<li>提供流量控制</li>\n</ol>\n<p>UDP: 不可靠</p>\n<ol>\n<li>无连接</li>\n<li>不提供段的软件检查</li>\n<li>不使用确认</li>\n<li>不进行流量控制</li>\n<li>直接丢弃错误的报文，而不进行其他操作。</li>\n</ol>\n<h3 id=\"服务模型\"><a class=\"anchor\" href=\"#服务模型\">#</a> 服务模型</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_06.jpg\" alt=\"第5讲：传输层原理与技术_页面_06\" /></p>\n<ol>\n<li>\n<p>TCP 和 UDP 都使用<strong>端口</strong>来跟踪 (track) 同时穿越网络的不同会话</p>\n</li>\n<li>\n<p>应用软件开发人员已同意使用 RFC1700 中定义的知名端口号</p>\n</li>\n<li>\n<p>低于 255 的端口号 (0-255) 保留给 TCP 和 UDP 公共应用程序使用。</p>\n<p>0-1023 是知名端口，有分发的规范，不应当被随意使用</p>\n<p>1024-49151 的端口号进行登记使用，有的是应用程序已经的使用端口号，避免冲突</p>\n</li>\n</ol>\n<h3 id=\"套接字\"><a class=\"anchor\" href=\"#套接字\">#</a> 套接字</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_07.jpg\" alt=\"第5讲：传输层原理与技术_页面_07\" /></p>\n<ol>\n<li>套接字表示为 (IP 地址，端口)</li>\n<li>每个连接都表示为 (socket  source ，socket  destination)，这是一个点对点全双工通道</li>\n<li><strong>TCP 不支持多播和广播</strong></li>\n</ol>\n<h2 id=\"tcp\"><a class=\"anchor\" href=\"#tcp\">#</a> TCP</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_09.jpg\" alt=\"第5讲：传输层原理与技术_页面_09\" /></p>\n<ol>\n<li>可靠传输</li>\n<li>流控制\n<ol>\n<li>滑动窗口 (窗口进行通信，一次数据传输是有上限发的，缓存问题，拥塞问题)</li>\n<li>避免拥塞</li>\n</ol>\n</li>\n<li>连接控制\n<ol>\n<li>建立连接 ——<strong> 三次</strong>握手</li>\n<li>断开连接 ——<strong> 四次</strong>握手</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"tcp数据段格式\"><a class=\"anchor\" href=\"#tcp数据段格式\">#</a> TCP 数据段格式</h3>\n<h4 id=\"源端口-目的端口\"><a class=\"anchor\" href=\"#源端口-目的端口\">#</a> 源端口 目的端口</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_10.jpg\" alt=\"第5讲：传输层原理与技术_页面_10\" /></p>\n<p>socket</p>\n<h4 id=\"序号\"><a class=\"anchor\" href=\"#序号\">#</a> 序号</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_11.jpg\" alt=\"第5讲：传输层原理与技术_页面_11\" /></p>\n<p>我们从小向大进行使用，如果使用到最大之后，我们会从小再次重新开始分配。</p>\n<h4 id=\"确认号\"><a class=\"anchor\" href=\"#确认号\">#</a> 确认号</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_12.jpg\" alt=\"第5讲：传输层原理与技术_页面_12\" /></p>\n<p>发数据的同时，对对方上一次的传输做确认</p>\n<h4 id=\"数据偏移\"><a class=\"anchor\" href=\"#数据偏移\">#</a> 数据偏移</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_13.jpg\" alt=\"第5讲：传输层原理与技术_页面_13\" /></p>\n<h4 id=\"保留\"><a class=\"anchor\" href=\"#保留\">#</a> 保留</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_14.jpg\" alt=\"第5讲：传输层原理与技术_页面_14\" /></p>\n<h4 id=\"标记位urg\"><a class=\"anchor\" href=\"#标记位urg\">#</a> 标记位 ——URG</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_15.jpg\" alt=\"第5讲：传输层原理与技术_页面_15\" /></p>\n<p>比如说按 Ctrl+C 终止程序的信息可能会将 URG 置为 1</p>\n<h4 id=\"标记位ack\"><a class=\"anchor\" href=\"#标记位ack\">#</a> 标记位 ——ACK</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_16.jpg\" alt=\"第5讲：传输层原理与技术_页面_16\" /></p>\n<h4 id=\"标记位psh\"><a class=\"anchor\" href=\"#标记位psh\">#</a> 标记位 ——PSH</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_17.jpg\" alt=\"第5讲：传输层原理与技术_页面_17\" /></p>\n<p>根据网络条件调整，正常情况下缓存满了才会传输</p>\n<h4 id=\"标记位rst\"><a class=\"anchor\" href=\"#标记位rst\">#</a> 标记位 ——RST</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_18.jpg\" alt=\"第5讲：传输层原理与技术_页面_18\" /></p>\n<p>连接失败</p>\n<h4 id=\"标记位syn\"><a class=\"anchor\" href=\"#标记位syn\">#</a> 标记位 ——SYN</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_19.jpg\" alt=\"第5讲：传输层原理与技术_页面_19\" /></p>\n<h4 id=\"标记位fin\"><a class=\"anchor\" href=\"#标记位fin\">#</a> 标记位 ——FIN</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_20.jpg\" alt=\"第5讲：传输层原理与技术_页面_20\" /></p>\n<h4 id=\"窗口\"><a class=\"anchor\" href=\"#窗口\">#</a> 窗口</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_21.jpg\" alt=\"第5讲：传输层原理与技术_页面_21\" /></p>\n<h4 id=\"检验和\"><a class=\"anchor\" href=\"#检验和\">#</a> 检验和</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_22.jpg\" alt=\"第5讲：传输层原理与技术_页面_22\" /></p>\n<h4 id=\"紧急指针\"><a class=\"anchor\" href=\"#紧急指针\">#</a> 紧急指针</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_23.jpg\" alt=\"第5讲：传输层原理与技术_页面_23\" /></p>\n<h4 id=\"可选部分\"><a class=\"anchor\" href=\"#可选部分\">#</a> 可选部分</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_24.jpg\" alt=\"第5讲：传输层原理与技术_页面_24\" /></p>\n<p>MSS Maximum Segment Size 最大报文段长度</p>\n<h4 id=\"填充\"><a class=\"anchor\" href=\"#填充\">#</a> 填充</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_25.jpg\" alt=\"第5讲：传输层原理与技术_页面_25\" /></p>\n<h3 id=\"tcp协议\"><a class=\"anchor\" href=\"#tcp协议\">#</a> TCP 协议</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_26.jpg\" alt=\"第5讲：传输层原理与技术_页面_26\" /></p>\n<p>主机使用网段 (TPDU) 交换数据</p>\n<p>每个段都有：</p>\n<ol>\n<li>首部为 20 个字节 (可选部分除外)</li>\n<li>0 或更多数据字节 (请求连接的时候)</li>\n</ol>\n<p>段的大小必须与 IP 数据包匹配，并且还必须满足底层的需求</p>\n<ol>\n<li>例如，以太网的 MTU (最大传输单位) 为 1500 字节</li>\n<li>是面向字节的传输。</li>\n</ol>\n<p>每个字节都有一个 32 位序号</p>\n<h3 id=\"可靠连接两军问题\"><a class=\"anchor\" href=\"#可靠连接两军问题\">#</a> 可靠连接 —— 两军问题</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_27.jpg\" alt=\"第5讲：传输层原理与技术_页面_27\" /></p>\n<p>蓝军必须一起攻打才能打败白军</p>\n<p>蓝军信息可能被白军篡改或者阻碍</p>\n<p>结论：无论通信多少次，都不能有一个完全可信的消息（进入死循环）</p>\n<h3 id=\"建立连接\"><a class=\"anchor\" href=\"#建立连接\">#</a> 建立连接</h3>\n<h4 id=\"第一次握手\"><a class=\"anchor\" href=\"#第一次握手\">#</a> 第一次握手</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_28.jpg\" alt=\"第5讲：传输层原理与技术_页面_28\" /></p>\n<ol>\n<li>服务器：执行 LISTEN 和 ACCEPT 原语，并进行被动监视</li>\n<li>客户端：执行 CONNECT 原语，生成 SYN = 1 和 ACK = 0 的 TCP 段，代表连接请求</li>\n</ol>\n<h4 id=\"第二次握手\"><a class=\"anchor\" href=\"#第二次握手\">#</a> 第二次握手</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_29.jpg\" alt=\"第5讲：传输层原理与技术_页面_29\" /></p>\n<p>服务器检查是否存在监视端口的服务进程</p>\n<ol>\n<li>如果没有任何进程，请使用 RST = 1 回答一个 TCP 段</li>\n<li>如果存在进程，则决定拒绝或接受请求</li>\n<li>如果接受连接请求，则发送 SYN = 1 和 ACK = 1 的网段</li>\n</ol>\n<h4 id=\"第三次握手\"><a class=\"anchor\" href=\"#第三次握手\">#</a> 第三次握手</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_30.jpg\" alt=\"第5讲：传输层原理与技术_页面_30\" /></p>\n<p>客户端发送一个 SYN = 0 和 ACK = 1 的段以确认连接</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_31.jpg\" alt=\"第5讲：传输层原理与技术_页面_31\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_32.jpg\" alt=\"第5讲：传输层原理与技术_页面_32\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_33.jpg\" alt=\"第5讲：传输层原理与技术_页面_33\" /></p>\n<h3 id=\"传输控制\"><a class=\"anchor\" href=\"#传输控制\">#</a> 传输控制</h3>\n<p>数据传输 —— 停止等待协议</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_34.jpg\" alt=\"第5讲：传输层原理与技术_页面_34\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_35.jpg\" alt=\"第5讲：传输层原理与技术_页面_35\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_36.jpg\" alt=\"第5讲：传输层原理与技术_页面_36\" /></p>\n<h3 id=\"可靠通信arq\"><a class=\"anchor\" href=\"#可靠通信arq\">#</a> 可靠通信 ARQ</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_37.jpg\" alt=\"第5讲：传输层原理与技术_页面_37\" /></p>\n<p>ARQ (Automatic Repeat reQuest) 自动重传请求：这表示 &quot;重新发送请求&quot; 为自动发送并且接收方无需请求发送方重新发送错误段</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_38.jpg\" alt=\"第5讲：传输层原理与技术_页面_38\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_39.jpg\" alt=\"第5讲：传输层原理与技术_页面_39\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_40.jpg\" alt=\"第5讲：传输层原理与技术_页面_40\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_41.jpg\" alt=\"第5讲：传输层原理与技术_页面_41\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_42.jpg\" alt=\"第5讲：传输层原理与技术_页面_42\" /></p>\n<h3 id=\"tcp-释放连接\"><a class=\"anchor\" href=\"#tcp-释放连接\">#</a> TCP 释放连接</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_43.jpg\" alt=\"第5讲：传输层原理与技术_页面_43\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_44.jpg\" alt=\"第5讲：传输层原理与技术_页面_44\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_45.jpg\" alt=\"第5讲：传输层原理与技术_页面_45\" /></p>\n<p>server 持续发完数据</p>\n<p>FIN = 1，表示数据处理完成</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_46.jpg\" alt=\"第5讲：传输层原理与技术_页面_46\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_47.jpg\" alt=\"第5讲：传输层原理与技术_页面_47\" /></p>\n<h3 id=\"为什么必须等待2msl\"><a class=\"anchor\" href=\"#为什么必须等待2msl\">#</a> 为什么必须等待 2MSL</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_48.jpg\" alt=\"第5讲：传输层原理与技术_页面_48\" /></p>\n<ol>\n<li>\n<p>为了确保 A 发送的最后一个 ACK 可以到达 B</p>\n</li>\n<li>\n<p>防止出现任何无效的连接请求段</p>\n<p>等待 2 MSL 之后，我们可以确保连接上的所有段均已消失</p>\n</li>\n</ol>\n<h3 id=\"tcp中的计时器\"><a class=\"anchor\" href=\"#tcp中的计时器\">#</a> Tcp 中的计时器</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_49.jpg\" alt=\"第5讲：传输层原理与技术_页面_49\" /></p>\n<ol>\n<li>\n<p>重传计时器：多长时间进行重传</p>\n</li>\n<li>\n<p>坚持计时器：避免死锁 (WIN = 0 的时候修改 WIN 但是没有办法发送过去)：收到 WIN = 0 的时候，开始进行计时，到时间主动询问</p>\n</li>\n<li>\n<p>保持计时器:</p>\n<ol>\n<li>发送数据段后，刷新</li>\n<li>如果到达一定的时间，则再次询问是不是还要保持连接。</li>\n<li>长期没有数据，和对方协商是否可以终止</li>\n</ol>\n</li>\n<li>\n<p>时间等待计时器</p>\n</li>\n</ol>\n<h3 id=\"tcp的有限状态机\"><a class=\"anchor\" href=\"#tcp的有限状态机\">#</a> TCP 的有限状态机</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_50.jpg\" alt=\"第5讲：传输层原理与技术_页面_50\" /></p>\n<ol>\n<li>粗线：正常的服务器端</li>\n<li>虚线：正常客户端</li>\n<li>细线：异常状态的问题</li>\n</ol>\n<h2 id=\"udp\"><a class=\"anchor\" href=\"#udp\">#</a> UDP</h2>\n<h3 id=\"概述\"><a class=\"anchor\" href=\"#概述\">#</a> 概述</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_52.jpg\" alt=\"第5讲：传输层原理与技术_页面_52\" /></p>\n<p>为什么我们需要 UDP？</p>\n<ol>\n<li>没有建立连接 (避免延时)</li>\n<li>简单：发送方，接收方无连接状态</li>\n<li>小段 header</li>\n<li>没有拥塞控制：UDP 可以按照期望的速度传输</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_53.jpg\" alt=\"第5讲：传输层原理与技术_页面_53\" /></p>\n<p>无连接：没有复杂控制，头部简单</p>\n<ol>\n<li>UDP 发送方，接收方之间没有握手 (HandShake，包含进程等信息的)</li>\n<li>每个 UDP 段都独立处理</li>\n</ol>\n<p>常用于流媒体 (Stream) 多媒体 (multimedia) 应用</p>\n<ol>\n<li>容忍损失：无非就是降低帧率</li>\n<li>这类应用是<strong>速率敏感</strong>的应用，而不一定是质量敏感的应用。</li>\n</ol>\n<p>UDP 用于：</p>\n<ol>\n<li>RIP: 定期发送路由信息 (periodically)</li>\n<li>DNS: 避免延迟建立 TCP 连接 (DNS 需要快速找到)</li>\n<li>SNMP:SNMP：拥塞时 (congestion)，SNMP 必须仍然可运行。在没有拥塞和可靠性控制机制的情况下，UDP 在这种情况下的性能要优于 TCP。(主播和多播，大量信息传输)</li>\n<li>其他协议包括 TFTP，DHCP</li>\n</ol>\n<h3 id=\"udp帧结构\"><a class=\"anchor\" href=\"#udp帧结构\">#</a> UDP 帧结构</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_54.jpg\" alt=\"第5讲：传输层原理与技术_页面_54\" /></p>\n<ol>\n<li>UDP 的数据段很简单</li>\n<li>UDP 只有 8 个字节的首部</li>\n<li>源端口、目的端口、长度、校验 (data)、Data</li>\n<li>校验也要对 data 一并校验，如果出现错误，直接丢弃。</li>\n<li>应用层进行数据切片，决定如何进行发送，UDP 直接发送</li>\n</ol>\n<h2 id=\"应用nat和pat\"><a class=\"anchor\" href=\"#应用nat和pat\">#</a> 应用：NAT 和 PAT</h2>\n<h3 id=\"什么是nat\"><a class=\"anchor\" href=\"#什么是nat\">#</a> 什么是 NAT？</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_56.jpg\" alt=\"第5讲：传输层原理与技术_页面_56\" /></p>\n<ol>\n<li>NAT，是在 IP 数据包头中将一个地址交换为另一个地址的过程\n<ol>\n<li>网络地址转换</li>\n<li>是网络地址即将用完的解决方案</li>\n</ol>\n</li>\n<li>实际上，NAT 用于允许私下寻址的主机访问 Internet。</li>\n<li>IP 地址耗尽的解决方案之一\n<ol>\n<li>保留注册 (合法) 地址</li>\n<li>连接到 Internet 时增加灵活性</li>\n</ol>\n</li>\n<li>RFC 1631 - Network Address Translator (NAT)</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_57.jpg\" alt=\"第5讲：传输层原理与技术_页面_57\" /></p>\n<h3 id=\"nat类型\"><a class=\"anchor\" href=\"#nat类型\">#</a> NAT 类型</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_58.jpg\" alt=\"第5讲：传输层原理与技术_页面_58\" /></p>\n<h3 id=\"nat地址类型\"><a class=\"anchor\" href=\"#nat地址类型\">#</a> NAT 地址类型</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_59.jpg\" alt=\"第5讲：传输层原理与技术_页面_59\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_60.jpg\" alt=\"第5讲：传输层原理与技术_页面_60\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_61.jpg\" alt=\"第5讲：传输层原理与技术_页面_61\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_62.jpg\" alt=\"第5讲：传输层原理与技术_页面_62\" /></p>\n<h3 id=\"nat优缺点\"><a class=\"anchor\" href=\"#nat优缺点\">#</a> NAT 优缺点</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC5%E8%AE%B2%EF%BC%9A%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_63.jpg\" alt=\"第5讲：传输层原理与技术_页面_63\" /></p>\n<ol>\n<li>优点：由于并非每个内部主机都需要同时进行外部访问，因此您可以使用少量的全局唯一地址池来服务相对大量的私有寻址主机。</li>\n<li>缺点：一一映射，并没有从根本上解决地址短缺的问题。</li>\n<li>也就是说，如果专用地址空间为 / 8，但公用地址为 / 24，则一次只能有 254 个主机可以访问 Internet，主要内网不是同时有很多主机上网，就可以如上操作，进一步降低地址压力 (类似并行和穿行的区别)</li>\n</ol>\n<p>TCP 不支持多播和广播</p>\n<p>**</p>\n",
            "tags": [
                "NJUSE",
                "互联网计算",
                "计网"
            ]
        },
        {
            "id": "https://quas-modo.github.io/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture04-%E7%BD%91%E7%BB%9C%E5%B1%82/",
            "url": "https://quas-modo.github.io/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture04-%E7%BD%91%E7%BB%9C%E5%B1%82/",
            "title": "Lecture04-网络层",
            "date_published": "2023-02-08T09:52:09.000Z",
            "content_html": "<h1 id=\"lecture04-网络层\"><a class=\"anchor\" href=\"#lecture04-网络层\">#</a> Lecture04 - 网络层</h1>\n<h2 id=\"网络层概述\"><a class=\"anchor\" href=\"#网络层概述\">#</a> 网络层概述</h2>\n<h3 id=\"网络层职责\"><a class=\"anchor\" href=\"#网络层职责\">#</a> 网络层职责</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_003.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_003\" /></p>\n<ol>\n<li>通过网络移动数据：不同网段之间的通信，不同的广播域，两个广播域之间的进行了划分，互不干扰</li>\n<li>使用分层寻址方案 (与 MAC 寻址相反，后者没有层次)</li>\n<li>细分网络并控制流量</li>\n<li>减少交通拥堵，基于 IP 做分段和传达，用来减少拥塞</li>\n<li>与其他网络通讯</li>\n</ol>\n<h3 id=\"网络层设备\"><a class=\"anchor\" href=\"#网络层设备\">#</a> 网络层设备</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_004.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_004\" /></p>\n<ol>\n<li>路由器\n<ol>\n<li>互连网段或网络 (不同网段的分割)</li>\n<li>根据 IP 地址做出合理的决定</li>\n<li>确定最佳路径，根据路由表。</li>\n<li>将数据包从入站端口切换到出站端口</li>\n</ol>\n</li>\n<li>如果 A 网段的设备向路由器发送了一个 B 网段的广播地址，那么路由器会进行转发，然而如果 A 网段设备发送的是本网段的广播地址，路由器则不会进行转发。(广播域划分)</li>\n</ol>\n<h2 id=\"ip地址和子网划分\"><a class=\"anchor\" href=\"#ip地址和子网划分\">#</a> IP 地址和子网划分</h2>\n<h3 id=\"第三层数据报格式\"><a class=\"anchor\" href=\"#第三层数据报格式\">#</a> 第三层数据报格式</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_006.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_006\" /></p>\n<h3 id=\"报文详解\"><a class=\"anchor\" href=\"#报文详解\">#</a> 报文详解</h3>\n<h4 id=\"首部\"><a class=\"anchor\" href=\"#首部\">#</a> 首部</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_007.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_007\" /></p>\n<h4 id=\"首部部分\"><a class=\"anchor\" href=\"#首部部分\">#</a> 首部部分</h4>\n<p>上面蓝框部分的整体是首部部分，包括固定部分和可变部分</p>\n<h4 id=\"版本号\"><a class=\"anchor\" href=\"#版本号\">#</a> 版本号</h4>\n<p>占 4 bit，指 IP 协议的版本。</p>\n<p>目前的 IP 协议版本号为 4 (即 IPv4)(6 也就对应 IPv6)</p>\n<h4 id=\"首部长度\"><a class=\"anchor\" href=\"#首部长度\">#</a> 首部长度</h4>\n<p>占 4 bit，可表示的最大数值是 15 个单位 (一个单位为 4 字节) 因此 IP 的首部长度的最大值是 60 字节。</p>\n<p>一行是 5 个字节，固定部分有 20 个字节，可变部分最多有 40 个字节。</p>\n<h4 id=\"服务类型\"><a class=\"anchor\" href=\"#服务类型\">#</a> 服务类型</h4>\n<p>占 8bit，用来获得更好的服务，这个字段以前一直没有被人们使用。</p>\n<h4 id=\"总长度\"><a class=\"anchor\" href=\"#总长度\">#</a> 总长度</h4>\n<p>占 16 bit，指<strong>首部和数据</strong>之和的长度，单位为字节，因此数据报的最大长度为 65535 字节 (由于放到帧里面，所以大多数不比 1500 字节长)。总长度必须不超过最大传送单元 MTU。</p>\n<h4 id=\"标识\"><a class=\"anchor\" href=\"#标识\">#</a> 标识</h4>\n<p>标识 (identification)：占 16 bit，它是一个计数器，用来产生数据报的标识。</p>\n<p>解决<strong>报文分片</strong>的问题。相同的标识可以合并成一个大报文。</p>\n<h4 id=\"标志\"><a class=\"anchor\" href=\"#标志\">#</a> 标志</h4>\n<p>标志占 3 bit，最高位为 0</p>\n<ol>\n<li>让发送方对报文进行控制，让中间路由器对其进行控制</li>\n<li>DF (Don’t fragment)：是否允许做分片，0 允许做分片，1 不允许做分片</li>\n<li>MF (More Fragment)：MF 为 0 表示最后一个分片，1 是指后面还有分片</li>\n</ol>\n<h4 id=\"片偏移\"><a class=\"anchor\" href=\"#片偏移\">#</a> 片偏移</h4>\n<p>片偏移 (13 bit) 指出：较长的分组在分片后某片在原分组中的相对位置。片偏移以<strong> 8 个字节</strong>为偏移单位。</p>\n<ol>\n<li>相同标识号，然后根据片偏移进行重排</li>\n<li>因为 16-3 = 13，2^3 = 8 (因为单位是字节，所以用 13 位就可以补齐)</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230102115026718.png\" alt=\"image-20230102115026718\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_017.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_017\" /></p>\n<h4 id=\"生存时间\"><a class=\"anchor\" href=\"#生存时间\">#</a> 生存时间</h4>\n<p>生存时间 (8 bit) 记为 TTL (Time To Live) 数据报在网络中可通过的<strong>路由器数</strong>的最大值。</p>\n<p>是通过计数的方式来进行统计，最大值是<strong> 255</strong> (最多经过 255 个路由器)，路由器每转发一次，就会对生存时间 - 1，减小为 0 后，就会丢弃掉，并且通知给发送方我已经丢弃掉这个报文。</p>\n<p>防止在环上进行传输，避免由于回路问题，造成过大的网络资源浪费</p>\n<h4 id=\"协议\"><a class=\"anchor\" href=\"#协议\">#</a> 协议</h4>\n<p>协议 (8 bit) 字段指出此数据报携带的数据使用何种协议以便目的主机的 IP 层将数据部分上交给哪个处理过程</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_020.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_020\" /></p>\n<p>有的协议是上层的，有的协议是第三层协议，具体协议的情况如上</p>\n<h4 id=\"首部检验和\"><a class=\"anchor\" href=\"#首部检验和\">#</a> 首部检验和</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_022.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_022\" /></p>\n<p>首部检验和 (16 bit) 字段：只检验数据报的首部，不包括数据部分。这里不采用 CRC 检验码而采用简单的计算方法。</p>\n<p>一般不用，一是只检验首部，不检验数据；二是消耗性能</p>\n<h4 id=\"源地址和目的地址\"><a class=\"anchor\" href=\"#源地址和目的地址\">#</a> 源地址和目的地址</h4>\n<p>各占 4 个字节</p>\n<h3 id=\"网络层地址\"><a class=\"anchor\" href=\"#网络层地址\">#</a> 网络层地址</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_024.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_024\" /></p>\n<ol>\n<li>\n<p>IP 地址为 32 位长 (Ipv4 中)</p>\n</li>\n<li>\n<p>它们以点分十进制格式表示为四个八位字节：133.14.17.0</p>\n</li>\n<li>\n<p>IP 地址包含两个组成部分：</p>\n<ul>\n<li>\n<p>网络 ID</p>\n</li>\n<li>\n<p>主机 ID</p>\n</li>\n</ul>\n</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_025.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_025\" /></p>\n<h4 id=\"网络地址用来标识网段\"><a class=\"anchor\" href=\"#网络地址用来标识网段\">#</a> 网络地址：用来标识网段</h4>\n<p>一个网络中，共享一个网络地址</p>\n<ol>\n<li>原来由 ARIN (美国互联网号码注册机构，<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5hcmluLm5ldA==\">www.arin.net</span>) 分配，现在已经更换</li>\n<li>标识设备所连接 (attached) 的网络</li>\n<li>可以由前三个八位位组 (octets) 中的一个，两个或三个来标识</li>\n</ol>\n<h4 id=\"主机idip地址后面占据1-3个字节\"><a class=\"anchor\" href=\"#主机idip地址后面占据1-3个字节\">#</a> 主机 ID：IP 地址后面占据 1-3 个字节</h4>\n<ol>\n<li>由网络管理员分配</li>\n<li>识别该网络上的特定设备</li>\n<li>可以由最后三个八位位组中的一个，两个或三个来标识</li>\n</ol>\n<h3 id=\"ip地址\"><a class=\"anchor\" href=\"#ip地址\">#</a> IP 地址</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_026.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_026\" /></p>\n<p>不同的类地址为地址的网络部分和主机部分保留不同数量的位</p>\n<h4 id=\"分类\"><a class=\"anchor\" href=\"#分类\">#</a> 分类</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_027.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_027\" /></p>\n<p><strong>A 类第一位必为 0，B 开头为 10，C 为 110</strong></p>\n<p>根据第一个地址的数值确定是哪类地址</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_028.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_028\" /></p>\n<ol>\n<li>\n<p>每个类别的最大主机数量各不相同。(不包含网络号)</p>\n<ul>\n<li>\n<p>A 类拥有 16,777,214 个可用主机 (2<sup>24</sup> – 2)</p>\n</li>\n<li>\n<p>Class B has 65,534 available hosts (2<sup>16</sup> – 2) B 类具有 65,534 个可用主机 (2<sup>16</sup> – 2)</p>\n</li>\n<li>\n<p>Class C has 254 available hosts (2<sup>8</sup> – 2) C 类具有 254 个可用主机 (2<sup>8</sup> –2)</p>\n</li>\n</ul>\n</li>\n<li>\n<p>为什么每一类地址中都要减去 2？</p>\n<ul>\n<li>\n<p>每个网络中的第一个地址都保留用于该网络地址</p>\n</li>\n<li>\n<p>最后一个地址是为广播地址保留的。</p>\n</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"保留地址\"><a class=\"anchor\" href=\"#保留地址\">#</a> 保留地址</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_029.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_029\" /></p>\n<p>网络地址：在地址的主机部分中以二进制 0 结尾的 IP 地址</p>\n<ol>\n<li>A 类网络地址示例：113.0.0.0</li>\n<li>网络上的主机只有具有相同网络 ID 的其他主机才能直接通信。(用来确定是不是在一个网段里面)</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_030.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_030\" /></p>\n<p>广播地址：用于将数据发送到网络上的所有设备。(一般是一个网段之间的)</p>\n<ol>\n<li>广播 IP 地址在地址的主机部分中以二进制 1 结尾。</li>\n<li>B 类地址的广播地址的示例：176.10.255.255 (decimal 255 = binary 11111111)</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_031.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_031\" /></p>\n<p>例子</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_032.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_032\" /></p>\n<p>用于局域网内部使用</p>\n<p>IP 地址耗尽（IP address delpetion）</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230102123731364.png\" alt=\"image-20230102123731364\" /></p>\n<h3 id=\"子网划分\"><a class=\"anchor\" href=\"#子网划分\">#</a> 子网划分</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_033.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_033\" /></p>\n<p>网络管理员有时需要将网络划分为较小的网络，称为<strong>子网</strong>，以提供<strong>额外的灵活性</strong>.</p>\n<p>从主机字段借来的位被指定为子网字段 (Subnet Fields)</p>\n<h4 id=\"子网的基本概念\"><a class=\"anchor\" href=\"#子网的基本概念\">#</a> 子网的基本概念</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_034.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_034\" /></p>\n<ol>\n<li>子网是网络的较小部分\n<ul>\n<li>提供寻址灵活性</li>\n</ul>\n</li>\n<li>子网地址通常由网络管理员在本地分配</li>\n<li>子网减少了广播域：使得广播域变小，提高网络利用率，避免接受到大量的无用的广播，广播只能在对应子网中进行广播。</li>\n</ol>\n<h4 id=\"我们可以借多少位\"><a class=\"anchor\" href=\"#我们可以借多少位\">#</a> 我们可以借多少位？</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_035.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_035\" /></p>\n<p>最少借 2 位</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_036.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_036\" /></p>\n<ol>\n<li>\n<p>借用的最小位数是 2，为什么？</p>\n<p>I 如果只借用 1 位以创建一个子网，那么您将只有一个网络号 -.0 网络 - 和广播号 -.1 网络，没有可以使用的专用网络。</p>\n<p>两位的时候，01 和 10 给 Host，00 给网络 ID，11 位广播地址</p>\n</li>\n<li>\n<p>可以借用的最大位数可以是保留至少 2 位主机号的任何数字 (给 Host 至少保留 2 位，因为 1 位的话，要么一个是 NET 无法使用，要么一个是广播地址)</p>\n</li>\n</ol>\n<h4 id=\"副作用浪费地址\"><a class=\"anchor\" href=\"#副作用浪费地址\">#</a> 副作用：浪费地址</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_037.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_037\" /></p>\n<p>我们必须在所需的子网数，每个子网可接受的主机以及地址的浪费之间取得平衡 (strike a balance)。</p>\n<h4 id=\"子网掩码\"><a class=\"anchor\" href=\"#子网掩码\">#</a> 子网掩码</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_038.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_038\" /></p>\n<p>别名：扩展网络前缀</p>\n<p>定义我们用来构建网络的位数，以及描述主机地址的位数</p>\n<h4 id=\"计算一个子网\"><a class=\"anchor\" href=\"#计算一个子网\">#</a> 计算一个子网</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_039.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_039\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_040.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_040\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_041.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_041\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_042.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_042\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_043.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_043\" /><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_044.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_044\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_045.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_045\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_046.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_046\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_047.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_047\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_048.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_048\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_049.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_049\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_050.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_050\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_051.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_051\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_052.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_052\" /></p>\n<p>路由器需要做一个与运算，交换机不用</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_053.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_053\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_054.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_054\" /></p>\n<h2 id=\"第三层设备路由器\"><a class=\"anchor\" href=\"#第三层设备路由器\">#</a> 第三层设备 —— 路由器</h2>\n<h3 id=\"路径选择\"><a class=\"anchor\" href=\"#路径选择\">#</a> 路径选择</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_056.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_056\" /></p>\n<p>路由器选择下一路径，根据带宽、跳数、延迟等</p>\n<h3 id=\"ip地址-2\"><a class=\"anchor\" href=\"#ip地址-2\">#</a> IP 地址</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_057.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_057\" /></p>\n<ol>\n<li>IP 地址是用软件实现的，是指设备所在的网络。</li>\n<li>路由器连接网络，每个网络必须具有<strong>唯一的网络号</strong>才能成功进行寻找路径。</li>\n<li>唯一的网络号包含在分配 (incorporated) 给该网络上每个设备的 IP 地址中</li>\n<li>IP 地址是逻辑的，是我们配置的。(不同于 MAC 地址)</li>\n<li>IP 地址是有层次，做转发的依据是网段而不是具体的 IP，同一网段设备都有相同的 IP 地址，也就是我们只要到达网段即可</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_058.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_058\" /></p>\n<p>路由器每个端口需要配一个地址，和所连接的网段是同一个信息的</p>\n<h3 id=\"路由器转发实例\"><a class=\"anchor\" href=\"#路由器转发实例\">#</a> 路由器转发实例</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_059.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_059\" /></p>\n<p>A5 发到 B5</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_060.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_060\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_061.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_061\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_062.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_062\" /></p>\n<p>查询路由表</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_063.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_063\" /></p>\n<p>形成一个新的帧，MAC 地址是 B1 的</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_064.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_064\" /></p>\n<ol>\n<li>\n<p>接口是路由器连接到网络的附加装置，在 IP 路由中也可以称为端口。这个 IP 地址往往被作为这个网络的网关</p>\n</li>\n<li>\n<p>每个接口必须具有一个单独的唯一网络地址。</p>\n<p>比如上图中 S1 和 S2 不能是相同的 IP 地址，否则会发生歧义，S0 不知道转发给谁，路由器的连接的网段一定要是不同的</p>\n</li>\n</ol>\n<h3 id=\"ip地址分配\"><a class=\"anchor\" href=\"#ip地址分配\">#</a> IP 地址分配</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_065.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_065\" /></p>\n<ol>\n<li>\n<p>静态地址分配 (Static addressing)</p>\n<ol>\n<li>为每个单独的设备配置一个 IP 地址</li>\n<li>您应该保留非常细致的记录，因为如果使用重复的 IP 地址，可能会出现问题。</li>\n</ol>\n</li>\n<li>\n<p>动态地址分配 (Dynamic addressing)</p>\n<p>有几种不同的方法可用于动态分配 IP 地址：</p>\n<ul>\n<li>RARP: Reverse Address Resolution Protocol. RARP：反向地址解析协议。发起请求</li>\n<li>BOOTP: BOOTstrap Protocol. BOOTP：BOOTstrap 协议。用于工作栈</li>\n<li>DHCP: Dynamic Host Configuration Protocol. (<strong>比较多用</strong>) DHCP：动态主机配置协议</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"arp-协议\"><a class=\"anchor\" href=\"#arp-协议\">#</a> ARP 协议</h2>\n<p>Address Resolution Protocol 地址解析协议</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_067.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_067\" /></p>\n<ol>\n<li>为了使设备进行通信，发送设备需要目标设备的<strong> IP 地址和 MAC 地址</strong>。</li>\n<li>ARP 使计算机能够查找与 IP 地址关联的计算机的 MAC 地址。</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_068.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_068\" /></p>\n<ol>\n<li>目的方 IP 地址 -&gt; 目的方 MAC 地址</li>\n<li>需要知道对方的 MAC 地址，来形成数据地址。</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_069.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_069\" /></p>\n<p>ARP Table</p>\n<p>ARP 缓存</p>\n<h3 id=\"arp操作mac地址解析\"><a class=\"anchor\" href=\"#arp操作mac地址解析\">#</a> ARP 操作，MAC 地址解析</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_070.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_070\" /></p>\n<p>此时目的地 MAC 地址不知道</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_071.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_071\" /></p>\n<p>向目的地地址请求，发出广播</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_072.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_072\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_073.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_073\" /></p>\n<p>C 回应</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_074.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_074\" /></p>\n<p>写入 ARP 缓存，发送正常的帧</p>\n<h3 id=\"目的地本地\"><a class=\"anchor\" href=\"#目的地本地\">#</a> 目的地本地</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_075.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_075\" /></p>\n<h3 id=\"网络交流\"><a class=\"anchor\" href=\"#网络交流\">#</a> 网络交流</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_076.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_076\" /></p>\n<h4 id=\"默认网关\"><a class=\"anchor\" href=\"#默认网关\">#</a> 默认网关</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_077.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_077\" /></p>\n<ol>\n<li>为了使设备与另一网络上的另一设备通信，您必须为其<strong>提供默认网关</strong>。</li>\n<li><strong>默认网关是路由器上连接到源主机所在网段的接口的 IP 地址。</strong></li>\n<li>为了使设备将数据发送到另一个网段上的设备的地址，源设备将数据<strong>发送到默认网关</strong>。</li>\n</ol>\n<h4 id=\"代理\"><a class=\"anchor\" href=\"#代理\">#</a> 代理</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_078.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_078\" /></p>\n<p>无法设置默认网关的情况</p>\n<ol>\n<li>代理 ARP 是 ARP 的一种变体 (variation)。</li>\n<li>如果源主机未配置默认网关。</li>\n</ol>\n<h3 id=\"目的地址不是本地\"><a class=\"anchor\" href=\"#目的地址不是本地\">#</a> 目的地址不是本地</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_079.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_079\" /></p>\n<p>路由器把自己的 MAC 地址给 Host Y</p>\n<h3 id=\"arp流程图\"><a class=\"anchor\" href=\"#arp流程图\">#</a> ARP 流程图</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_080.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_080\" /></p>\n<h2 id=\"网络层服务\"><a class=\"anchor\" href=\"#网络层服务\">#</a> 网络层服务</h2>\n<h3 id=\"面向连接的网络服务\"><a class=\"anchor\" href=\"#面向连接的网络服务\">#</a> 面向连接的网络服务</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_082.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_082\" /></p>\n<ol>\n<li>\n<p>面向连接的网络服务 —— 在数据传输之前，在传输方和接收方之间建立连接</p>\n<ul>\n<li>\n<p>就是任何发送数据的行为之前，先要建立好连接，协商好参数才会开始传输，所有数据进行有序传输</p>\n</li>\n<li>\n<p>网络情况导致数据出现问题，需要接受方进行一定处理来保证数据正确</p>\n</li>\n</ul>\n</li>\n<li>\n<p>传输过程中要保持连接距离，只有完成传输后才能断开连接。</p>\n</li>\n<li>\n<p>传输比较可靠，代价高。</p>\n</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_083.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_083\" /></p>\n<ol>\n<li>\n<p>（虚）电路交换 vs 面向连接的网络服务</p>\n<p>但是，两个名词并不一样。</p>\n</li>\n<li>\n<p>面向连接：在数据传输之前，与接收方建立一个连接</p>\n</li>\n<li>\n<p>所有 packet（报文）在同一条道路上依次传输，更普遍的，是在同一条虚电路上</p>\n</li>\n</ol>\n<p>虚电路要强于面向连接的，传输更加可靠，保证<strong>传输先后关系</strong>。</p>\n<h3 id=\"无连接的网络服务\"><a class=\"anchor\" href=\"#无连接的网络服务\">#</a> 无连接的网络服务</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_084.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_084\" /></p>\n<p>他们分别对待每个数据包。</p>\n<p>IP 是<strong>无连接系统</strong>。</p>\n<h3 id=\"报文交换\"><a class=\"anchor\" href=\"#报文交换\">#</a> 报文交换</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_085.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_085\" /></p>\n<ol>\n<li>无连接网络与数据包交换：这两个词都不一样</li>\n<li>当数据包从源传递到目标时，它们可以：\n<ol>\n<li>切换到其他路径。(每一报文有各自的发送方和接收方，可以根据当前的网络情况，进行路由选择)</li>\n<li>乱序到达。</li>\n</ol>\n</li>\n<li>设备根据<strong>各种标准</strong>为每个数据包<strong>进行路径选择</strong>。不同的报文可能有不同的标准。</li>\n</ol>\n<p>大部分的 Connetionless network 都是基于 packet switched 进行实现，控制网络拥塞。</p>\n<h2 id=\"路由协议\"><a class=\"anchor\" href=\"#路由协议\">#</a> 路由协议</h2>\n<h3 id=\"网络协议操作\"><a class=\"anchor\" href=\"#网络协议操作\">#</a> 网络协议操作</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_087.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_087\" /></p>\n<p>ABC 之间都是通过帧进行计算的，直到第三层。</p>\n<h3 id=\"被动路由协议\"><a class=\"anchor\" href=\"#被动路由协议\">#</a> 被动路由协议</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_088.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_088\" /></p>\n<ol>\n<li>为网络层提供支持的协议称为路由协议或可路由协议。</li>\n<li>IP 是网络层协议，因此，它可以通过互联网络进行路由。</li>\n</ol>\n<h3 id=\"不可路由协议\"><a class=\"anchor\" href=\"#不可路由协议\">#</a> 不可路由协议</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_089.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_089\" /></p>\n<ol>\n<li>\n<p>不可路由协议是不支持第 3 层的协议。</p>\n</li>\n<li>\n<p>这些不可路由协议中最常见的是 NetBEUI。</p>\n<ul>\n<li>\n<p>直接根据目的方的地址在局域网中进行生成定位</p>\n</li>\n<li>\n<p>这个协议不支持第三层，也就是跨局域网是不可以的。</p>\n</li>\n</ul>\n</li>\n<li>\n<p>NetBEUI 是一种小型，快速且高效的协议，仅限于在一个网段上运行</p>\n</li>\n</ol>\n<h3 id=\"可路由协议的寻址\"><a class=\"anchor\" href=\"#可路由协议的寻址\">#</a> 可路由协议的寻址</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_090.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_090\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_091.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_091\" /></p>\n<h3 id=\"分类1静态vs动态\"><a class=\"anchor\" href=\"#分类1静态vs动态\">#</a> 分类 1：静态 vs 动态</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_092.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_092\" /></p>\n<ol>\n<li>\n<p>静态路由：网络管理员在路由器中手动输入路由信息。</p>\n</li>\n<li>\n<p>动态路由</p>\n<ul>\n<li>\n<p>路由器可以在运行过程中互相学习信息。</p>\n</li>\n<li>\n<p>使用路由协议更新路由信息。</p>\n</li>\n<li>\n<p>RIP, IGRP, EIGRP, OSPF …</p>\n</li>\n</ul>\n</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_093.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_093\" /></p>\n<ol>\n<li>\n<p>静态路由</p>\n<ol>\n<li>\n<p>用于<strong>隐藏</strong>部分网络。</p>\n<p>安全 (不必进行路由表的交换)</p>\n</li>\n<li>\n<p>测试网络中的特定链接。</p>\n</li>\n<li>\n<p>在到达目标网络的路径只有一条通路时，维护路由表。</p>\n</li>\n</ol>\n</li>\n<li>\n<p>动态路由</p>\n<ol>\n<li>维护路由表。</li>\n<li>以路由更新的形式及时分发信息。</li>\n<li>依靠路由协议共享知识。</li>\n<li>路由器可以调整以适应不断变化的网络状况。</li>\n<li>打开后会启动<strong>进程</strong>，按照不同的协议，和网上的不同设备学习信息，然后根据<strong>算法</strong>生成路由表</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"主动路由协议\"><a class=\"anchor\" href=\"#主动路由协议\">#</a> 主动路由协议</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_094.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_094\" /></p>\n<h3 id=\"被动路由协议和主动路由协议\"><a class=\"anchor\" href=\"#被动路由协议和主动路由协议\">#</a> 被动路由协议和主动路由协议</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_095.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_095\" /></p>\n<ol>\n<li>Routed Portocol 用于路由器之间，用来保证路由器之间连通 (完成转发)。</li>\n<li>Routing Protocol 用于做各自的路由表的生成：路由器彼此交换信息。</li>\n<li>Routing Protocol 决定 Routed Protocals</li>\n</ol>\n<h3 id=\"分类2igp-vs-egp\"><a class=\"anchor\" href=\"#分类2igp-vs-egp\">#</a> 分类 2：IGP VS EGP</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_096.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_096\" /></p>\n<ol>\n<li>\n<p>动态路由</p>\n</li>\n<li>\n<p>内部网关协议 Interior Gateway  Protocols</p>\n<p>RIP，IGRP，EIGRP，OSPF</p>\n<p>可在自治系统 (autonomous  system，大的单位或者管理方) 中使用，该系统是一个主管部门下的路由器网络，例如公司 (corporate) 网络，学区的网络或政府机构的网络。</p>\n</li>\n<li>\n<p>外部网关协议 Exterior Gateway Protocols</p>\n<p>EGP，BGP</p>\n<p>用于在自治系统之间路由数据包。</p>\n</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_097.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_097\" /></p>\n<p>自治系统是<strong>逻辑</strong>的划分，而未必是物理层次的划分。</p>\n<h3 id=\"分类3igp分为两类dvp-vs-lsp\"><a class=\"anchor\" href=\"#分类3igp分为两类dvp-vs-lsp\">#</a> 分类 3：IGP 分为两类：DVP VS LSP</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_098.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_098\" /></p>\n<p><strong>DVP</strong></p>\n<p>距离矢量协议 Distance-Vector Protocols</p>\n<p>RIP, IGRP</p>\n<ol>\n<li>从<strong>邻居</strong>的角度查看网络拓扑。(注意不基于全局)</li>\n<li>在路由器之间添加距离向量。(根据跳数来决定，经过一个路由器 + 1 一次)</li>\n<li>经常定期 (periodic) 更新。（<strong>定时</strong>）</li>\n<li>将路由表的<strong>副本</strong>传递到邻居路由器。</li>\n</ol>\n<p><strong>LVP</strong></p>\n<p>链路状态协议 Link State Protocols</p>\n<p>OSPF</p>\n<ol>\n<li>获取<strong>全局</strong>网络拓扑的通用视图。</li>\n<li>计算到其他路由器的<strong>最短路径</strong>。(基于带宽计算出来的 cost，形成 cost 拓扑图，然后计算出对应的路径代价作为评判依据)</li>\n<li><strong>事件</strong>触发的更新。</li>\n<li>将链接状态路由更新传递给其他路由器</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_099.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_099\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_100.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_100\" /></p>\n<p>Link State</p>\n<p>用 SPF 算法</p>\n<h3 id=\"rip路由信息协议dvp\"><a class=\"anchor\" href=\"#rip路由信息协议dvp\">#</a> RIP 路由信息协议（DVP）</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_101.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_101\" /></p>\n<ol>\n<li>很受欢迎</li>\n<li>内部网关协议</li>\n<li>距离矢量协议</li>\n<li>基于跳数</li>\n<li>最远可达跳数 15</li>\n<li>每 30 秒更新</li>\n<li>不选择最快路径（选择跳数最短的路径）</li>\n<li>产生很多网络流量（network traffic)</li>\n<li>v2 是 v1 的一个进阶版本</li>\n</ol>\n<h3 id=\"igrp-vs-eigrpdvp\"><a class=\"anchor\" href=\"#igrp-vs-eigrpdvp\">#</a> IGRP vs EIGRP(DVP)</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_102.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_102\" /></p>\n<ol>\n<li>思科知识产权的。</li>\n<li>内部网关协议。</li>\n<li>距离矢量协议</li>\n<li>指标由 ** 带宽 (bandwidth)，负载 (load)，延迟 (delay) 和可靠性 (reliability)** 组成。加权进行运算。</li>\n<li>IGRP 最大跳数为 255。</li>\n<li>每 90 秒更新一次。</li>\n<li>EIGRP 是 IGRP 的高级版本，它是<strong>混合</strong>路由协议 (不全是根据跳数来计算)。</li>\n</ol>\n<p>比 RIP 性能好很多</p>\n<h3 id=\"ospflvp\"><a class=\"anchor\" href=\"#ospflvp\">#</a> OSPF（LVP）</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_103.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_103\" /></p>\n<ol>\n<li>最短路径优先协议</li>\n<li>内部网关协议</li>\n<li>链路状态协议，消耗内存和 CPU</li>\n<li>指标由带宽，速度，流量，可靠性和安全性组成，本科阶段只考虑带宽的。</li>\n<li>事件触发的更新。</li>\n<li>最快和什么有关？(最快指的是带宽)\n<ol>\n<li>和实时各条链路上的通信冗余有关，也和管理方案有关，简单来说是和带宽有关</li>\n<li>带宽表示为代价，带宽和代价成<strong>反比</strong>。</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"vlsmvariable-length-subnet-mask-可变长度子网掩码\"><a class=\"anchor\" href=\"#vlsmvariable-length-subnet-mask-可变长度子网掩码\">#</a> VLSM (Variable Length Subnet Mask) 可变长度子网掩码</h2>\n<h3 id=\"经典路由和可变长度子网掩码\"><a class=\"anchor\" href=\"#经典路由和可变长度子网掩码\">#</a> 经典路由和可变长度子网掩码</h3>\n<p><img data-src=\"C:/docu/%E5%A4%A7%E4%BA%8C%E4%B8%8A/cxy/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/%E8%AF%BE%E7%A8%8BPPT/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_105.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_105\" /></p>\n<ul>\n<li>\n<p>有类路由</p>\n<p>有类的路由协议要求单个网络使用相同的子网掩码。</p>\n<p>例如：网络 192.168.187.0 必须仅使用一个子网掩码，例如 255.255.255.0。</p>\n</li>\n<li>\n<p>可变长度子网掩码</p>\n<p>VLSM 只是一个特征，它允许单个自治系统的网络具有不同的子网掩码。</p>\n<p>可有效解决网络号浪费的问题</p>\n</li>\n</ul>\n<p><img data-src=\"C:/docu/%E5%A4%A7%E4%BA%8C%E4%B8%8A/cxy/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/%E8%AF%BE%E7%A8%8BPPT/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_106.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_106\" /></p>\n<ol>\n<li>使用 VLSM，网络管理员可以在主机少的网络上使用长掩码，而在主机多的子网上使用短掩码。(提供了很高的灵活性)</li>\n<li>如果路由协议允许 VLSM\n<ol>\n<li>在路由网络连接上使用 30 位子网掩码 255.255.255.252（两个路由器相连）</li>\n<li>用户网络的 24 位掩码 255.255.255.0</li>\n<li>或者，对于最多 1000 个用户的网络，甚至是 22 位掩码 255.255.252.0。(保留 10 位)</li>\n</ol>\n</li>\n<li>在 CIDR 的基础上发展的，报文中包含有子网掩码。</li>\n</ol>\n<h3 id=\"为什么使用vlsm\"><a class=\"anchor\" href=\"#为什么使用vlsm\">#</a> 为什么使用 VLSM</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_107.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_107\" /></p>\n<ol>\n<li>VLSM 允许组织在同一网络地址空间内使用多个子网掩码。</li>\n<li>实施 VLSM 通常被称为 &quot;子网划分&quot;，可用于最大化寻址效率。</li>\n<li>VLSM 是有助于缩小 IPv4 和 IPv6 之间差距的修改 (modifications) 之一。</li>\n</ol>\n<h3 id=\"vlsm的优缺点\"><a class=\"anchor\" href=\"#vlsm的优缺点\">#</a> VLSM 的优缺点</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_108.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_108\" /></p>\n<ol>\n<li>高效使用 IP 地址</li>\n<li>更好的路由聚合 (aggregation): 构建超网</li>\n</ol>\n<p>很多协议都支持 VLSM 协议，只有 RIP v1 不支持</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_109.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_109\" /></p>\n<p>会导致地址空间的浪费：广播地址和网络号都无法被使用。</p>\n<ol>\n<li>过去，建议不要使用第一个和最后一个子网。但是我们可以使用 Cisco IOS ver12.0 中的子网 0。</li>\n<li>从 IOS ver12.0 起，Cisco 路由器默认使用零子网。</li>\n<li>如果想要禁止零子网，使用该指令: <code>router(config)#no ip subnet-zero()</code></li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_110.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_110\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_111.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_111\" /></p>\n<p>路由器之间不需要那么多地址，可以进行优化</p>\n<h3 id=\"例子\"><a class=\"anchor\" href=\"#例子\">#</a> 例子</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_112.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_112\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_113.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_113\" /></p>\n<p>为了计算 VLSM 子网，各个主机首先从地址范围分配最大的需求。需求级别应从<strong>最大到最小</strong>列出。</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_114.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_114\" /></p>\n<p>Octet 八位字节</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_115.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_115\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_116.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_116\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_117.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_117\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_118.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_118\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_119.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_119\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_120.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_120\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_121.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_121\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_122.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_122\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_123.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_123\" /></p>\n<p>没被用过的子网才能进一步划分</p>\n<h3 id=\"路由聚集\"><a class=\"anchor\" href=\"#路由聚集\">#</a> 路由聚集</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_124.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_124\" /></p>\n<p>Classless InterDomain Routing (CIDR) 无类域间路由</p>\n<p>将 3 个 / 24 的子网合并成一个 / 16 的网络</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_125.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_125\" /></p>\n<p>多层聚集</p>\n<h4 id=\"如何计算路由聚集\"><a class=\"anchor\" href=\"#如何计算路由聚集\">#</a> 如何计算路由聚集</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_126.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_126\" /></p>\n<p>提取尽可能多的相同的位作为 net 位，其他作为 host 位</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_127.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_127\" /></p>\n<ul>\n<li>\n<p>减少路由表条目的数量。</p>\n</li>\n<li>\n<p>可用于隔离拓扑更改</p>\n</li>\n</ul>\n<h2 id=\"icmp\"><a class=\"anchor\" href=\"#icmp\">#</a> ICMP</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_129.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_129\" /></p>\n<p>Internet Control Message Protocol 因特网控制报文协议</p>\n<h3 id=\"icmp报文格式\"><a class=\"anchor\" href=\"#icmp报文格式\">#</a> ICMP 报文格式</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_130.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_130\" /></p>\n<h3 id=\"两种icmp报文\"><a class=\"anchor\" href=\"#两种icmp报文\">#</a> 两种 ICMP 报文</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_131.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_131\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_132.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_132\" /></p>\n<h3 id=\"icmp差错报告报文的数据字段的内容\"><a class=\"anchor\" href=\"#icmp差错报告报文的数据字段的内容\">#</a> ICMP 差错报告报文的数据字段的内容</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_133.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_133\" /></p>\n<h3 id=\"不应发送icmp差错报告报文的几种情况\"><a class=\"anchor\" href=\"#不应发送icmp差错报告报文的几种情况\">#</a> 不应发送 ICMP 差错报告报文的几种情况</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_134.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_134\" /></p>\n<h3 id=\"ping\"><a class=\"anchor\" href=\"#ping\">#</a> PING</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_135.jpg\" alt=\"第4讲：网络层原理与技术20200416_页面_135\" /></p>\n<p>PING Packet InterNet Groper</p>\n<h2 id=\"一些其他\"><a class=\"anchor\" href=\"#一些其他\">#</a> 一些其他</h2>\n<p>基于 IP 地址，而不是 MAC 地址。</p>\n<p>【IP 地址和 MAC 地址的区别】IP 地址是一个框架，有逻辑和层次。MAC 地址较为平坦（谁生产的商品）</p>\n<p>G 0/0/0 模块 板子 接口</p>\n<p>s 0/1/0 模块 板子 接口</p>\n<p>802.3</p>\n<p>The maximum size of the L-PDU for a 10Mbps network is 1500 bytes. Because 8 bytes are used within the L-PDU for the LLC header, this means that the maximum size of the data field is <strong>1492 bytes</strong>.</p>\n<p>802.11</p>\n<p>The frame body of the 802.11 packet can range from 0-<strong>2312 bytes</strong>.</p>\n<p>Routed protocol</p>\n<p>被动路由协议</p>\n<p>基于路由表</p>\n<p>Non-routable protobal</p>\n<p>不基于路由表</p>\n<p>多播地址</p>\n<p>D 类地址，开头为 1110</p>\n<p>多播地址范围为 224.0.0.0～239.255.255.255</p>\n",
            "tags": [
                "NJUSE",
                "互联网计算",
                "计网"
            ]
        },
        {
            "id": "https://quas-modo.github.io/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture03-%E9%93%BE%E8%B7%AF%E5%B1%82/",
            "url": "https://quas-modo.github.io/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture03-%E9%93%BE%E8%B7%AF%E5%B1%82/",
            "title": "Lecture03-链路层",
            "date_published": "2023-02-08T09:51:59.000Z",
            "content_html": "<h1 id=\"链路层\"><a class=\"anchor\" href=\"#链路层\">#</a> 链路层</h1>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_02.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_02\" /></p>\n<h2 id=\"数据链路层概述\"><a class=\"anchor\" href=\"#数据链路层概述\">#</a> 数据链路层概述</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_03.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_03\" /></p>\n<p>数据链路层 data link layer 提供了：</p>\n<ul>\n<li>访问网络媒体</li>\n<li>跨媒体的物理传输</li>\n</ul>\n<p>第二层协议 procedure =  protocol 定义了：</p>\n<ul>\n<li>数据传输格式</li>\n<li>节点行为规范</li>\n</ul>\n<h3 id=\"局域网和数据链路层\"><a class=\"anchor\" href=\"#局域网和数据链路层\">#</a> 局域网和数据链路层</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_04.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_04\" /></p>\n<p>主要工作</p>\n<ul>\n<li>错误识别 (notification)</li>\n<li>网络拓扑 (Network topology)</li>\n<li>流控制 (Flow control)</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>第一层</th>\n<th>第二层</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>无法与上层通信</td>\n<td>通过 LLC 与上层通信</td>\n</tr>\n<tr>\n<td>无法确定哪台主机将会传输或接受二进制数据</td>\n<td>通过 MAC 确定</td>\n</tr>\n<tr>\n<td>无法命名或标识主机</td>\n<td>通过寻址或命名过程来实现</td>\n</tr>\n<tr>\n<td>仅仅能描述比特流</td>\n<td>通过帧来组织 / 分组比特</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"提供的服务\"><a class=\"anchor\" href=\"#提供的服务\">#</a> 提供的服务</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_05.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_05\" /></p>\n<ol>\n<li>\n<p>(最弱，最不靠谱的) 没有确认 (acknowledgement) 的无连接 (Connectionless) 服务</p>\n<p>发送取出就行，不用等收到确认</p>\n<p>一般用于：</p>\n<ul>\n<li>可靠 (Reliable) 的链接 (上层以确保数据正确性)</li>\n<li>实时任务，比较高效</li>\n<li>适用于<strong>大多数局域网</strong>（局域网比较可靠，一般为本地链接）</li>\n</ul>\n</li>\n<li>\n<p>带有确认的无连接服务：</p>\n<p>不可靠的链接，例如无线网络：需要保证一定的通信质量 (比如无线网络的传输)，同时会损失一定的性能。</p>\n</li>\n<li>\n<p>带有确认的连接服务</p>\n<ul>\n<li>比如蓝牙：需要先确定绑定关系才能进行通信</li>\n<li>手机和手机之间的蓝牙连接需要确定一些信息</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"建立在mac上的常见局域网\"><a class=\"anchor\" href=\"#建立在mac上的常见局域网\">#</a> 建立在 MAC 上的常见局域网</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_06.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_06\" /></p>\n<ol>\n<li>\n<p>以太网 (Ethernet)</p>\n<p>逻辑上，总线拓扑 (信息流在线性总线上)</p>\n<p>物理上，星形或扩展星形</p>\n</li>\n<li>\n<p>令牌环 (Token Ring)</p>\n<p>逻辑上，环拓扑 (信息流在一个环中)</p>\n<p>物理上，星形拓扑</p>\n</li>\n<li>\n<p>FDDI (光纤分布式数据接口)</p>\n<p>光纤作为传输介质，后被以太网取代</p>\n<p>逻辑上，环拓扑 (信息流在一个环中)</p>\n<p>物理上，双环拓扑</p>\n</li>\n</ol>\n<h3 id=\"mac访问方法\"><a class=\"anchor\" href=\"#mac访问方法\">#</a> MAC 访问方法</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_07.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_07\" /></p>\n<p>确定性轮流 Deterministic</p>\n<p>​\t轮流式的 taking turns</p>\n<p>​\tToken Ring and FDDI (Fiber Distributed Data Interface，光纤分布式数据接口)</p>\n<p>​\t类似军棋，需要拿到令牌才能出棋</p>\n<p>争用式 Non-deterministic (probabilistic)</p>\n<p>​\t非确定性、概率性 —— 先到先得 first come, first sesrved</p>\n<p>​\tEthernet/802.3</p>\n<h4 id=\"确定式mac协议\"><a class=\"anchor\" href=\"#确定式mac协议\">#</a> 确定式 MAC 协议</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_08.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_08\" /></p>\n<ol>\n<li>特殊数据令牌在环中循环 (circulates)。</li>\n<li>当主机收到令牌时，它可以传输数据而不是令牌。这称为夺取 (seizing) 令牌。</li>\n<li>当发送的帧返回到发送器时，站点将发送新令牌，帧从环上去除或脱落 (stripped)。</li>\n</ol>\n<h4 id=\"非确定性mac协议\"><a class=\"anchor\" href=\"#非确定性mac协议\">#</a> 非确定性 MAC 协议</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_09.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_09\" /></p>\n<ol>\n<li>\n<p>此 MAC 协议称为<strong>带冲突检测的载波侦听多路访问 (CSMA/CD，Carrier Sense Multiple Access with Collision Detection)</strong></p>\n</li>\n<li>\n<p>为了使用这种共享介质技术，以太网允许网络设备为传输权进行仲裁 (arbitrate)。</p>\n</li>\n<li>\n<p>以太网是一种局域网，是<strong>无确认的无连接服务</strong>。</p>\n<p><strong>CSMA/CD Carrier Sense Multiple Access with Collision Detection 带冲突检测的载波侦听多路访问</strong><br />\n载波侦听，确保正确。</p>\n</li>\n</ol>\n<h3 id=\"局域网传输方法\"><a class=\"anchor\" href=\"#局域网传输方法\">#</a> 局域网传输方法</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_10.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_10\" /></p>\n<ul>\n<li>\n<p>单播</p>\n<p>将单个数据包从源发送到网络上的单个目标</p>\n</li>\n<li>\n<p>多播</p>\n<p>由发送到网络上特定节点子集的单个数据包组成</p>\n<p>这些节点都有同样的进程进行响应</p>\n</li>\n<li>\n<p>广播</p>\n<p>由单个数据包组成，该数据包传输到网络上的所有节点。</p>\n<p>广播的目的地址是 0x11111111</p>\n</li>\n</ul>\n<h2 id=\"以太网和csmacd\"><a class=\"anchor\" href=\"#以太网和csmacd\">#</a> 以太网和 CSMA/CD</h2>\n<h3 id=\"局域网标准\"><a class=\"anchor\" href=\"#局域网标准\">#</a> 局域网标准</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_12.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_12\" /></p>\n<ol>\n<li>定义物理层介质和接入设备</li>\n<li>在数据链路层定义设备的通信方式</li>\n<li>数据链路层定义了如何在物理介质上传输数据。</li>\n<li>数据链路层还定义了如何封装特定于协议的流量，以使去往不同上层协议的流量在到达堆栈时可以使用相同的通道。</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_13.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_13\" /></p>\n<blockquote>\n<p>IEEE 802.2 对应 LLC，IEEE802.3 对应物理层和 MAC，以太网则覆盖物理层和链路层</p>\n</blockquote>\n<ol>\n<li>IEEE 将数据链路层分为两部分：\n<ol>\n<li>介质访问控制 (MAC)(转换到介质)</li>\n<li>逻辑链路控制 (LLC)(过渡到网络层)</li>\n</ol>\n</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_14.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_14\" /></p>\n<ol>\n<li>乍一看，IEEE 标准的两种方式都违反了 OSI 模型。\n<ol>\n<li>首先，它定义自己的层 (LLC)，包括其接口等。</li>\n<li>其次，看来 MAC 层标准 802.3 和 802.5 跨越了第 2 层 / 第 1 层接口。\n<ul>\n<li>802.5 令牌环网</li>\n<li>802.3 覆盖了物理层和第二层下半层</li>\n</ul>\n</li>\n</ol>\n</li>\n<li>但是，802.3 和 802.5 定义了用于构建特定技术的命名，框架和介质访问控制规则，都规范了对应的方案，不同方案不同解决标准</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_15.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_15\" /></p>\n<ol>\n<li>MAC 子层 (802.3)\n<ul>\n<li>定义如何在物理线路上传输帧 (frames)</li>\n<li>处理物理寻址</li>\n<li>定义网络拓扑</li>\n<li>定义线路规程</li>\n</ul>\n</li>\n<li>LLC 子层 (802.2)\n<ul>\n<li>逻辑上标识不同的协议类型，然后将其封装，兼容不同介质的访问</li>\n<li>使用<strong> SAP</strong> 标识符执行逻辑标识，用来做发送的位置的标识</li>\n<li>LLC 帧的类型取决于上层协议期望的标识符，对于上层服务进行支持</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"mac-子层\"><a class=\"anchor\" href=\"#mac-子层\">#</a> MAC 子层</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_16.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_16\" /></p>\n<p>注意是字节不是字</p>\n<h4 id=\"前导码preamble\"><a class=\"anchor\" href=\"#前导码preamble\">#</a> 前导码 preamble</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_17.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_17\" /></p>\n<p>前同步码告诉接收站一帧即将到来，前面 7 个字节是 0x10101010，最后一个是 0x10101011 (用于进行时钟同步)。</p>\n<p>使用曼彻斯特编码，0 电平的时候无电压。</p>\n<h4 id=\"目的地址-源地址\"><a class=\"anchor\" href=\"#目的地址-源地址\">#</a> 目的地址、源地址</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_18.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_18\" /></p>\n<p>先看目的地址的好处：交换机等看到目的地址就可以进行判断，提高效率</p>\n<h4 id=\"长度字段\"><a class=\"anchor\" href=\"#长度字段\">#</a> 长度字段</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_19.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_19\" /></p>\n<p>早期这里是长度字段，以太网二用类型取代长度字段。不需要长度参数也可以算出帧的长度。</p>\n<h4 id=\"数据字段\"><a class=\"anchor\" href=\"#数据字段\">#</a> 数据字段</h4>\n<p>最小的<strong> 46</strong> 字节，最多 1500 字节。</p>\n<p><strong>4 个 64 字节大小帧同时发送才能保证占据全部的链路</strong>，100m 链路，用 512us，就是 512bit，也就是 64 字节。64-（6+6+2+4）=46 。【前引导码不算帧长度】</p>\n<p>如果没有 46，则补零。</p>\n<h4 id=\"fcs字段\"><a class=\"anchor\" href=\"#fcs字段\">#</a> FCS 字段</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_20.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_20\" /></p>\n<p>循环冗余校验 (cyclic redundancy check) 值 —— 自己补充</p>\n<p>固定 4 字节</p>\n<h3 id=\"llc子层\"><a class=\"anchor\" href=\"#llc子层\">#</a> LLC 子层</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_21.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_21\" /></p>\n<ol>\n<li>\n<p>逻辑链路控制 (LLC) 子层管理单个链路管理设备之间的通信</p>\n</li>\n<li>\n<p>LLC 在 IEEE 802.2 规范中定义，并且同时支持<strong>无连接和面向连接</strong>的服务。</p>\n<p><strong>可以服务于总线、令牌环</strong></p>\n</li>\n<li>\n<p>LLC 子层允许部分数据链接层独立于现有技术运行，单个 LLC 子层可以与不同的 MAC 子层兼容 (compatible)。</p>\n</li>\n</ol>\n<h4 id=\"封装\"><a class=\"anchor\" href=\"#封装\">#</a> 封装</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_22.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_22\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_23.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_23\" /></p>\n<ol>\n<li>\n<p>LLC 获取网络协议数据 (数据包，packet)，并添加更多控制信息以帮助将数据包传递到其目的地。</p>\n</li>\n<li>\n<p>它添加了 802.2 规范的两个寻址组件，以在每一端标识上层协议：</p>\n<ul>\n<li>目标服务访问点 (DSAP)</li>\n<li>源服务访问点 (SSAP)</li>\n</ul>\n<p>基于 SAP 规范进行地址和分配。</p>\n</li>\n<li>\n<p>然后，此重新打包的数据将传输到 MAC 以进一步封装数据。</p>\n</li>\n</ol>\n<h3 id=\"介质访问控制\"><a class=\"anchor\" href=\"#介质访问控制\">#</a> 介质访问控制</h3>\n<h4 id=\"mac地址\"><a class=\"anchor\" href=\"#mac地址\">#</a> MAC 地址</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_25.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_25\" /></p>\n<ol>\n<li>MAC 地址为<strong> 48 位</strong>，始终表示为<strong> 12 个十六进制数字</strong>。</li>\n<li>IEEE 管理的前 6 个十六进制数字 (从左到右) 标识制造商或销售商 (供应商)，并包括<strong>组织唯一标识符 (OUI)</strong>。\n<ul>\n<li>OUI 是生产的厂商，比如 0060CF 就是 Cisco 的，然后可以使用后面 24 个 bit 进行自己的编码</li>\n<li>一个厂商是可以买多个 OUI 的，也可以几个单位买一个 OUI</li>\n<li>第一个 bit 取 0 表示这个地址是一个单播地址，取 1 则是表示是一个多播地址。</li>\n<li>第二个 bit 取 0 表示这个地址是全球唯一地址，取 1 则表示是本地唯一地址</li>\n</ul>\n</li>\n<li>其余的 6 位十六进制数字包括接口序列号，由特定供应商管理。</li>\n</ol>\n<h4 id=\"ethernet-8023-广播\"><a class=\"anchor\" href=\"#ethernet-8023-广播\">#</a> Ethernet 802.3 广播</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_26.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_26\" /></p>\n<ol>\n<li>广播\n<ul>\n<li>目标 MAC：全 1 (FFFF.FFFF.FFFF)</li>\n<li>保证所有的设备都能收到这个地址</li>\n<li>会导致非目的主机进行地址解析</li>\n</ul>\n</li>\n<li>广播会不必要地打断基站，从而严重影响基站的性能</li>\n<li>因此，仅在以下情况下才应使用广播：\n<ul>\n<li>目的地的 MAC 地址未知</li>\n<li>目的地是所有主机</li>\n</ul>\n</li>\n<li>非必要情况下我们不希望有很多广播，有可能会导致广播风暴，需要严格限制广播的使用</li>\n</ol>\n<h4 id=\"以太网操作\"><a class=\"anchor\" href=\"#以太网操作\">#</a> 以太网操作</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_27.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_27\" /></p>\n<p>上图中 1 是总线拓扑，1 发送的数据帧会传达给所有在这个总线上的设备，非目的主机检查目的地址和本机 MAC 地址不同，则会将该帧丢弃。</p>\n<ol>\n<li>以太网是广播网络，也就是说，每个站都可以看到所有帧，而不管它们是否是目的地</li>\n<li>通过 MAC 地址判断站点是否为目的地</li>\n<li>目标站在 OSI 层上发送数据。其他节点丢弃帧</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_28.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_28\" /></p>\n<ol>\n<li>听然后传送</li>\n<li>广播 jam 信号\n<ul>\n<li>是一个 32bit 的全 1 的数据帧表示出现了冲突</li>\n<li>标准思科认为是所有侦听的设备都会发送</li>\n</ul>\n</li>\n<li>发生碰撞 (Collision)\n<ul>\n<li>两个设备同时使用链路发送电信号，则会出错。</li>\n<li>如果有冲突，则会一直侦听总线，等到空闲则可以组织数据帧发送</li>\n<li>仍然存在问题 —— 多台主机同时进行组织数据帧进行发送</li>\n<li>因为同时还在侦听总线，如果出现冲突，则会发出 jam 信号，只要有 0 或者 1 传输，有电平则会表示使用</li>\n</ul>\n</li>\n<li>设备退回 (back off) 适当的时间，然后重新传输 (retransmit), 发生冲突的设备，根据特定的回退算法</li>\n</ol>\n<p>帧至少为 64 字节，数据部分至少为 46 字节。</p>\n<h2 id=\"以太网-和-带冲突检测的载波侦听多路访问-ethernet-and-csmacd\"><a class=\"anchor\" href=\"#以太网-和-带冲突检测的载波侦听多路访问-ethernet-and-csmacd\">#</a> 以太网 和 带冲突检测的载波侦听多路访问 Ethernet and CSMA/CD</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_29.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_29\" /></p>\n<ol>\n<li>首先设备要发送数据</li>\n<li>开始侦听链路是非忙，如果忙，则过一阵来再看看</li>\n<li>如果不忙，则开始准备发送\n<ul>\n<li>如果有错误，则到 9，表示有冲突发送，广播一个 jam sighnal，把自己尝试的次数 + 1 (重发有一定限度)</li>\n<li>尝试次数过多，会像上层协议传输网络不可用</li>\n<li>尝试次数还可，则到 13 计算一个回退时间，来再次尝试，回退时间单位，会保证 A 和 D 的时间差能保证第一个人已经用完电路来避免冲突。</li>\n</ul>\n</li>\n<li>如果没有错误，则一直传输到结束为止</li>\n</ol>\n<p>什么介质决定用什么网卡</p>\n<p>曼彻斯特编码，从低到高或从高到低为 0，选取一个方案不冲突即可。</p>\n<p>网络接入层<br />\n Internet access layer</p>\n<h3 id=\"pdu协议数据单元\"><a class=\"anchor\" href=\"#pdu协议数据单元\">#</a> PDU 协议数据单元</h3>\n<p>Protocol Data Unit</p>\n<p>在 OSI 模型系统里，PDU 和最底下四层相关。</p>\n<ol>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC5tLndpa2lwZWRpYS5vcmcvd2lraS8lRTclODklQTklRTclOTAlODYlRTUlQjElODI=\">物理层</span>（一层）PDU 指<strong>数据位</strong>（<strong>Bit</strong>）。</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC5tLndpa2lwZWRpYS5vcmcvd2lraS8lRTYlOTUlQjAlRTYlOEQlQUUlRTklOTMlQkUlRTglQjclQUYlRTUlQjElODI=\">数据链路层</span>（二层）PDU 指<strong>数据帧</strong>（<strong>Frame</strong>）。</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC5tLndpa2lwZWRpYS5vcmcvd2lraS8lRTclQkQlOTElRTclQkIlOUMlRTUlQjElODI=\">网络层</span>（三层）PDU 指<strong>数据包</strong> [<span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC5tLndpa2lwZWRpYS5vcmcvemgtaGFucy8lRTUlOEQlOEYlRTglQUUlQUUlRTYlOTUlQjAlRTYlOEQlQUUlRTUlOEQlOTUlRTUlODUlODMjY2l0ZV9ub3RlLTE=\">注 1]</span>（<strong>Packet</strong>）或<strong>数据报</strong>（<strong>Datagram</strong>）[<span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC5tLndpa2lwZWRpYS5vcmcvemgtaGFucy8lRTUlOEQlOEYlRTglQUUlQUUlRTYlOTUlQjAlRTYlOEQlQUUlRTUlOEQlOTUlRTUlODUlODMjY2l0ZV9ub3RlLWNmLXBhY2tldC0y\">1]</span>。</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC5tLndpa2lwZWRpYS5vcmcvd2lraS8lRTQlQkMlQTAlRTglQkUlOTMlRTUlQjElODI=\">传输层</span>（四层）PDU 指<strong>数据段</strong>（<strong>Segment</strong>）。</li>\n</ol>\n<p>第五层或以上为<strong>数据</strong>（<strong>data</strong>）。</p>\n<h2 id=\"无线局域网与csmaca\"><a class=\"anchor\" href=\"#无线局域网与csmaca\">#</a> 无线局域网与 CSMA/CA</h2>\n<h3 id=\"无线局域网\"><a class=\"anchor\" href=\"#无线局域网\">#</a> 无线局域网</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_31.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_31\" /></p>\n<p>无线局域网</p>\n<ul>\n<li>基于单元的通信</li>\n<li>基站发送的信号只能被附近的基站接收</li>\n<li>短距离传输</li>\n</ul>\n<p>无线局域网标准</p>\n<ul>\n<li>IEEE 802.11</li>\n<li>IEEE 802.11b</li>\n<li>IEEE 802.11a</li>\n<li>IEEE 802.11g</li>\n<li>IEEE 802.11n</li>\n</ul>\n<p>无线局域网分为两类</p>\n<ol>\n<li>有基础设施拓扑网络 (Infrastructure mode)</li>\n<li>无基础设施拓扑网络 (ad-hoc mode)</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_32.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_32\" /></p>\n<p>IEEE 802.11</p>\n<ul>\n<li>一项关键技术：<strong>直接序列扩频 (DSSS，Direct Sequence Spread Spectrum)</strong></li>\n<li>DSSS 适用于在 1 到 2 Mbps 范围内运行的无线设备，上面的这个速率在实际生活场景中要除以 2，因为无线通信都是有确认的，所以一般我们认为信道一来一回才有一次通信。</li>\n<li>DSSS 可以高达 11 Mbps 的速度运行，但在 2 Mbps 以上时将不被视为兼容</li>\n<li>也称为 Wi-Fi™，无线保证度，是星型拓扑，基站作为中心</li>\n</ul>\n<p>IEEE 802.11b(Wi-Fi)</p>\n<ul>\n<li>传输能力提高到 11 Mbps（采用高速直连技术，将传输能力提高好几倍）</li>\n<li>所有 802.11b 系统都向后兼容 (backward compliant)，因为它们还仅针对 DSSS 支持 1 和 2 Mbps 数据速率的 802.11。</li>\n<li>通过使用与 802.11 不同的编码技术来实现 (Achieves) 更高的数据吞吐率</li>\n<li>在 2.4 GHz 内运行，解决了 802.11 中出现的部分问题</li>\n</ul>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_33.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_33\" /></p>\n<p>IEEE 802.11a</p>\n<ul>\n<li>涵盖在 5 GHz 传输频带中运行的 WLAN 设备</li>\n<li>运行在 5GHz 上</li>\n<li>802.11a 能够提供 54 Mbps 的数据吞吐量，并且采用称为 &quot;速率加倍&quot; 的专有技术已达到 108 Mbps。</li>\n<li>实际上，更标准的等级是 20-26 Mbps。</li>\n<li>传播距离相比 802.11 和 802.11b 短，信号衰减厉害，但是对于多用户上网的支持更好了。</li>\n<li>使用<strong>正交频分复用</strong>技术。</li>\n</ul>\n<p>proprietary 所有的，专利的</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_34.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_34\" />IEEE 802.11g</p>\n<ul>\n<li>可以提供与 802.11a (54Mbps) 相同的功能，但具有 802.11b 的向后兼容性</li>\n<li>使用 ** 正交频分复用 (OFDM，Orthogonal Frequency Division Multiplexing)** 技术。</li>\n</ul>\n<p>IEEE 802.11n: 下一代的 WLAN</p>\n<ul>\n<li>提供的带宽是 802.11g 的两倍，即 108Mbps，理论上可达 500-600Mbps。实际上是 100M 左右</li>\n<li>目前使用比较多的方案。</li>\n</ul>\n<h3 id=\"无线局域网拓扑\"><a class=\"anchor\" href=\"#无线局域网拓扑\">#</a> 无线局域网拓扑</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_35.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_35\" /></p>\n<p>分为 infrastructure mode 和 ad-hoc mode</p>\n<p>AP 形成星型拓扑，基站之间不相互连接，只与 AP 相连，形成基本服务集 BSS</p>\n<p>多个 AP 形成扩展的服务集 ESS</p>\n<h4 id=\"infrastructure-mode\"><a class=\"anchor\" href=\"#infrastructure-mode\">#</a> Infrastructure Mode</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_36.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_36\" /></p>\n<ol>\n<li>\n<p>基本服务集 (BSS) 包括一个基站 (BS) 和几个无线主机</p>\n<ul>\n<li>所有主机都可以在本地 BSS 中直接相互通信</li>\n<li>基站中两个主机之间是不直接互相通信的。</li>\n<li>同一个 BSS 中的主机间直接通信</li>\n</ul>\n</li>\n<li>\n<p>接入点 (AP) 充当基础架构模式的基站 (BS)</p>\n<ul>\n<li>AP 硬连线到有线 (cabled) 局域网，以提供 Internet 访问和与有线网络的连接</li>\n<li>安装 AP 后，将分配服务集标识符 (SSID) 和通道</li>\n<li>单元格的范围是 91.44 至 152.4 米 (300 至 500 英尺)</li>\n<li>速率一般约为百兆，覆盖大概 100m 左右</li>\n</ul>\n</li>\n<li>\n<p>一个 BSS 可以通过分发系统 (DS) 连接到另一个 BSS，并构造一个扩展服务集 (ESS)。</p>\n<p>家里的路由器既有 AP 的功能又有路由器功能，但是理论上只应该是 AP 的功能，一般我们认为家用路由器是一个 AP</p>\n</li>\n</ol>\n<h3 id=\"accessing-procedure访问过程\"><a class=\"anchor\" href=\"#accessing-procedure访问过程\">#</a> Accessing Procedure 访问过程</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_37.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_37\" /></p>\n<ol>\n<li>在 WLAN 中激活客户端时，它将开始 &quot;侦听&quot; 与之 &quot;关联&quot; 的兼容设备</li>\n<li>这被称为 &quot;扫描&quot;\n<ul>\n<li>主动扫描</li>\n<li>被动扫描</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"主动扫描\"><a class=\"anchor\" href=\"#主动扫描\">#</a> 主动扫描</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_38.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_38\" /></p>\n<ol>\n<li>希望加入网络的无线节点发送探测 (probe) 请求。</li>\n<li>探测请求将包含它希望加入的网络的服务集标识符 (SSID)</li>\n<li>当找到具有相同 SSID 的 AP 时，该 AP 将发出探测响应</li>\n<li>身份验证（authentication）和关联步骤已完成</li>\n<li>移动端发出请求帧，但是 AP 不发送自己的信息，AP 比较安全。不用发送出自己的 SSID</li>\n</ol>\n<h4 id=\"被动扫描\"><a class=\"anchor\" href=\"#被动扫描\">#</a> 被动扫描</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_39.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_39\" /></p>\n<ol>\n<li>侦听由 AP（有基础设施拓扑网络）或对等节点 (无基础设施拓扑网络) 传输的信标管理帧 (beacon management frames)，包含自己的 SSID 信息</li>\n<li>当节点接收到包含要尝试加入的网络的 SSID 的信标时，将尝试加入该网络。</li>\n<li>被动扫描是一个连续的过程，并且随着信号强度的变化，节点可能会与 AP 关联或分离，也是因为强度变化，所以连接状态需要维持。</li>\n</ol>\n<h3 id=\"无线局域网的帧结构\"><a class=\"anchor\" href=\"#无线局域网的帧结构\">#</a> 无线局域网的帧结构</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_40.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_40\" /></p>\n<ol>\n<li>\n<p>WLAN 不使用标准的 802.3 帧。</p>\n</li>\n<li>\n<p>框架有三种类型</p>\n<ul>\n<li>控制帧 (Control Frames)</li>\n<li>管理帧 (Management frames)</li>\n<li>数据帧 (仅数据帧类似于 802.3 帧)</li>\n</ul>\n</li>\n<li>\n<p>无线数据帧和 802.3 帧的有效载荷 (payload) 为 1500 字节</p>\n<ul>\n<li>\n<p>但是，以太帧不能超过 1518 字节，而无线帧则可能高达<strong> 2346 字节</strong>。</p>\n<p>是因为在无线情况下使用的是有确认的信息，增加无线帧有效数据大小，来对冲确认的信息的损耗。</p>\n</li>\n<li>\n<p>通常，WLAN 帧大小将被限制为 1518 字节，因为它最常连接到有线以太网。（有线以太网属于有线局域网，以太帧限制在 1518 字节）</p>\n</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"数据帧结构80211-wlan无线局域网\"><a class=\"anchor\" href=\"#数据帧结构80211-wlan无线局域网\">#</a> 数据帧结构（802.11 WLAN 无线局域网）</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_41.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_41\" /></p>\n<p>WEP 规格，Wired Equivalent Privacy</p>\n<p>有基础设施网络拓扑用地址 1、2、3</p>\n<p>无基础设施网络拓扑用地址 4</p>\n<h4 id=\"数据帧中的地址\"><a class=\"anchor\" href=\"#数据帧中的地址\">#</a> 数据帧中的地址</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_42.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_42\" /></p>\n<p>扩展星型拓扑</p>\n<p>A 发往 AP，AP 发往 B</p>\n<h3 id=\"csmaca\"><a class=\"anchor\" href=\"#csmaca\">#</a> CSMA/CA</h3>\n<h4 id=\"为什么我们需要csmaca\"><a class=\"anchor\" href=\"#为什么我们需要csmaca\">#</a> 为什么我们需要 CSMA/CA</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_43.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_43\" /></p>\n<p>用于无基站的情况</p>\n<p>冲突 (Collisions) 可能发生在 WLAN 无线局域网中，但是站点只能知道附近的传输，因此 CSMA/CD 不是一个好的选择。【有线局域网是总线模式，可以知道所有的传输】</p>\n<ul>\n<li>隐藏站问题：当 A 将数据传输到 B 时，C 无法检测到 A 和 B 之间的传输，因此 C 可能会决定将数据传输到 B 并导致 B 发生冲突。</li>\n<li>暴露站问题：当 B 将数据传输到 A 时，C 可以检测到传输，因此 C 不会将数据传输到 D。但这是一个错误。</li>\n</ul>\n<h4 id=\"多路复用机制\"><a class=\"anchor\" href=\"#多路复用机制\">#</a> 多路复用机制</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_44.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_44\" /></p>\n<p>以太网（有线局域网）</p>\n<ul>\n<li>信号被传输到电缆上的<strong>所有</strong>站。</li>\n<li>发送站检测到冲突。</li>\n<li>一次只能在信道上发送一个有效帧。</li>\n</ul>\n<p>WLAN （无线局域网）</p>\n<ul>\n<li>信号通过电缆传输到发送站附近的站 (相邻，不可以跨越有效距离发送)</li>\n<li>MAC 协议必须尽最大努力确保只有一个相邻接收基站的发送点</li>\n<li>由接收基站来确定冲突。</li>\n<li>多路传输，一次可以在通道上传输<strong>多</strong>个有效 (effective) 帧</li>\n</ul>\n<h4 id=\"csmaca-避免冲突的载波侦听多路访问\"><a class=\"anchor\" href=\"#csmaca-避免冲突的载波侦听多路访问\">#</a> CSMA/CA 避免冲突的载波侦听多路访问</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_45.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_45\" /></p>\n<p>CSMA/CA(Carrier Sense Multiple Access with Collision Avoidance)</p>\n<p>RTS Request To Send</p>\n<p>CTS Clear To Send</p>\n<p>有可能在 B 处发生冲突，C 由于与 B 较远，未听到 CTS，与 A 同时发送</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_46.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_46\" /></p>\n<ol>\n<li>\n<p>为避免冲突，802.11 所有站点在完成一个事务后必须等待一段时间才能进行下一个动作，这个时间被称为 IFS，具体取决于帧的类型。</p>\n</li>\n<li>\n<p>SIFS (Short interframe space): 短帧间间隔 28us，用于本设备接受发送状态转换，不足够源站接受 CTS</p>\n</li>\n<li>\n<p>DIFS (Distributed Inter-frame Spacing)：分布协调功能帧间间隔 128us (多个节点进行协调)</p>\n</li>\n<li>\n<p>应答 CTS (Clear to Send)，等待 SIFS (Short interframe space) 后发送数据</p>\n</li>\n<li>\n<p>在收到 ACK 之后，一次通讯结束</p>\n</li>\n<li>\n<p>过程中的时间写入帧的<strong>时间数据标记位</strong></p>\n</li>\n<li>\n<p>NAV (网络分配向量)：网络协调时间，时间长度；</p>\n<p>NAV 计算方式在后面，NAV 是一开始就进行预估了，别的节点抢到了节点时，我们会减掉别人正常通信的时间，不是一直累积下去的情况。</p>\n</li>\n<li>\n<p>这次通讯结束，下一次经过争用窗口来抢</p>\n</li>\n<li>\n<p>源站需要收到确认信息 CTS 才能接着发送信息</p>\n</li>\n<li>\n<p>多个源站向目的站发 RTS 给目的站，目的站发现冲突，告诉各自站点，PPT 处理的是 RTS</p>\n</li>\n</ol>\n<h4 id=\"csmaca实例\"><a class=\"anchor\" href=\"#csmaca实例\">#</a> CSMA/CA 实例</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_47.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_47\" /></p>\n<h4 id=\"实际数据传输率\"><a class=\"anchor\" href=\"#实际数据传输率\">#</a> 实际数据传输率</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_48.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_48\" /></p>\n<ol>\n<li>当源节点发送帧时，接收节点将返回肯定确认 (ACK)。\n<ul>\n<li>这可能导致消耗 50％的可用带宽 (bandwidth)。</li>\n<li>在额定为 11 Mbps 的 802.11b 无线局域网上，这会将实际数据吞吐量降低到最大 5.0 到 5.5Mbps。</li>\n</ul>\n</li>\n<li>网络性能也会受到信号强度的影响\n<ul>\n<li>随着信号变弱，可以调用<strong>自适应速率选择 (ARS)</strong></li>\n<li>信号会受到距离影响，越远信号越弱，功率越低，带宽不能稳定到初始带宽</li>\n<li>传输单元会将数据速率从 11 Mbps 降低到 5.5Mbps，从 5.5 Mbps 降低到 2 Mbps 或 2 Mbps 到 1 Mbps。</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"wlan和ethernet区别\"><a class=\"anchor\" href=\"#wlan和ethernet区别\">#</a> WLAN 和 Ethernet 区别</h3>\n<table>\n<thead>\n<tr>\n<th>Ethernet</th>\n<th>WLAN</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>信号被传输到连接在线缆上的所有站点上</td>\n<td>信号只被传输到接近发送站点的站点</td>\n</tr>\n<tr>\n<td></td>\n<td>接受站点检测冲突</td>\n</tr>\n<tr>\n<td>只会有一个有效帧在信道上传播</td>\n<td>会有多个有效帧同时在信道上传播</td>\n</tr>\n<tr>\n<td></td>\n<td>MAC 协议必须尽可能保证只有发送站点接近接收站点</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"第二层设备\"><a class=\"anchor\" href=\"#第二层设备\">#</a> 第二层设备</h2>\n<h3 id=\"nics网卡\"><a class=\"anchor\" href=\"#nics网卡\">#</a> NICs 网卡</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_50.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_50\" /></p>\n<p>NIC 执行重要的第 2 层数据链路层功能：</p>\n<ol>\n<li>逻辑链接控制 - 与计算机上层通信</li>\n<li>媒体访问控制 - 提供对共享访问媒体的结构化访问</li>\n<li>命名 - 提供唯一的 MAC 地址标识符</li>\n<li>成帧 - 封装过程的一部分，打包比特以进行传输。</li>\n<li>发信号 - 使用内置收发器创建信号并与媒体接口 (也有第一层功能，01 序列变成信号发出去)</li>\n</ol>\n<h3 id=\"bridges网桥\"><a class=\"anchor\" href=\"#bridges网桥\">#</a> Bridges 网桥</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_51.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_51\" /></p>\n<ol>\n<li>\n<p>网桥将流量划分为多个部分，并根据 MAC 地址而不是协议对流量进行过滤。</p>\n</li>\n<li>\n<p>网桥可以通过减少较大的冲突域来提高网络性能。</p>\n</li>\n<li>\n<p>在从网络的一个网段到其他网段的流量较低的情况下，网桥最有效。</p>\n<p>当网段之间的流量变大时，网桥会成为瓶颈 (bottleneck)，并减慢通信速度。(网桥将数据帧检验存储再转发)</p>\n</li>\n</ol>\n<h4 id=\"透明网桥\"><a class=\"anchor\" href=\"#透明网桥\">#</a> 透明网桥</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_52.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_52\" /></p>\n<ol>\n<li>Mac 表放到缓存的位置，刚启动时是空表，之后在发送中逐渐学习。\n<ul>\n<li>Mac 地址表是有生命周期的，如果计时超过一个阈值没有刺激刷新 Mac 表，则会刷新表</li>\n<li>比如笔记本更换接入地址。</li>\n</ul>\n</li>\n<li>&quot;透明&quot; 指局域网中的站点并不知道所发送的帧将经过哪几个网桥，因为网桥对各站来说是看不见的</li>\n<li>原理\n<ol>\n<li>从 A 发出的帧从接口 x 进入了网桥，则从这个接口发出帧就一定能达到 A。网桥每收到一个帧，就记下其源地址和进入网桥的接口，写入转发表。</li>\n<li>在收到一个新的帧时，在转发表中匹配此帧的目的地址，找到对应的接口并转发。</li>\n<li>在网桥的转发表中写入的信息除了地址和接口外，还有帧进入网桥的时间，因为\n<ul>\n<li>拓扑可能经常变化</li>\n<li>站点也可能会更换适配器 (这就改变了站点的地址)</li>\n<li>站点并非总是处于工作状态</li>\n<li>把每个帧到达网桥的时间登记下来，就可以在转发表中只保留网络拓扑的最新状态信息，使得网桥中的转发表能反映当前网络的最新拓扑</li>\n</ul>\n</li>\n</ol>\n</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_53.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_53\" /></p>\n<ol>\n<li>问题：网络上的设备要发送数据但不知道目标地址时。\n<ul>\n<li>向网络上的所有设备发送<strong>广播</strong>。因为希望数据帧能够发送到全网，尽可能到达目的地</li>\n<li>由于网络上的每个设备都必须注意此类广播，因此<strong>网桥始终会转发这些广播</strong>。</li>\n</ul>\n</li>\n<li>广播过多会导致<strong>广播风暴</strong>，并且可能导致：\n<ul>\n<li>网络延时 (network time-outs)</li>\n<li>交通减速 (traffic slowdowns)</li>\n<li>低于可接受的性能</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"源路由网桥\"><a class=\"anchor\" href=\"#源路由网桥\">#</a> 源路由网桥</h4>\n<ol>\n<li>发送帧时将详细的路由信息放在帧的首部中，从而使每个经过的网桥都了解帧的路径</li>\n<li>在令牌环网络中被广泛使用</li>\n<li>原理 —— 源站以广播方式向目的站发送一个发现帧，每个发现帧都记录所经过的路由。发现帧到达目的站时就沿各自的路由返回源站。源站在得知这些路由后，从所有可能的路由中选择出一个最佳路由。凡从该源站向该目的站发送的帧的首部，都必须携带源站所确定的这一路由信息。</li>\n</ol>\n<h3 id=\"switches\"><a class=\"anchor\" href=\"#switches\">#</a> Switches</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_54.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_54\" /></p>\n<p>执行两个基本操作：</p>\n<ol>\n<li>帧交换：在输入介质 (medium) 上接收帧，然后将其传输到输出介质</li>\n<li>维护交换操作：交换器建立和维护交换表并搜索回路。 路由器构建并维护路由表和交换表。(STB 协议避免回路)</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_55.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_55\" /></p>\n<p>交换机可以分离冲突域。</p>\n<p>交换是一项通过减少流量和提高带宽来缓解以太网 LAN 拥塞 (alleviates congestion) 的技术.</p>\n<ol>\n<li>交换机创建专用 (dedicated) 的网段或点对点连接，并将这些网段连接到交换机内的虚拟网络中。</li>\n<li>之所以称为<strong>虚拟电路</strong>，是因为它仅在两个端口需要通信时才存在，并且在交换机内建立。网桥内部有一个高带宽的总线 (一般内部母线带宽是端口带宽的 10 倍)</li>\n<li>您可以将每个交换机端口视为一个微桥 (micro-bridge)。该过程称为微分段 (microsegmentation)。</li>\n<li>每个交换机端口将介质的全部带宽提供给每个主机</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_56.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_56\" /></p>\n<p>局域网交换机可减少冲突域的大小</p>\n<p>但是，连接到交换机的所有主机仍位于同一广播域中。</p>\n<ol>\n<li>也就是说，通过 LAN 交换机连接的所有其他节点仍将看到来自一个节点的广播。</li>\n<li><strong>交换机不能划分广播域</strong> (端口 -&gt; 所有端口转发)</li>\n</ol>\n<p>交换机连接的是一个局域网，而路由器连接的是不同局域网。</p>\n<h4 id=\"交换机划分冲突域\"><a class=\"anchor\" href=\"#交换机划分冲突域\">#</a> 交换机划分冲突域</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_57.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_57\" /></p>\n<ol>\n<li>\n<p>转发的速度明显加快，因为它们在<strong>硬件</strong>中进行切换，而网桥在<strong>软件</strong>中进行切换。</p>\n</li>\n<li>\n<p>可以使用交换机连接 10 Mbps 以太网 LAN 和 100 Mbps 以太网 LAN。</p>\n</li>\n<li>\n<p>在交换式以太网实现中，可用带宽可以接近 100％。</p>\n</li>\n<li>\n<p>共享以太网网络的容量不足其全部容量的 30％至 40％时，其性能最佳。</p>\n</li>\n<li>\n<p>一些交换机支持直通交换，这减少了延迟和延迟，而网桥仅支持存储转发交换 (存储转发，存下来检验转发)</p>\n<p>直通交换：快速转发，不做校验，只看前 6 字节的 MAC 地址（目的地址）。局域网下，网速比较快，传输速率高，网线比较短，可以认为是基本没有错误的，所以可以进行直通转发</p>\n</li>\n</ol>\n<h3 id=\"路由器分割广播域和冲突域\"><a class=\"anchor\" href=\"#路由器分割广播域和冲突域\">#</a> 路由器分割广播域和冲突域</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC3%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF_%E9%A1%B5%E9%9D%A2_58.jpg\" alt=\"第3讲：局域网数据链路层原理与技术_页面_58\" /></p>\n<ol>\n<li>路由器可以创建最高级别的细分：\n<ol>\n<li>创建较小的<strong>碰撞域</strong></li>\n<li>创建较小的<strong>广播域</strong>：除非经过编程，否则路由器不会转发广播。</li>\n</ol>\n</li>\n<li>路由器通过检查数据包上的<strong>目标逻辑地址</strong>，然后在其路由表中查找转发指令来完成数据包的转发</li>\n<li>由于路由器比网桥执行更多的功能，因此它们以更高的延迟率运行。</li>\n<li>路由器可以用作<strong>网关</strong>，用于连接不同的网络媒体和不同的 LAN 技术</li>\n<li>是根据逻辑地址 (<strong>IP 地址</strong>) 进行转发，不再是 MAC</li>\n</ol>\n<p><strong>路由器可以分割广播域</strong></p>\n<h3 id=\"访问控制\"><a class=\"anchor\" href=\"#访问控制\">#</a> 访问控制</h3>\n<p>Service Set Identifier(SSID)</p>\n<p>主动扫描，较为安全，不用发送 SSID</p>\n<p>被动扫描，存在安全隐患，会潜在 SSID</p>\n<h3 id=\"无线局域网帧结构有考试要求\"><a class=\"anchor\" href=\"#无线局域网帧结构有考试要求\">#</a> 无线局域网帧结构（有考试要求）</h3>\n<p>以太帧不能超过 1518 字节，而无线帧则可能高达<strong> 2346 字节</strong>。</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2VuZ2luZWVyX2phbWVzL2FydGljbGUvZGV0YWlscy8xMDI2MjUzMjQ=\">帧结构</span></p>\n<p>持续期 —— 告诉周边节点正在发送，避免发生冲突</p>\n<h2 id=\"第二层设备-2\"><a class=\"anchor\" href=\"#第二层设备-2\">#</a> 第二层设备</h2>\n<h3 id=\"nic网卡\"><a class=\"anchor\" href=\"#nic网卡\">#</a> NIC 网卡</h3>\n<p><strong>网络接口控制器</strong>（英语：network interface controller，NIC）</p>\n<p>是一块被设计用来允许计算机在计算机网络上进行通讯的计算机硬件。</p>\n<h3 id=\"网桥\"><a class=\"anchor\" href=\"#网桥\">#</a> 网桥</h3>\n<h4 id=\"透明网桥-2\"><a class=\"anchor\" href=\"#透明网桥-2\">#</a> 透明网桥</h4>\n<p>缓存是 RAM，从开始时是空表，到逐渐学习记录。</p>\n<h4 id=\"源路由网桥-2\"><a class=\"anchor\" href=\"#源路由网桥-2\">#</a> 源路由网桥</h4>\n<p>ROM —— Read-Only Memory</p>\n<p>只读储存器 ，对于电脑来讲就是硬盘，对于手机来讲就是内置储存，对于单片机来讲就是 Flash。用于存放操作系统的软件。ROM 可以在掉电的情况下，依然保存原有的数据。</p>\n<p>RAM —— Random-Access Memory</p>\n<p>随机储存器 ，就是电脑的内存条。用于存放动态数据。(也叫运行内存) 系统运行的时候，需要把操作系统从 ROM 中读取出来，放在 RAM 中运行。RAM 为随机存储，掉电不会保存数据</p>\n<h3 id=\"交换机\"><a class=\"anchor\" href=\"#交换机\">#</a> 交换机</h3>\n<p>可以划分冲突域，但是不能够隔绝广播域。</p>\n<p>交换机连接的是一个局域网，而路由器连接的是不同局域网。</p>\n<p>一些交换机<strong>支持直通交换</strong>，这减少了延迟和延迟，而网桥仅支持<strong>存储转发交换 (存储转发，存下来检验转发)</strong>。</p>\n<ol>\n<li>直通交换：快速转发，不做校验，只看前 6 字节的 MAC 地址。</li>\n<li>局域网：网速比较快，传输速率高，网线比较短，可以认为是基本没有错误的，所以可以进行直通转发</li>\n</ol>\n<p>SDN 只用交换机做控制，不用路由器做控制。</p>\n",
            "tags": [
                "NJUSE",
                "互联网计算",
                "计网"
            ]
        },
        {
            "id": "https://quas-modo.github.io/undergraduate/2022/10/07/NJUSE/internet-computer/Lecture02-%E7%89%A9%E7%90%86%E5%B1%82/",
            "url": "https://quas-modo.github.io/undergraduate/2022/10/07/NJUSE/internet-computer/Lecture02-%E7%89%A9%E7%90%86%E5%B1%82/",
            "title": "Lecture02-物理层",
            "date_published": "2022-10-07T01:38:59.000Z",
            "content_html": "<h1 id=\"物理层\"><a class=\"anchor\" href=\"#物理层\">#</a> 物理层</h1>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222151520606.png\" alt=\"image-20221222151520606\" /></p>\n<h2 id=\"网络连接类型\"><a class=\"anchor\" href=\"#网络连接类型\">#</a> 网络连接类型</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222151627580.png\" alt=\"image-20221222151627580\" /></p>\n<p>多路复用和点对点通信</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222151648105.png\" alt=\"image-20221222151648105\" /></p>\n<ol>\n<li>多路复用共享介质\n<ul>\n<li>多个主机可以访问同一介质</li>\n<li>这意味着它们都共享相同的介质 — 即使 &quot;wire&quot; 可能是 UTP，它有四对线</li>\n</ul>\n</li>\n<li>点对点 (Point To Point) 网络\n<ol>\n<li>一个设备通过链路连接到另一个设备</li>\n<li>最广泛地应用于拨号网络连接，也是你最熟悉的一种。使用电信号来完成传输。</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"局域网介质\"><a class=\"anchor\" href=\"#局域网介质\">#</a> 局域网介质</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222153405955.png\" alt=\"image-20221222153405955\" /></p>\n<p>第一类在铜线电缆传输电信号，第二类传输光脉冲光线信号光信号，第三类传输无线电波。</p>\n<ol>\n<li>\n<p>功能是传输数据，物理层负责将 01 信号转化成以上三种形式进行传播</p>\n</li>\n<li>\n<p>数字信号转化成光信号、无线信号等传输过程称为<strong>编码</strong></p>\n</li>\n<li>\n<p>电缆类型包括 STP (有屏蔽双绞线)、UTP (无屏蔽双绞线)、coaxial 同轴电缆、fiber-optics 光纤、空气（无线电波）</p>\n<p><strong>STP</strong> 是内每对线都包裹一层铝箔（共有 4 个单独的铝箔包裹），外编织网的双层屏蔽网线。UTP 是非屏蔽双绞线；</p>\n</li>\n</ol>\n<p>可通过调节频率（调频）、电压（调幅）、相位（调相）等方式来实现不同 01 编码，编码好坏影响传输效果</p>\n<h3 id=\"utp-无屏蔽双绞线-unshielded-twisted-pair\"><a class=\"anchor\" href=\"#utp-无屏蔽双绞线-unshielded-twisted-pair\">#</a> UTP (无屏蔽双绞线 Unshielded Twisted Pair)</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222154419647.png\" alt=\"image-20221222154419647\" /></p>\n<p>由八根子线组成，两个线组合成一组，共四组，每一组被称为 Twisted Pair 可以保证每一组电流抵消电磁波干扰 (抗干扰能力有限)</p>\n<ol>\n<li>依赖于消除效应，由双绞线对产生，用来限制由 EMI 和 RFI 引起的信号退化</li>\n<li>有四对铜线，阻抗 (impedance) 为 100 欧姆，频率低、接口小、布线更加方便、最便宜。</li>\n<li>一般认为有效范围为 100m，有电流损耗</li>\n</ol>\n<p>有千兆传输能力，可以作为主流方案</p>\n<h4 id=\"优点\"><a class=\"anchor\" href=\"#优点\">#</a> 优点</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222154849950.png\" alt=\"image-20221222154849950\" /></p>\n<ol>\n<li>易于安装且成本较低，线薄，接口小</li>\n<li>每米成本低于任何其他类型的局域网布线</li>\n<li>较小的外径不能像其他类型的电缆那样迅速地填满布线管道 (duct)</li>\n<li>使用 RJ 连接器安装，因此可以大大减少潜在的网络噪声源，并确保良好的可靠连接</li>\n</ol>\n<h4 id=\"缺点\"><a class=\"anchor\" href=\"#缺点\">#</a> 缺点</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222155018737.png\" alt=\"image-20221222155018737\" /></p>\n<ol>\n<li>与其他类型的网络媒体相比，UTP 只通过双绞的形式屏蔽噪声，更容易产生<strong>电噪声和干扰</strong></li>\n<li>双绞线的信号增强距离比同轴电缆 (Coaxial) 和光纤 (Fiber-Optic)<strong> 短</strong>，只有 100 米</li>\n</ol>\n<h3 id=\"coaxial-cable同轴电缆\"><a class=\"anchor\" href=\"#coaxial-cable同轴电缆\">#</a> Coaxial Cable 同轴电缆</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222155256807.png\" alt=\"image-20221222155256807\" /></p>\n<p>结构：铜导线传输电信号，塑料绝缘膜，铜金属网防止外部干扰，塑胶套</p>\n<ol>\n<li>细缆 / 粗缆，细缆电阻大，传递距离近，粗缆成本高，传输距离远</li>\n<li>与双绞线相比，不使用中继器的网络运行时间更长</li>\n<li>比光纤便宜但比双绞线贵</li>\n</ol>\n<p>传输距离 500m 左右，比双绞线传输更加远，成本也要高一点，带宽可以达到百兆 - 千兆</p>\n<h3 id=\"fiber-optic光缆\"><a class=\"anchor\" href=\"#fiber-optic光缆\">#</a> Fiber-Optic 光缆</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222155745491.png\" alt=\"image-20221222155745491\" /></p>\n<p>光不受外界电磁波干扰，较为可靠</p>\n<p>结构：光导体（二氧化硅），塑料套，一般有两个接口，一个接收一个发送</p>\n<ol>\n<li>传导调制 (modulated) 光传输</li>\n<li>不易受到电磁干扰或射频干扰，并且能够比其他网络媒体更高的数据速率</li>\n<li>电磁波 (electromagnetic wave) 通过光纤被引导</li>\n</ol>\n<p>成本比较高，传输距离达到几公里，宽带可达千兆</p>\n<h4 id=\"分类\"><a class=\"anchor\" href=\"#分类\">#</a> 分类</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222160120535.png\" alt=\"image-20221222160120535\" /></p>\n<ol>\n<li>\n<p>单模式 —— 单路光传输</p>\n<p>光导体直径比较细，相对于多模式光缆要细一个数量级，认为光传输近似直射，没有反射，能量损耗少，多用于广域网</p>\n<ul>\n<li>也称为轴 (axial)：光沿着电缆的轴传播</li>\n<li>由于多模中的色散 (dispersion)，比多模 (高达 10 Gbps) 更快</li>\n<li>通常用于广域网</li>\n<li>直径小于多模 (色散较小)</li>\n<li>最常使用 ILD，但也使用 LED</li>\n</ul>\n</li>\n<li>\n<p>多模式 —— 多路光不同角度传输</p>\n<p>光导体直径大一些，同时传输多路光信号，入射端通过不同入射角区别，接收端按照角度进行识别，实现在一个介质上面实现多路传输，能量损失大一些 (反射)，多用于局域网</p>\n<ul>\n<li>光以不同的角度进入玻璃管并沿非轴方向传播，这意味着它从玻璃管壁上来回反射</li>\n<li>直径大于单光模式，最常用于局域网</li>\n<li>易受更大分散性的影响</li>\n</ul>\n</li>\n</ol>\n<p>单模式和多模式在两端都需要用注入式激光二极管或者发光二极管进行发射</p>\n<h3 id=\"wireless-communication无线通讯\"><a class=\"anchor\" href=\"#wireless-communication无线通讯\">#</a> Wireless Communication 无线通讯</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222160715234.png\" alt=\"image-20221222160715234\" /></p>\n<p>区分不同电磁波的主要方法是通过其频率 (频率多路复用)</p>\n<p>把信号编码成为电磁波的方式，不同设备使用不同频段，可以互不干扰</p>\n<h4 id=\"传输方式\"><a class=\"anchor\" href=\"#传输方式\">#</a> 传输方式</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222160812958.png\" alt=\"image-20221222160812958\" /></p>\n<ol>\n<li>\n<p>激光 Lasers</p>\n<p>约定好电磁波频率范围，使用确定<strong>对射</strong>方案进行传输，部署在中间没有障碍物的两端之间，激光波长很短不能衍射</p>\n<ul>\n<li>输出一个相干 (coherent) 的电磁场，其中所有的波都在同一频率上，并在同一相位上排列</li>\n</ul>\n</li>\n<li>\n<p>红外线 Infrared</p>\n<p>红外能量要比激光弱得多，成本低，不能衍射，不能跨障碍物传输</p>\n<ul>\n<li>通常是一种瞄准线 (line-of-sight) 技术，但可以反弹 (bounced) 或重定向</li>\n<li>无法通过不透明对象</li>\n</ul>\n</li>\n<li>\n<p>无线电波 Radio</p>\n<p>可以通过衍射，使得信号在比较远的距离并越过障碍物进行通信</p>\n<p>传输距离比较远，辐射能量小，容易受到干扰，比如雨天能量会损失，在功率较大的设备旁边容易被干扰</p>\n<ul>\n<li>携带可以通过墙壁的数据信号</li>\n<li>地面 (terrestrial) 和卫星无线电技术，地面有无线电台，卫星无线电技术有 GPS</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"utp-for-ethernet-以太网使用的双绞线\"><a class=\"anchor\" href=\"#utp-for-ethernet-以太网使用的双绞线\">#</a> UTP for Ethernet 以太网使用的双绞线</h2>\n<h3 id=\"电缆规格和终端\"><a class=\"anchor\" href=\"#电缆规格和终端\">#</a> 电缆规格和终端</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222162120069.png\" alt=\"image-20221222162120069\" /></p>\n<p>网络媒体标准由下列团体制定和发布：</p>\n<ul>\n<li>美国电气与电子工程师学会 制定硬件标准，指定一些新型的协议。</li>\n<li>保险商实验室</li>\n<li>电子工业联盟</li>\n<li>美国电信工业协会</li>\n<li>美国国家标准协会</li>\n</ul>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222162414590.png\" alt=\"image-20221222162414590\" /></p>\n<p>解决商业、住宅布线规范，对应路线空间标准、接地接线要求规范</p>\n<h3 id=\"无屏蔽双绞线的分类\"><a class=\"anchor\" href=\"#无屏蔽双绞线的分类\">#</a> 无屏蔽双绞线的分类</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222162554276.png\" alt=\"image-20221222162554276\" /></p>\n<ol>\n<li>一类线：主要用于语音传输，<strong>不用于数据传输</strong>，只有两根线做双绞线，常用作电话的语音通信</li>\n<li>二类线：传输频率 1MHz，用于语音和最高 4Mbps 的<strong>数据传输</strong>，常见于<strong>令牌网</strong>，不是很常用</li>\n<li>三类线：EIA/TIA568 标准指定电缆，传输频率 16MHz，用于语音传输及最高传输速率为 10Mbps 的数据传输，主要用于<strong> 10BASE-T</strong>，以太网从三类线开始出现</li>\n<li>四类线：传输频率为 20MHz，用于语音传输和最高传输速率 16Mbps 的数据传输，主要用于令牌网和<strong> 10BASE-T/100BASE-T 达到百兆</strong></li>\n<li>五类线：增加了绕线密度，外套高质量绝缘材料，用于语音和数据传输 (主要为<strong> 100/1000BASE-T 达到千兆</strong>)，是最常用的以太网电缆\n<ul>\n<li>和三类线相比，增加双绞，绞合度更高，抗干扰能力更强。</li>\n<li>从五类线开始进行了更加标准化的处理。</li>\n</ul>\n</li>\n<li>超五类线（<strong>现在主要使用的</strong>）：衰减小，串扰少，具有更高的衰减 / 串扰比和信噪比、更小的时延误差，主要用于<strong> 1000BASE-T</strong></li>\n<li>六类线：传输频率为 1MHz～250MHz，性能远高于超五类标准，适用于高于 1Gbps 的应用</li>\n<li>七类线：带宽为 600MHz，可能用于今后的 10G 比特以太网。</li>\n</ol>\n<p>1000BASE-T T 表示 Twisted</p>\n<h3 id=\"双绞线类型\"><a class=\"anchor\" href=\"#双绞线类型\">#</a> 双绞线类型</h3>\n<ol>\n<li>直通线</li>\n<li>反转线</li>\n<li>交叉电缆</li>\n</ol>\n<p><strong>两个台式机直连使用交叉线，台式机和交换机相连使用直通线</strong></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222163134180.png\" alt=\"image-20221222163134180\" /></p>\n<p>制作网线的过程</p>\n<h4 id=\"straight-cable-直通线\"><a class=\"anchor\" href=\"#straight-cable-直通线\">#</a> Straight Cable 直通线</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222163227840.png\" alt=\"image-20221222163227840\" /></p>\n<ol>\n<li>100 欧姆平衡双绞线电信插座 / 连接器</li>\n<li>双绞线是八根不同子线，根据颜色进行划分，从左到右 (底下): 白绿色、绿色、白橙色、蓝色、白蓝色、橙色、白棕色、棕色</li>\n<li>左边是 T568A 端口，右边是 T568B 端口</li>\n<li>直通线 —— 两端都是 T568A 或者都是 T568B</li>\n</ol>\n<p><strong>主机连到交换机，交换机连到路由器</strong></p>\n<h4 id=\"rollover-cable-反转线\"><a class=\"anchor\" href=\"#rollover-cable-反转线\">#</a> Rollover Cable 反转线</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222163631529.png\" alt=\"image-20221222163631529\" /></p>\n<ol>\n<li>别名：控制台线</li>\n<li>用于将工作站或终端连接到路由器 / 交换机的<strong>控制台端口</strong>以进行配置（别名的由来）</li>\n<li><strong>两端是反着连接的</strong> ：一端的插脚 1 连接到另一端的插脚 8；然后插脚 2 连接到插脚 7，插脚 3 连接到插脚 6，依此类推，两端是插脚对应是反着的</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222195000045.png\" alt=\"image-20221222195000045\" /></p>\n<p>使用控制台配置设备 (超级终端，使用电脑进行交换机路由器的配置)</p>\n<ul>\n<li>使用 RJ-45-to-DB-9 适配器连接计算机的串行端口 (com) Connect the serial port (com) of computer by using RJ-45-to-DB-9 adapter</li>\n<li>启动 &quot;超级终端&quot; Start up “super terminal”</li>\n<li>使用 &quot;默认配置&quot; Use “default configurations”</li>\n<li>注意，我们连接的是 console 端口，而不能是网口。</li>\n</ul>\n<h4 id=\"crossover-cable\"><a class=\"anchor\" href=\"#crossover-cable\">#</a> Crossover Cable</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222195226127.png\" alt=\"image-20221222195226127\" /></p>\n<ol>\n<li>\n<p>电缆一端的对 2 和对 3 将在另一端反转，<strong>一端为 T568-A 的排序，另一端为 T568-B 的排序</strong>【和直通线的主要区别】</p>\n</li>\n<li>\n<p>被认为是 &quot;垂直&quot; 布线 / 主干的一部分</p>\n</li>\n<li>\n<p>可以用来</p>\n<ul>\n<li>\n<p>连接两个或多个集线器或开关【<strong>堆叠技术</strong>：用交叉线来两个交换机 (将两个交换机合成为一个交换机进行使用) 或者两个 hubs，2 个 8 口交换机，通过一根线连接，则有 14 个端口】</p>\n</li>\n<li>\n<p>连接两个独立的工作站以创建小型</p>\n</li>\n</ul>\n</li>\n<li>\n<p>主要用来<strong>连接相同的设备</strong>，相同的 PC 之间的连接</p>\n</li>\n</ol>\n<h2 id=\"介质和信号问题\"><a class=\"anchor\" href=\"#介质和信号问题\">#</a> 介质和信号问题</h2>\n<h3 id=\"信号和通讯问题\"><a class=\"anchor\" href=\"#信号和通讯问题\">#</a> 信号和通讯问题</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222195518621.png\" alt=\"image-20221222195518621\" /></p>\n<p>物理层的传播是有损耗的</p>\n<ol>\n<li>传播 Propagation【都可以广义地理解为电磁波】\n<ul>\n<li>传播时间；速度取决于介质</li>\n<li>随着数据传输速率的增加，有时必须考虑信号传输所需的时间。</li>\n<li>不同介质传播时间是不同的</li>\n</ul>\n</li>\n<li>衰减 Attenuation\n<ul>\n<li>由于 ** 周围环境 (surroundings)** 造成的远距离信号丢失</li>\n<li>会影响网络，因为它限制了可以通过其发送消息的网络布线的长度</li>\n<li>在有限长度下进行传输</li>\n</ul>\n</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222195857436.png\" alt=\"image-20221222195857436\" /></p>\n<ol start=\"3\">\n<li>\n<p>反射 Reflection</p>\n<ul>\n<li>\n<p>由介质的不连续性引起，我们要保证介质稳定。</p>\n</li>\n<li>\n<p>发生在电信号中；可能是电缆扭结 (kinks) 或电缆端接不良的结果</p>\n</li>\n<li>\n<p>网络应具有特定的阻抗，以匹配 NIC 中的电气组件</p>\n</li>\n<li>\n<p>不匹配的阻抗的结果是反射能</p>\n</li>\n</ul>\n</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222200057445.png\" alt=\"image-20221222200057445\" /></p>\n<ol start=\"4\">\n<li>\n<p>噪声 (电子干扰) Noise —— 都会影响传输的质量</p>\n<ul>\n<li>\n<p>对光 / 电磁信号的不必要的附加</p>\n</li>\n<li>\n<p>电缆中其他电线的串扰电噪声（电磁波）</p>\n</li>\n<li>\n<p>EMI (电磁干扰) 可由电动机引起 （脉冲）</p>\n</li>\n<li>\n<p>可以通过扭转线对在网络介质中提供自屏蔽来避免信号的消除。</p>\n</li>\n</ul>\n</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222200306056.png\" alt=\"image-20221222200306056\" /></p>\n<ol start=\"5\">\n<li>\n<p>时间问题 Timing problem</p>\n<ul>\n<li>\n<p>色散信号在时间上，可以通过适当的电缆设计、限制电缆长度和找到适当的阻抗来固定</p>\n</li>\n<li>\n<p>抖动源和目标不同步，可通过硬件和软件 (包括协议) 修复</p>\n</li>\n<li>\n<p>网络信号延时</p>\n</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"冲突和冲突域\"><a class=\"anchor\" href=\"#冲突和冲突域\">#</a> 冲突和冲突域</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222200722994.png\" alt=\"image-20221222200722994\" /></p>\n<ol>\n<li>当两个位元在同一网路上同时传播时，会发生碰撞。</li>\n<li>添加<strong>中继器和集线器</strong>会<strong>扩大</strong>冲突域，因为可以连接更多的设备</li>\n<li>可以通过添加智能设备 (如网桥、交换机和路由器) 来分割网络。</li>\n</ol>\n<h3 id=\"分割冲突域\"><a class=\"anchor\" href=\"#分割冲突域\">#</a> 分割冲突域</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221007093055656.png\" alt=\"image-20221007093055656\" /></p>\n<p>网桥、交换机、路由器可以分割冲突域。</p>\n<p>到第二第三层 (分段后) 才能有效划分冲突域，第一层不能解决冲突问题。</p>\n<p>划分成不同的段，不是分到了不同的局域网。</p>\n<h2 id=\"数据通信的基础信息\"><a class=\"anchor\" href=\"#数据通信的基础信息\">#</a> 数据通信的基础信息</h2>\n<h3 id=\"数据通信的理论基础\"><a class=\"anchor\" href=\"#数据通信的理论基础\">#</a> 数据通信的理论基础</h3>\n<h4 id=\"基本术语\"><a class=\"anchor\" href=\"#基本术语\">#</a> 基本术语</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222201323267.png\" alt=\"image-20221222201323267\" /></p>\n<p>模拟信号连续</p>\n<p>数字信号离散</p>\n<p>码元，传输基本单位，并不一定只包含一位，比如我们可以根据波形分为 8 种，8 种区分可以传输三位，2<sup>3</sup> = 8.</p>\n<h4 id=\"信号处理\"><a class=\"anchor\" href=\"#信号处理\">#</a> 信号处理</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222201658682.png\" alt=\"image-20221222201658682\" /></p>\n<p>可以通过编码和调幅等实现任意复合模拟信号</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222201826231.png\" alt=\"image-20221222201826231\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222202038026.png\" alt=\"image-20221222202038026\" /></p>\n<p>下面这种码元之间的界限模糊，发生 码间串扰</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222202136639.png\" alt=\"image-20221222202136639\" /></p>\n<p>以上为理想情况</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222202317380.png\" alt=\"image-20221222202317380\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222202358541.png\" alt=\"image-20221222202358541\" /></p>\n<h4 id=\"波特率与比特率\"><a class=\"anchor\" href=\"#波特率与比特率\">#</a> 波特率与比特率</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222202431044.png\" alt=\"image-20221222202431044\" /></p>\n<p>波特率和比特率有正比关系</p>\n<h3 id=\"数据通信技术\"><a class=\"anchor\" href=\"#数据通信技术\">#</a> 数据通信技术</h3>\n<h4 id=\"数据通信系统基本结构\"><a class=\"anchor\" href=\"#数据通信系统基本结构\">#</a> 数据通信系统基本结构</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222202822364.png\" alt=\"image-20221222202822364\" /></p>\n<p>源系统 - 传输系统 - 目的系统</p>\n<h4 id=\"数据表示和传输方式\"><a class=\"anchor\" href=\"#数据表示和传输方式\">#</a> 数据表示和传输方式</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222203013850.png\" alt=\"image-20221222203013850\" /></p>\n<h4 id=\"信号的传输\"><a class=\"anchor\" href=\"#信号的传输\">#</a> 信号的传输</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222203143212.png\" alt=\"image-20221222203143212\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222203200015.png\" alt=\"image-20221222203200015\" /></p>\n<ol>\n<li>线路编码是指将二进制数据转换成可以在物理通信链路上传输的形式，例如电线上的电脉冲、光纤上的光脉冲或空间中的电磁波</li>\n<li>在基带传输时数据离散传输，线路编码是有必要的</li>\n<li>线路编码作用：在发送和接收双方进行协同操作，避免混淆理解，提高传输效率</li>\n</ol>\n<h4 id=\"数字信号编码\"><a class=\"anchor\" href=\"#数字信号编码\">#</a> 数字信号编码</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222203424958.png\" alt=\"image-20221222203424958\" /></p>\n<h5 id=\"单极性编码\"><a class=\"anchor\" href=\"#单极性编码\">#</a> 单极性编码</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222203504591.png\" alt=\"image-20221222203504591\" /></p>\n<h5 id=\"极化编码\"><a class=\"anchor\" href=\"#极化编码\">#</a> 极化编码</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222203523690.png\" alt=\"image-20221222203523690\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222203556741.png\" alt=\"image-20221222203556741\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222203705477.png\" alt=\"image-20221222203705477\" /></p>\n<p>编码效率较低</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222203821717.png\" alt=\"image-20221222203821717\" /></p>\n<p>原理：每一位中间都有一个跳变，从低跳到高表示 &quot;0&quot;，从高跳到低表示 &quot;1&quot;</p>\n<p>编码效率大概只有 50%</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222203917553.png\" alt=\"image-20221222203917553\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222204307004.png\" alt=\"image-20221222204307004\" /></p>\n<p>原理：</p>\n<ul>\n<li>每一位中间跳变：表示时钟</li>\n<li>每一位位前跳变：表示数据：有跳变表示 &quot;0&quot;，无跳变表示 &quot;1&quot;</li>\n</ul>\n<h5 id=\"双极性编码\"><a class=\"anchor\" href=\"#双极性编码\">#</a> 双极性编码</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222205010405.png\" alt=\"image-20221222205010405\" /></p>\n<ol>\n<li>与 RZ 相同的是：采用三个电平：正、负与零</li>\n<li>与 RZ 不同的是：零电平表示 &quot;0&quot;，正负电平的跃迁表示 “1”，实现对 &quot;1&quot; 电平的交替反转。</li>\n<li>优点：\n<ol>\n<li>对每次出现的 &quot;1&quot; 交替反转，使直流分量为 0</li>\n<li>尽管连续 &quot;0&quot; 不能同步，但连续 &quot;1&quot; 可以同步</li>\n</ol>\n</li>\n<li>这次是 1 是高点位，下一次就是低电位。</li>\n</ol>\n<h4 id=\"多路复用\"><a class=\"anchor\" href=\"#多路复用\">#</a> 多路复用</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222205113133.png\" alt=\"image-20221222205113133\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222205335631.png\" alt=\"image-20221222205335631\" /></p>\n<h5 id=\"时分复用tdm\"><a class=\"anchor\" href=\"#时分复用tdm\">#</a> 时分复用 TDM</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222205433172.png\" alt=\"image-20221222205433172\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222210107910.png\" alt=\"image-20221222210107910\" /></p>\n<h5 id=\"统计时分复用stdm\"><a class=\"anchor\" href=\"#统计时分复用stdm\">#</a> 统计时分复用 STDM</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222210133064.png\" alt=\"image-20221222210133064\" /></p>\n<p>每一个子帧要携带用户信息</p>\n<p>比较主流的复用方案</p>\n<h5 id=\"频分复用fdm\"><a class=\"anchor\" href=\"#频分复用fdm\">#</a> 频分复用 FDM</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222210337608.png\" alt=\"image-20221222210337608\" /></p>\n<h5 id=\"波分复用wdm\"><a class=\"anchor\" href=\"#波分复用wdm\">#</a> 波分复用 WDM</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222210421450.png\" alt=\"image-20221222210421450\" /></p>\n<p>波长分类，八倍复用</p>\n<h5 id=\"码分复用cdm\"><a class=\"anchor\" href=\"#码分复用cdm\">#</a> 码分复用 CDM</h5>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221222210430679.png\" alt=\"image-20221222210430679\" /></p>\n<p>采用多个正交的码型</p>\n",
            "tags": [
                "NJUSE",
                "互联网计算",
                "计网"
            ]
        },
        {
            "id": "https://quas-modo.github.io/undergraduate/2022/09/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B/Lecture04-%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/",
            "url": "https://quas-modo.github.io/undergraduate/2022/09/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B/Lecture04-%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/",
            "title": "Lecture04-网络层：数据平面",
            "date_published": "2022-09-21T12:00:27.000Z",
            "content_html": "<p>掌握 IP 编址就是掌握因特网的网络层！（雾）<br />\nBulter Lampson—— 在一个时刻做一件事，将他做好。一个接口应当俘获一个抽象的最低限度的要件。不要进行一般化，一般化通常是错误的。<br />\n<span id=\"more\"></span></p>\n<h1 id=\"第四章-网络层数据平面\"><a class=\"anchor\" href=\"#第四章-网络层数据平面\">#</a> 第四章 网络层：数据平面</h1>\n<h2 id=\"网络层概述\"><a class=\"anchor\" href=\"#网络层概述\">#</a> 网络层概述</h2>\n<h3 id=\"数据平面\"><a class=\"anchor\" href=\"#数据平面\">#</a> <strong>数据平面</strong>：</h3>\n<p>网络层中每台路由器的功能，决定到达路由器输入链路之一的数据报如何转发到该路由器的输出链路之一，每台路由器如何选择。</p>\n<p>传统方式的转发功能基于目标地址和转发表，SDN 方式基于多个字段和流表。</p>\n<h3 id=\"控制平面\"><a class=\"anchor\" href=\"#控制平面\">#</a> <strong>控制平面</strong>：</h3>\n<p>网络范围的逻辑，控制数据报沿着源主机到目的主机的端到端路径中路由器的路由方式，协调本地路由器的转发动作。</p>\n<p>传统的路由方法在路由器中实现，SDN 方法在远程的服务器中实现。</p>\n<p>传统方式，分布式的去做，控制平面和数据平面在一起完成。</p>\n<p>SND 有一个统一的服务器，实现解耦合的功能。</p>\n<h3 id=\"网络层功能\"><a class=\"anchor\" href=\"#网络层功能\">#</a> <strong>网络层功能</strong>：</h3>\n<ol>\n<li>转发，在数据平面实现</li>\n<li>路由选择，在控制平面中实现</li>\n</ol>\n<h3 id=\"网络服务模型\"><a class=\"anchor\" href=\"#网络服务模型\">#</a> <strong>网络服务模型</strong></h3>\n<h4 id=\"对于单个数据报服务\"><a class=\"anchor\" href=\"#对于单个数据报服务\">#</a> 对于单个数据报服务</h4>\n<ol>\n<li>可靠传送</li>\n<li>延迟保证</li>\n</ol>\n<h4 id=\"对于数据报流的服务\"><a class=\"anchor\" href=\"#对于数据报流的服务\">#</a> 对于数据报流的服务</h4>\n<ol>\n<li>保序数据报传送</li>\n<li>保证流的最小宽带</li>\n<li>分组之间的延迟差</li>\n</ol>\n<h2 id=\"路由器工作原理\"><a class=\"anchor\" href=\"#路由器工作原理\">#</a> 路由器工作原理</h2>\n<p>路由器包括<strong>输入端口、交换结构、输出端口和路由选择处理器</strong>。</p>\n<p>基于目标的转发：仅仅依赖于 IP 数据报的目标 IP 地址。</p>\n<p>通用转发：基于头部字段的任意集合进行转发。</p>\n<p><strong>“匹配” 加 “动作”</strong></p>\n<h3 id=\"输入端口和基于目的地转发\"><a class=\"anchor\" href=\"#输入端口和基于目的地转发\">#</a> 输入端口和基于目的地转发</h3>\n<h4 id=\"查找\"><a class=\"anchor\" href=\"#查找\">#</a> 查找</h4>\n<p>使用转发表来查找输出端口</p>\n<p>路由器用分组目的地址的前缀与该表中的表项进行匹配。当有多个匹配时，使用<strong>最长前缀匹配规则</strong>。</p>\n<h4 id=\"其他动作\"><a class=\"anchor\" href=\"#其他动作\">#</a> 其他动作</h4>\n<ul>\n<li>出现物理层和链路层处理</li>\n<li>检查分组的版本号、检验和以及寿命字段</li>\n<li>必须更新用于网络管理的计数器</li>\n</ul>\n<h4 id=\"输入端口缓存\"><a class=\"anchor\" href=\"#输入端口缓存\">#</a> 输入端口缓存</h4>\n<p>排队延迟以及由于输入缓存溢出造成丢失</p>\n<h3 id=\"交换\"><a class=\"anchor\" href=\"#交换\">#</a> 交换</h3>\n<ol>\n<li>\n<p>经内存交换</p>\n<p>先将分组存入内存，再将分组复制到输出端口</p>\n</li>\n<li>\n<p>经总线交换</p>\n<p>一次只有一个分组能够快约总线，路由器的交换带宽受总线速率的限制。</p>\n</li>\n<li>\n<p>经互联网络交换</p>\n<p>使用更复杂的互联网络，例如使用纵横式交换机、榕树网络，纵横式交换机就是一种由 2N 条总线组成的互联网络。</p>\n</li>\n</ol>\n<h3 id=\"输出端口处理\"><a class=\"anchor\" href=\"#输出端口处理\">#</a> 输出端口处理</h3>\n<p>取出排队的分组进行传输，执行所需的链路层和物理层传输功能。</p>\n<h3 id=\"何处出现排队\"><a class=\"anchor\" href=\"#何处出现排队\">#</a> 何处出现排队</h3>\n<h4 id=\"输入排队\"><a class=\"anchor\" href=\"#输入排队\">#</a> 输入排队</h4>\n<p>HOL 阻塞 Head-Of-the-Line 线路前端阻塞</p>\n<p>只要输入链路上的分组到达速率达到其容量的 58%，在某些假设前提下，输入队列长度就会无限制地增大。</p>\n<h4 id=\"输出排队\"><a class=\"anchor\" href=\"#输出排队\">#</a> 输出排队</h4>\n<p>如何丢弃？</p>\n<ul>\n<li>弃尾</li>\n<li>根据优先权</li>\n<li>随机丢弃</li>\n</ul>\n<h4 id=\"分组调度\"><a class=\"anchor\" href=\"#分组调度\">#</a> 分组调度</h4>\n<ol>\n<li>\n<p>先进先出</p>\n<p>FIFO first in first out</p>\n<p>FCFS first come first service</p>\n</li>\n<li>\n<p>优先权排队</p>\n<p>优先权高的先进行传输</p>\n<p>非抢占式优先权排队：一旦分组开始传输，就不能打断</p>\n</li>\n<li>\n<p>循环和加权公平排队</p>\n<p>保持工作排队，不允许链路保持空闲</p>\n<p>类 n 的分组传输完毕后，就传输类 n+1 的分组，如果该类暂时没有分组，就跳到下一个类进行传输。</p>\n<p>每类的服务时间可能是带有权重的。</p>\n</li>\n</ol>\n<h2 id=\"网络协议\"><a class=\"anchor\" href=\"#网络协议\">#</a> 网络协议</h2>\n<p>以网络为单位来访问和向外传输</p>\n<p>掌握 IP 编址就是掌握因特网的网络层！</p>\n<h3 id=\"ipv4数据报格式\"><a class=\"anchor\" href=\"#ipv4数据报格式\">#</a> IPv4 数据报格式</h3>\n<p>版本</p>\n<p>首部长度</p>\n<p>服务类型</p>\n<p>数据报长度</p>\n<p>16 比特标识</p>\n<p>标志</p>\n<p>13 比特片偏移</p>\n<p>寿命</p>\n<p>上层协议</p>\n<p>首部检验和</p>\n<p>32 位比特源 IP 地址</p>\n<p>32 比特目标 IP 地址</p>\n<p>数据</p>\n<h3 id=\"数据报分片\"><a class=\"anchor\" href=\"#数据报分片\">#</a> 数据报分片</h3>\n<p>因为<strong>最大传送单元（MTU Maximum Transmission Unit）在链路层</strong>的限制，IP 数据报的长度有限，并且，不同链路也许会有不同的链路层协议，有不同的 MTU，所以要对于数据报做一些调整。</p>\n<p>分片，重新组装，标记<strong>表示、标志和片偏移字段</strong>【20 字节头部、数据、偏移量、最后一片的标志比特为 0】</p>\n<h3 id=\"ipv4编址\"><a class=\"anchor\" href=\"#ipv4编址\">#</a> IPv4 编址</h3>\n<p>32 比特（4 字节），共有约 40 亿个。</p>\n<p>点分十进制记法</p>\n<p>无类别域间路由选择 a.b.c.d/x</p>\n<p>为了确定子网，分开主机和路由器的每个接口，产生几个隔离的网络岛，使用接口端接这些隔离的网络的端点。这些隔离的网络中的每一个都叫作一个子网。</p>\n<h4 id=\"分类编址\"><a class=\"anchor\" href=\"#分类编址\">#</a> 分类编址：</h4>\n<ol>\n<li>A 类 1/7/24</li>\n<li>B 类 2/14/16</li>\n<li>C 类 3/21/8</li>\n</ol>\n<h4 id=\"特殊的地址\"><a class=\"anchor\" href=\"#特殊的地址\">#</a> 特殊的地址：</h4>\n<ol>\n<li>\n<p>全 0 - 本网络、本主机</p>\n</li>\n<li>\n<p>全 1 - 广播</p>\n</li>\n<li>\n<p>127.x.x.x 回路地址</p>\n</li>\n<li>\n<p>专用网络地址</p>\n<ul>\n<li>A 10.0.0.0-10.255.255.255</li>\n<li>B 172.16.0.0-172.31.255.255</li>\n<li>C 192.168.0.0-192.168.255.255</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"主机如何获得ip地址\"><a class=\"anchor\" href=\"#主机如何获得ip地址\">#</a> 主机如何获得 IP 地址？</h4>\n<ol>\n<li>\n<p>获取一块地址</p>\n<p>从一个 ISP 获取一组地址，例如该 ISP 被分配了地址 200.23.16.0/20，ISP 可以将地址块分成八个长度相等的连续地址块</p>\n<p>ICANN Internet Corporation for Assigned Names and Numbers 分配地址的机构</p>\n</li>\n<li>\n<p>获取主机地址：动态主机配置协议</p>\n<p>DHCP Dynamic Host Configuration 动态主机配置协议 即插即用协议 零配置协议</p>\n<p>DHCP 建立在 UDP 上</p>\n<ol>\n<li>DHCP 服务器发现</li>\n<li>DHCP 服务器提供</li>\n<li>DHCP 请求</li>\n<li>DHCP ACK</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"网络地址转换\"><a class=\"anchor\" href=\"#网络地址转换\">#</a> 网络地址转换</h3>\n<p>NAT Network Address Translation 网络地址转换</p>\n<p>专用网络 / 具有专用地址的网络 —— 其地址仅对该网络中的设备有意义的网络</p>\n<p>局域网的地址仅在自己内部有效。</p>\n<p>与外界通信利用<strong> NAT 转换表</strong>，记录对应的 WAN 端和 LAN 端的 IP 地址和端口号。</p>\n<p>但是会造成 NAT 穿越问题（客户端如何和网络内部的端系统建立链接）。</p>\n<h3 id=\"安全性\"><a class=\"anchor\" href=\"#安全性\">#</a> 安全性</h3>\n<h4 id=\"防火墙\"><a class=\"anchor\" href=\"#防火墙\">#</a> 防火墙</h4>\n<p>阻挡所有的 ICMP 回显请求分组</p>\n<p>基于源和目标 IP 端口号阻挡</p>\n<p>跟踪 TCP 连接</p>\n<h4 id=\"入侵检测系统\"><a class=\"anchor\" href=\"#入侵检测系统\">#</a> 入侵检测系统</h4>\n<p>检查数据报的首部字段和有效载荷，匹配数据库中的特征，如果发现匹配，则产生告警。</p>\n<h3 id=\"ipv6\"><a class=\"anchor\" href=\"#ipv6\">#</a> IPv6</h3>\n<p>IP 地址更新为 128 比特</p>\n<p>删去的字段：取消分片与重新组装（丢给端系统）、取消首部检验和（丢给链路层和运输层），这些都是为了加快网络中的 IP 转发速度，除去（甩锅）冗余的步骤</p>\n<h4 id=\"ipv4和ipv6之间如何通信\"><a class=\"anchor\" href=\"#ipv4和ipv6之间如何通信\">#</a> IPv4 和 IPv6 之间如何通信</h4>\n<p>采用<strong>隧道</strong>，比如说，两个 IPv6 的地址进行通信，可以把整个 IPv6 的数据报放到 IPv4 数据报的有效载荷字段当中。</p>\n<h2 id=\"通用转发和sdn\"><a class=\"anchor\" href=\"#通用转发和sdn\">#</a> 通用转发和 SDN</h2>\n<p>匹配 + 动作</p>\n<p>通用转发基于<strong> OpenFlow</strong> 的讨论，匹配加动作转发表在 OpenFlow 中称为<strong>流表（flow table）</strong>，它的每个表项包括：</p>\n<ol>\n<li>首部字段值的集合</li>\n<li>计数器集合</li>\n<li>当分组匹配流表项时采取的动作集合</li>\n</ol>\n<h3 id=\"匹配\"><a class=\"anchor\" href=\"#匹配\">#</a> 匹配</h3>\n<p>OpenFlow 匹配入端口、链路层字段、网络层字段、运输层字段</p>\n<h3 id=\"动作\"><a class=\"anchor\" href=\"#动作\">#</a> 动作</h3>\n<ul>\n<li>转发</li>\n<li>丢弃</li>\n<li>修改字段</li>\n</ul>\n<h2 id=\"其他\"><a class=\"anchor\" href=\"#其他\">#</a> 其他</h2>\n<p>网络层中的设备过多</p>\n<p>数量众多、功能各异的中间盒</p>\n<h3 id=\"传统方式实现网络功能的问题\"><a class=\"anchor\" href=\"#传统方式实现网络功能的问题\">#</a> 传统方式实现网络功能的问题</h3>\n<ol>\n<li>\n<p>垂直集成》昂贵，不利于创造新的生态</p>\n</li>\n<li>\n<p>分布式、固化设备功能、网络设备朱磊繁多</p>\n</li>\n<li>\n<p>管理困难</p>\n</li>\n<li>\n<p>流量工程较为困难</p>\n</li>\n</ol>\n<h3 id=\"sdn\"><a class=\"anchor\" href=\"#sdn\">#</a> SDN</h3>\n<p>SDN 远程集中，将数据平面和控制平面分离</p>\n<ol>\n<li>\n<p>水平集成</p>\n</li>\n<li>\n<p>业界生态开放，快速创新</p>\n</li>\n<li>\n<p>产业巨大</p>\n</li>\n</ol>\n",
            "tags": [
                "专业书籍",
                "计算机网络自顶向下",
                "计网"
            ]
        },
        {
            "id": "https://quas-modo.github.io/undergraduate/2022/09/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B/Lecture03-%E4%BC%A0%E8%BE%93%E5%B1%82/",
            "url": "https://quas-modo.github.io/undergraduate/2022/09/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B/Lecture03-%E4%BC%A0%E8%BE%93%E5%B1%82/",
            "title": "Lecture03-传输层",
            "date_published": "2022-09-13T09:43:01.000Z",
            "content_html": "<p>动画有助于更好地理解</p>\n<p>interactive animation speaks a thousand words</p>\n<p>断更好几天了（趴）</p>\n<p><span id=\"more\"></span></p>\n<h1 id=\"第三章-运输层\"><a class=\"anchor\" href=\"#第三章-运输层\">#</a> 第三章 运输层</h1>\n<p>在网络层的基础上增加了<strong>端口号</strong>来实现进程到进程的通信。</p>\n<h2 id=\"概述\"><a class=\"anchor\" href=\"#概述\">#</a> 概述</h2>\n<ul>\n<li>\n<p><strong>TCP</strong>：可靠的、保序的传输，提供多路复用、解复用，拥塞控制、流量控制、建立连接</p>\n</li>\n<li>\n<p><strong>UDP</strong>：不可靠的、不保序的传输，提供多路复用和解复用</p>\n</li>\n</ul>\n<p>都不提供延时保证和带宽保证，延时和带宽依赖于网络层的服务</p>\n<h2 id=\"多路复用与多路分解\"><a class=\"anchor\" href=\"#多路复用与多路分解\">#</a> 多路复用与多路分解</h2>\n<p>multiplexing and demultiplexing</p>\n<p>在源主机从不同的套接字中收集数据块，并为每个数据块封装上首部信息，从而生成报文段，然后将报文段传递到网络层，所有这些工作称<strong>多路复用</strong>。</p>\n<ul>\n<li>每个套接字有唯一标志符</li>\n<li>传输层 / 运输层报文段中包含源端口号、目的端口号、传输数据等</li>\n</ul>\n<p>将运输层报文段中的数据交付到正确的套接字的工作称为<strong>多路分解</strong>。</p>\n<p>以上可用两家小孩寄邮件类比理解。</p>\n<h3 id=\"端口号\"><a class=\"anchor\" href=\"#端口号\">#</a> 端口号</h3>\n<p>0-65535</p>\n<p>0-1023 周知端口号 / 著名端口号 well-known port number</p>\n<p>一般而言，应用程序的客户端让运输层自动地（也是透明地）分配端口号，而服务器端则分配一个特定的端口号。</p>\n<h3 id=\"面向无连接的多路复用与多路分解\"><a class=\"anchor\" href=\"#面向无连接的多路复用与多路分解\">#</a> 面向无连接的多路复用与多路分解</h3>\n<p>一个 UDP 套接字是由一个<strong>二元组</strong>全面标识的，包含一个目标 IP 地址和一个目的端口号。</p>\n<p><strong>如果两个 UDP 报文段有不同的源 IP 地址和 / 或源端口号，但具有相同的目的 IP 地址和目的端口号，那么这两个报文段将通过相同的目的套接字被定向到相同的目的进程。</strong></p>\n<h3 id=\"面向连接的多路复用与多路分解\"><a class=\"anchor\" href=\"#面向连接的多路复用与多路分解\">#</a> 面向连接的多路复用与多路分解</h3>\n<p>一个 TCP 套接字是由一个<strong>四元组</strong>全面标识的，包含源地址、源端口、目的 IP 地址、目的端口。</p>\n<p><strong>不同的源将定向到不同的目的进程。</strong></p>\n<h3 id=\"web服务器与tcp\"><a class=\"anchor\" href=\"#web服务器与tcp\">#</a> Web 服务器与 TCP</h3>\n<p>连接套接字与进程之间并非总是有着一一对应的关系。如今一些高性能的 Web 服务器通常只有一个进程，但是为每个新的客户连接创建一个具有新连接套接字的新线程。</p>\n<h2 id=\"无连接运输udp\"><a class=\"anchor\" href=\"#无连接运输udp\">#</a> 无连接运输：UDP</h2>\n<h3 id=\"udp的优点为什么要使用udp\"><a class=\"anchor\" href=\"#udp的优点为什么要使用udp\">#</a> UDP 的优点 / 为什么要使用 UDP：</h3>\n<ul>\n<li>关于发送什么数据以及何时发送的应用层控制得更为精细</li>\n<li>无须连接建立</li>\n<li>无连接状态</li>\n<li>分组首部开销小</li>\n</ul>\n<h3 id=\"udp检验和\"><a class=\"anchor\" href=\"#udp检验和\">#</a> UDP 检验和</h3>\n<p>端到端原则：某种功能必须是基于端到端的实现，“与在较高级别提供这些功能的代价相比，在较低级别设置的功能可能是冗余的或几乎没有价值的、”</p>\n<p>回卷、反码</p>\n<p>在目标地址，将四个比特字加在一起，每一位为 1，则无差错。</p>\n<h2 id=\"可靠数据传输rdt的原理\"><a class=\"anchor\" href=\"#可靠数据传输rdt的原理\">#</a> 可靠数据传输（rdt）的原理</h2>\n<p>rdt: reliable data transfer protocol</p>\n<p>双向的数据传输协议就是两个单向的数据传输协议的综合</p>\n<p>FSM Finite-State Machine</p>\n<h3 id=\"构造可靠数据传输协议\"><a class=\"anchor\" href=\"#构造可靠数据传输协议\">#</a> 构造可靠数据传输协议</h3>\n<h4 id=\"基于完全可靠信道-rdt10\"><a class=\"anchor\" href=\"#基于完全可靠信道-rdt10\">#</a> 基于完全可靠信道 rdt1.0</h4>\n<p>直接传就好了 Orz</p>\n<h4 id=\"经具有比特差错信道的可靠数据传输-rdt20\"><a class=\"anchor\" href=\"#经具有比特差错信道的可靠数据传输-rdt20\">#</a> 经具有比特差错信道的可靠数据传输 rdt2.0</h4>\n<p>ARQ Automatic Repeat reQuest 自动重传请求协议</p>\n<ul>\n<li>差错检测</li>\n<li>接收方反馈（ACK, NAK）</li>\n<li>重传</li>\n</ul>\n<p>停等（stop-wait）协议：发送方将不会发送一块新数据，除非发送方确信接收方已正确接受当前分组。</p>\n<h4 id=\"如果acknak出错-rdt21\"><a class=\"anchor\" href=\"#如果acknak出错-rdt21\">#</a> 如果 ACK/NAK 出错 -&gt; rdt2.1</h4>\n<p>增加序号 0,1</p>\n<p>根据收到的序号即可确定是否正在重传前一个发送分组</p>\n<h4 id=\"nak-free-在ack后加序号-rdt22\"><a class=\"anchor\" href=\"#nak-free-在ack后加序号-rdt22\">#</a> NAK free 在 ACK 后加序号 -&gt; rdt2.2</h4>\n<p>为后面发送多个数据做准备</p>\n<p>确认信息减少一般，协议简单</p>\n<h4 id=\"经具有比特差错的丢包信道的可靠数据传输-rdt30\"><a class=\"anchor\" href=\"#经具有比特差错的丢包信道的可靠数据传输-rdt30\">#</a> 经具有比特差错的丢包信道的可靠数据传输 rdt3.0</h4>\n<p>比特交替协议 alternating-bit protocol</p>\n<p>设置倒计数计时器 (countdown timer) ，一旦超过时间，则重传</p>\n<p>虽然可能造成冗余数据分组（duplicate data packet），但 rdt2.0 已经处理了这部分内容</p>\n<h3 id=\"流水线可靠数据传输协议\"><a class=\"anchor\" href=\"#流水线可靠数据传输协议\">#</a> 流水线可靠数据传输协议</h3>\n<p>rdt3.0 的<strong>停等协议</strong>降低了传输的性能，等待到收到回复后才进行下一步操作，链路的利用率太低。</p>\n<p>因此，开发了流水线技术，即一次传输多个分组。</p>\n<h3 id=\"回退n步go-back-n-如何处理流水线的差错恢复\"><a class=\"anchor\" href=\"#回退n步go-back-n-如何处理流水线的差错恢复\">#</a> 回退 N 步 Go-Back-N —— 如何处理流水线的差错恢复</h3>\n<p>N - window size 窗口长度</p>\n<p>sliding-window protocol 滑动窗口协议</p>\n<h4 id=\"发送方响应的事件\"><a class=\"anchor\" href=\"#发送方响应的事件\">#</a> 发送方响应的事件</h4>\n<ul>\n<li>\n<p>上层调用</p>\n</li>\n<li>\n<p>收到一个 ACK 累计确认</p>\n</li>\n<li>\n<p>超时事件</p>\n<p>如果出现超时，发送方重传所有已发送但还未被确认过的分组。</p>\n<p>如果收到一个 ACK，但仍有已发送但未被确认的分组，则定时器被重新启动。</p>\n</li>\n</ul>\n<h4 id=\"接收方\"><a class=\"anchor\" href=\"#接收方\">#</a> 接收方</h4>\n<p>接收方若收到 失序、错误分组，则丢弃该分组，并为<strong>最近按序接收的分组</strong>重新发送 ACK。</p>\n<h4 id=\"优点\"><a class=\"anchor\" href=\"#优点\">#</a> 优点</h4>\n<p>接收缓存简单</p>\n<h4 id=\"缺点\"><a class=\"anchor\" href=\"#缺点\">#</a> 缺点</h4>\n<p>单个分组的差错就能引起 GBN 重传大量分组</p>\n<p>（配套的 GBN Java 小程序好好玩</p>\n<h3 id=\"selective-repeat-sr-如何处理流水线的差错恢复\"><a class=\"anchor\" href=\"#selective-repeat-sr-如何处理流水线的差错恢复\">#</a> Selective Repeat SR —— 如何处理流水线的差错恢复</h3>\n<h4 id=\"接收方-2\"><a class=\"anchor\" href=\"#接收方-2\">#</a> 接收方</h4>\n<p>失序的分组将被缓存直到所有丢失分组（即序号更小的分组）皆被接收</p>\n<p>接收到后为<strong>接收的分组</strong>发送 ACK</p>\n<p>不在缓存范围内的分组将被丢失</p>\n<h4 id=\"发送方\"><a class=\"anchor\" href=\"#发送方\">#</a> 发送方</h4>\n<ul>\n<li>\n<p>从上层收到数据</p>\n</li>\n<li>\n<p>超时 —— 每个分组都要有自己的逻辑计时器，超时发送后只能发送一个分组。</p>\n</li>\n<li>\n<p>收到 ACK—— 窗口基序号向前移动到具有最小序号的未确认分组处，如果窗口移动了并且有序号落在窗口内的为发送分组，则发送这些分组。</p>\n</li>\n</ul>\n<p>具体可实际操作一下小程序</p>\n<p><strong>出错率低适合用 GBN，链路容量大适合用 SR</strong></p>\n<h2 id=\"面向连接的运输tcp\"><a class=\"anchor\" href=\"#面向连接的运输tcp\">#</a> 面向连接的运输：TCP</h2>\n<h3 id=\"tcp连接\"><a class=\"anchor\" href=\"#tcp连接\">#</a> TCP 连接</h3>\n<p>全双工服务 full-duplex service</p>\n<p>最大报文段长度 MSS Maximum Segment Size</p>\n<h3 id=\"tcp报文段结构\"><a class=\"anchor\" href=\"#tcp报文段结构\">#</a> TCP 报文段结构</h3>\n<p>Holy &amp;^%@! That idiot made a TCP header diagram in Lego(TM)!</p>\n<p>有趣，但孩子不玩乐高（x</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yaWdodGVvdXNpdC53b3JkcHJlc3MuY29tLzIwMTAvMDYvMjcvcHJhY3RpY2FsLXZpc3VhbC10aHJlZS1kaW1lbnNpb25hbC1wZWRhZ29neS1mb3ItaW50ZXJuZXQtcHJvdG9jb2wtcGFja2V0LWhlYWRlci1jb250cm9sLWZpZWxkcy8=\">https://righteousit.wordpress.com/2010/06/27/practical-visual-three-dimensional-pedagogy-for-internet-protocol-packet-header-control-fields/</span></p>\n<p>源端口号、目标端口、序号、确认号、首部长度、保留未用、标志字段、接收窗口、因特网检验和、紧急数据指针、选项、数据</p>\n<h4 id=\"序号和确认号\"><a class=\"anchor\" href=\"#序号和确认号\">#</a> 序号和确认号</h4>\n<p>在主机 A 的一个进程与主机 B 的一个进程的连接中，主机 A 填充进报文段的<strong>确认号</strong>是主机 A 期望从主机 B 收到的下一字节的序号。</p>\n<p><strong>累积确认</strong>：TCP 只确认该流中至第一个丢失字节为止的字节</p>\n<p><strong>捎带</strong>：对客户到服务器的数据的确认被装载在一个承载服务器到客户的数据的报文段中</p>\n<h3 id=\"往返时间的估计与超时\"><a class=\"anchor\" href=\"#往返时间的估计与超时\">#</a> 往返时间的估计与超时</h3>\n<p><strong>指数加权移动平均</strong>：根据较近的 SampleRTT 的值估计目前的平均</p>\n<p><strong>超时间隔</strong></p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>T</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>I</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>v</mi><mi>a</mi><mi>l</mi><mo>=</mo><mi>E</mi><mi>s</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>d</mi><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><mn>4</mn><mo>∗</mo><mi>D</mi><mi>e</mi><mi>v</mi><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">TimeoutInterval = EstimatedRTT + 4 * DevRTT\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></p>\n<p>（用了一些公式计算出了 EstimatedRTT 和 DevRTT，进而估算 TimeoutInterval）</p>\n<h3 id=\"可靠数据传输\"><a class=\"anchor\" href=\"#可靠数据传输\">#</a> 可靠数据传输</h3>\n<p><strong>超时间隔加倍</strong>：再次超时，超时间隔设置为原来的两倍</p>\n<p><strong>冗余 ACK</strong>：一旦收到 3 个冗余 ACK，TCP 就执行快速重传（fast retransmit）</p>\n<p><strong>TCP 是 GBN 和 SR 协议的混合体</strong></p>\n<h3 id=\"流量控制\"><a class=\"anchor\" href=\"#流量控制\">#</a> 流量控制</h3>\n<p>区分流量控制和拥塞控制。</p>\n<p><strong>流量控制</strong>是端到端的控制，例如 A 通过网络给 B 发数据，A 发送的太快导致 B 没法接收 (B 缓冲窗口过小或者处理过慢)，这时候的控制就是流量控制，原理是通过<strong>滑动窗口的大小</strong>改变来实现。 其中，rwnd 指接收窗口 receive window。</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>L</mi><mi>a</mi><mi>s</mi><mi>t</mi><mi>B</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi>S</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo>−</mo><mi>L</mi><mi>a</mi><mi>s</mi><mi>t</mi><mi>B</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi>A</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>d</mi><mo>&lt;</mo><mo>=</mo><mi>r</mi><mi>w</mi><mi>n</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">LastByteSent - LastByteAcked &lt;= rwnd\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">d</span></span></span></span></span></p>\n<p><strong>拥塞控制</strong>是 A 与 B 之间的网络发生堵塞导致传输过慢或者丢包，来不及传输。防止过多的数据注入到网络中，这样可以使网络中的路由器或链路不至于过载。拥塞控制是一个全局性的过程，涉及到所有的主机、路由器，以及与降低网络性能有关的所有因素。</p>\n<h3 id=\"tcp连接管理\"><a class=\"anchor\" href=\"#tcp连接管理\">#</a> TCP 连接管理</h3>\n<p>SYN</p>\n<p>FIN</p>\n<p>通过三次握手建立连接，两次握手会造成半连接（只有一端维护了连接）</p>\n<h2 id=\"拥塞控制原理\"><a class=\"anchor\" href=\"#拥塞控制原理\">#</a> 拥塞控制原理</h2>\n<p><strong>拥塞表现</strong>：分组丢失、延时较长</p>\n<h3 id=\"拥塞原因与代价\"><a class=\"anchor\" href=\"#拥塞原因与代价\">#</a> 拥塞原因与代价</h3>\n<ul>\n<li>当分组的到达速率接近链路容量时，分组经历巨大的排队时延</li>\n<li>发送方必须执行重传以补偿因为缓存溢出而丢失（丢弃）的分组</li>\n<li>发送方在遇到大时延时所进行的不必要重传会引起路由器利用其链路带宽转发不必要的分组副本</li>\n<li>当一个分组沿一条路径被丢弃时，每个上游路由器用于转发该分组到丢弃该分组而使用的传输容量最终被浪费调了</li>\n</ul>\n<h3 id=\"拥塞控制方法\"><a class=\"anchor\" href=\"#拥塞控制方法\">#</a> 拥塞控制方法</h3>\n<ul>\n<li>端到端拥塞控制</li>\n<li>网络辅助拥塞控制（NI 字段表示轻微拥塞，CI 字段表示拥塞指示）</li>\n</ul>\n<h2 id=\"tcp-拥塞控制\"><a class=\"anchor\" href=\"#tcp-拥塞控制\">#</a> TCP 拥塞控制</h2>\n<p>TCP 使用端到端的拥塞控制，而不是网络辅助的拥塞控制。网络辅助的拥塞控制代价过高。</p>\n<h3 id=\"指导性原则\"><a class=\"anchor\" href=\"#指导性原则\">#</a> 指导性原则</h3>\n<ol>\n<li>一个丢失的报文段意味着拥塞，因此当丢失报文段时应当降低 TCP 发送方的速率。</li>\n<li>一个确认报文段指示该网络正在向接收方交付发送方的报文段，因此，当对先前未确认报文段的确认到达时，能够增加发送方的速率。</li>\n<li>宽带检测</li>\n</ol>\n<h3 id=\"tcp拥塞控制算法\"><a class=\"anchor\" href=\"#tcp拥塞控制算法\">#</a> TCP 拥塞控制算法</h3>\n<h4 id=\"慢启动\"><a class=\"anchor\" href=\"#慢启动\">#</a> 慢启动</h4>\n<p>指数增长，每过一个 RTT，发送速率就翻番</p>\n<h4 id=\"拥塞避免\"><a class=\"anchor\" href=\"#拥塞避免\">#</a> 拥塞避免</h4>\n<p>线性增长，无论何时到达一个新的确认，就将 cwnd 增加一个 MSS 字节</p>\n<h4 id=\"快速恢复\"><a class=\"anchor\" href=\"#快速恢复\">#</a> 快速恢复</h4>\n",
            "tags": [
                "专业书籍",
                "计算机网络自顶向下",
                "计网"
            ]
        },
        {
            "id": "https://quas-modo.github.io/undergraduate/2022/09/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B/Lecture02-%E5%BA%94%E7%94%A8%E5%B1%82/",
            "url": "https://quas-modo.github.io/undergraduate/2022/09/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B/Lecture02-%E5%BA%94%E7%94%A8%E5%B1%82/",
            "title": "Lecture02-应用层",
            "date_published": "2022-09-10T16:20:37.000Z",
            "content_html": "<p>TCP 和 UDP 编程相关总结暂缺。<br />\n<span id=\"more\"></span></p>\n<h1 id=\"第二章-应用层\"><a class=\"anchor\" href=\"#第二章-应用层\">#</a> 第二章 应用层</h1>\n<h2 id=\"应用层协议原理\"><a class=\"anchor\" href=\"#应用层协议原理\">#</a> 应用层协议原理</h2>\n<h3 id=\"网络应用程序体系结构\"><a class=\"anchor\" href=\"#网络应用程序体系结构\">#</a> 网络应用程序体系结构</h3>\n<ol>\n<li>\n<p>客户 - 服务器体系结构</p>\n</li>\n<li>\n<p>P2P 体系结构</p>\n<p>主机为对等方，具有自扩展性</p>\n</li>\n<li>\n<p>C/S 和 P2P 体系结构的混合体</p>\n</li>\n</ol>\n<h3 id=\"进程通信\"><a class=\"anchor\" href=\"#进程通信\">#</a> 进程通信</h3>\n<ol>\n<li>\n<p>客户端与服务器的进程</p>\n<p>发起通信的进程被识别为客户，在会话开始时等待联系的进程是服务器</p>\n</li>\n<li>\n<p>进程与计算机网络之间的接口</p>\n<p><strong>套接字</strong>接口，也成为应用程序编程接口，是同一台主机内应用层与运输层直接的接口。</p>\n<p>层间接口必须要携带：</p>\n<ul>\n<li>传什么（要传输的报文）</li>\n<li>谁传的（IP + 端口号）</li>\n<li>传给谁（IP + 端口号）</li>\n</ul>\n</li>\n<li>\n<p>进程寻址</p>\n<ul>\n<li>TCP 四元组（源 IP、源端口号、目标 IP、目标端口号）</li>\n<li>UDP 二元组</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"可供应用程序使用的运输服务\"><a class=\"anchor\" href=\"#可供应用程序使用的运输服务\">#</a> 可供应用程序使用的运输服务</h3>\n<ol>\n<li>可靠的数据传输</li>\n<li>吞吐量</li>\n<li>定时</li>\n<li>安全性</li>\n</ol>\n<h3 id=\"因特网提供的运输服务\"><a class=\"anchor\" href=\"#因特网提供的运输服务\">#</a> 因特网提供的运输服务</h3>\n<h4 id=\"tcp\"><a class=\"anchor\" href=\"#tcp\">#</a> TCP</h4>\n<ul>\n<li>面向连接的服务</li>\n<li>可靠的数据传送服务</li>\n<li>拥塞控制</li>\n<li>流量控制</li>\n<li>SSL 加密</li>\n<li>不保证吞吐量和定时</li>\n</ul>\n<h4 id=\"udp\"><a class=\"anchor\" href=\"#udp\">#</a> UDP</h4>\n<ul>\n<li>可以区分进程，无需建立链接</li>\n<li>不可靠</li>\n<li>没有拥塞、流量控制，不保证吞吐量和定时</li>\n</ul>\n<h2 id=\"web和http\"><a class=\"anchor\" href=\"#web和http\">#</a> Web 和 HTTP</h2>\n<h3 id=\"http概况\"><a class=\"anchor\" href=\"#http概况\">#</a> HTTP 概况</h3>\n<p>HyperText Transfer Protocal, HTTP 超文本传输协议</p>\n<p>HTTP 定义了 Web 客户向 Web 服务器请求 Web 页面的方式，以及服务器向客户传送 Web 页面的方式。</p>\n<p>HTTP 使用 TCP 作为它的支撑运输协议。</p>\n<p>HTTP 是一个无状态协议，因为 HTTP 不保存关于客户的任何信息。</p>\n<h3 id=\"非持续性连接和持续连接\"><a class=\"anchor\" href=\"#非持续性连接和持续连接\">#</a> 非持续性连接和持续连接</h3>\n<ul>\n<li>\n<p>非持续连接：每个请求 / 相应对是经一个单独的 TCP 连接发送，HTTP/1.0 使用非持久连接</p>\n</li>\n<li>\n<p>持续连接：所有的请求及其相应经相同的 TCP 连接发送，HTTP/1.1 默认使用持久连接</p>\n<ul>\n<li>非流水方式的持久 HTTP（客户端在收到前一个请求的相应之后再发出下一个请求）</li>\n<li>流水方式的持久 HTTP</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"http报文格式\"><a class=\"anchor\" href=\"#http报文格式\">#</a> HTTP 报文格式</h3>\n<ol>\n<li>HTTP 请求报文\n<ul>\n<li>请求行</li>\n<li>首部行</li>\n<li>空行</li>\n<li>实体体</li>\n</ul>\n</li>\n<li>HTTP 响应报文\n<ul>\n<li>状态行</li>\n<li>首部行</li>\n<li>空行</li>\n<li>实体体</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"cookie\"><a class=\"anchor\" href=\"#cookie\">#</a> Cookie</h3>\n<p>提高 Web 服务器的性能，希望把内容和用户身份联系起来。</p>\n<p>cookie 的技术有 4 个组件：</p>\n<ol>\n<li>在 HTTP 响应报文中有一个 cookie 首部行</li>\n<li>在 HTTP 请求报文中有一个 cookie 的首部行</li>\n<li>在用户端系统中存有 cookie 组件，并由用户的浏览器进行管理</li>\n<li>位于 Web 站点的一个后端数据库</li>\n</ol>\n<h3 id=\"web缓存\"><a class=\"anchor\" href=\"#web缓存\">#</a> Web 缓存</h3>\n<p>web 缓存器也叫代理服务器</p>\n<h3 id=\"get方法\"><a class=\"anchor\" href=\"#get方法\">#</a> Get 方法</h3>\n<p><strong>缓存是为了性能，清除是为了更新</strong></p>\n<h2 id=\"因特网中的电子邮件\"><a class=\"anchor\" href=\"#因特网中的电子邮件\">#</a> 因特网中的电子邮件</h2>\n<p>SMTP</p>\n<p>POP3 - 本地管理文件夹</p>\n<p>IMAP - 远程管理文件夹</p>\n<h2 id=\"dns因特网的目录服务\"><a class=\"anchor\" href=\"#dns因特网的目录服务\">#</a> DNS：因特网的目录服务</h2>\n<p>DNS - Domain Name System 域名系统</p>\n<p>DNS 协议运行在 UDP 之上，使用 53 号端口。</p>\n<h3 id=\"目的\"><a class=\"anchor\" href=\"#目的\">#</a> 目的</h3>\n<p>实现域名和 IP 地址的转换</p>\n<p>主机别名</p>\n<p>邮件服务器别名</p>\n<p>负载分配</p>\n<h3 id=\"集中式设计\"><a class=\"anchor\" href=\"#集中式设计\">#</a> 集中式设计</h3>\n<ul>\n<li>单点故障</li>\n<li>通信容量</li>\n<li>远距离的集中式数据库</li>\n<li>维护</li>\n</ul>\n<h3 id=\"分布式-层次数据库\"><a class=\"anchor\" href=\"#分布式-层次数据库\">#</a> 分布式、层次数据库</h3>\n<ul>\n<li>根 DNS 服务器</li>\n<li>顶级域 DNS 服务器</li>\n<li>权威 DNS 服务器</li>\n</ul>\n<p>域与物理划分无关，是逻辑的划分</p>\n<h3 id=\"查询\"><a class=\"anchor\" href=\"#查询\">#</a> 查询</h3>\n<p>迭代查询</p>\n<p>递归查询</p>\n<h3 id=\"报文\"><a class=\"anchor\" href=\"#报文\">#</a> 报文</h3>\n<p>DNS 查询和响应的报文格式相同</p>\n<h2 id=\"p2p文件分发\"><a class=\"anchor\" href=\"#p2p文件分发\">#</a> P2P 文件分发</h2>\n<p>可扩展性好，随着用户数增加，最短分配时间上升得较慢</p>\n<p>BitTorrent 是一种用于文件分发的流行的 P2P 协议，参与一个特定文件夹分发的所有对等方的集合被称为一个洪流。</p>\n<h3 id=\"最稀缺优先\"><a class=\"anchor\" href=\"#最稀缺优先\">#</a> 最稀缺优先</h3>\n<p>首先请求最稀缺的块</p>\n<h3 id=\"一报还一报\"><a class=\"anchor\" href=\"#一报还一报\">#</a> 一报还一报</h3>\n<p>向给自己提供最大宽带的服务发送块</p>\n<p>每个 30s，随机选择其他 peer 发送块</p>\n<h3 id=\"结构\"><a class=\"anchor\" href=\"#结构\">#</a> 结构</h3>\n<p>集中</p>\n<p>分散</p>\n<p>半分散</p>\n<h2 id=\"视频流和内容分发网\"><a class=\"anchor\" href=\"#视频流和内容分发网\">#</a> 视频流和内容分发网</h2>\n<h3 id=\"dash\"><a class=\"anchor\" href=\"#dash\">#</a> DASH</h3>\n<p>Dynamic Adaptive Streaming over HTTP 经 HTTP 的动态适应性流</p>\n<p>服务器：将视频文件分割成多个块，每个块独立存储，编码于不同码率，告示文件提供不同块的 URL</p>\n<p>客户端：获取告示文件，测量服务器到客户端的带宽，选择合适的码率的编码块</p>\n<h3 id=\"内容分发网cdn\"><a class=\"anchor\" href=\"#内容分发网cdn\">#</a> 内容分发网 CDN</h3>\n<p>Content Distribution Network CDN</p>\n<p>做一些 copy</p>\n<h2 id=\"套接字编程\"><a class=\"anchor\" href=\"#套接字编程\">#</a> 套接字编程</h2>\n<h3 id=\"tcp编程\"><a class=\"anchor\" href=\"#tcp编程\">#</a> TCP 编程</h3>\n<h3 id=\"udp编程\"><a class=\"anchor\" href=\"#udp编程\">#</a> UDP 编程</h3>\n",
            "tags": [
                "专业书籍",
                "计算机网络自顶向下",
                "计网"
            ]
        },
        {
            "id": "https://quas-modo.github.io/undergraduate/2022/09/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B/Lecture01/",
            "url": "https://quas-modo.github.io/undergraduate/2022/09/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B/Lecture01/",
            "title": "Lecture01",
            "date_published": "2022-09-09T01:54:05.000Z",
            "content_html": "<p>本系列参考中科大郑铨老师网课和《计算机网络：自顶向下》整理。</p>\n<p>因为是听完课很久之后整理的，所以只整理了纲要（趴</p>\n<p><span id=\"more\"></span></p>\n<h1 id=\"第一章-概论\"><a class=\"anchor\" href=\"#第一章-概论\">#</a> 第一章 概论</h1>\n<h2 id=\"什么是internet\"><a class=\"anchor\" href=\"#什么是internet\">#</a> 什么是 Internet？</h2>\n<h3 id=\"从构成因特网的基本硬件和软件组件理解\"><a class=\"anchor\" href=\"#从构成因特网的基本硬件和软件组件理解\">#</a> 从构成因特网的基本硬件和软件组件理解</h3>\n<ul>\n<li>\n<p><strong>节点</strong></p>\n<ul>\n<li>主机及其上运行的应用程序</li>\n<li>路由器、交换机等网络交换设备</li>\n</ul>\n</li>\n<li>\n<p><strong>边</strong></p>\n<ul>\n<li>接入网链路：主机连接到互联网的链路</li>\n<li>主干链路：路由器间的链路</li>\n</ul>\n</li>\n<li>\n<p><strong>协议</strong></p>\n</li>\n</ul>\n<h3 id=\"从服务角度-分布式应用提供服务的联网基础设施理解\"><a class=\"anchor\" href=\"#从服务角度-分布式应用提供服务的联网基础设施理解\">#</a> 从服务角度、分布式应用提供服务的联网基础设施理解</h3>\n<ul>\n<li>使用通信设施进行通信的分布式应用</li>\n<li>通信基础设施为 apps 提供编程接口（通信服务）</li>\n</ul>\n<h2 id=\"什么是协议\"><a class=\"anchor\" href=\"#什么是协议\">#</a> 什么是协议？</h2>\n<p>协议定义了在两个或多个通信实体之间交换的报文的<strong>格式和顺序</strong>，以及报文发送和 / 或接收一条报文或其他事件所采取的<strong>动作</strong>。</p>\n<h2 id=\"网络结构\"><a class=\"anchor\" href=\"#网络结构\">#</a> 网络结构</h2>\n<ul>\n<li>\n<p>网络边缘</p>\n<p>端系统</p>\n<ul>\n<li>客户端 / 服务器模式</li>\n<li>对等（peer-peer）模式</li>\n</ul>\n</li>\n<li>\n<p>网络核心</p>\n<ul>\n<li>\n<p>电路交换</p>\n<p>频分复用（FDM，Frequency-Division Multiplexing）和时分复用（TDM, Time-Division Multiplexing）</p>\n<p>独享资源，不共享，用于电话，不适合计算机之间的通信</p>\n</li>\n<li>\n<p>分组交换</p>\n<p>储存和转发、时延（节点处理时延、排队时延、传输时延、传播时延）和分组丢失、转发表和路由选择协议</p>\n<ul>\n<li>数据报网络</li>\n<li>虚电路网络</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>接入网</p>\n<ul>\n<li>家庭接入：DSL（数字用户线）、电缆、FTTH（光纤到户）、拨号和卫星</li>\n<li>企业（和家庭）接入：以太网和 WiFi</li>\n<li>广域无线接入：3G 和 LTE</li>\n</ul>\n</li>\n<li>\n<p>物理媒体</p>\n<ul>\n<li>导引型媒体\n<ul>\n<li>双绞铜线</li>\n<li>同轴电缆</li>\n<li>光纤</li>\n</ul>\n</li>\n<li>非导引型媒体\n<ul>\n<li>陆地无线电信道</li>\n<li>卫星无线电信道</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"internet结构和isp\"><a class=\"anchor\" href=\"#internet结构和isp\">#</a> Internet 结构和 ISP</h2>\n<p>互联网络结构：网络的网络</p>\n<p>端系统通过接入 ISPs（Internet Service Providers）连接到互联网中</p>\n<p>因特网内容服务商（ICP, Internet Content Providers）会构建自己的网络</p>\n<h2 id=\"协议层次及其服务模型\"><a class=\"anchor\" href=\"#协议层次及其服务模型\">#</a> 协议层次及其服务模型</h2>\n<p>上层依赖下层提供的服务，并创造新的服务和功能</p>\n<ol>\n<li>\n<p>应用层</p>\n<p>为人类用户或者其他用户进程提供网络应用服务</p>\n</li>\n<li>\n<p>运输层</p>\n<p>主机和主机的数据传输</p>\n<p>细分网络层的服务，进程到进程（port）</p>\n<p>将不可靠的通信变成可靠的通信</p>\n</li>\n<li>\n<p>网络层</p>\n<p>为数据报从源到目的选择路由</p>\n<p>主机主机之间的通信，端到端通信，不可靠</p>\n</li>\n<li>\n<p>链路层</p>\n<p>point to point 相邻网络节点间的数据传输</p>\n</li>\n<li>\n<p>物理层</p>\n<p>在线路上传送 bit</p>\n</li>\n</ol>\n",
            "tags": [
                "专业书籍",
                "计算机网络自顶向下",
                "计网"
            ]
        },
        {
            "id": "https://quas-modo.github.io/undergraduate/2022/09/08/NJUSE/internet-computer/Lecture01-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0/",
            "url": "https://quas-modo.github.io/undergraduate/2022/09/08/NJUSE/internet-computer/Lecture01-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0/",
            "title": "Lecture01-计算机网络概述",
            "date_published": "2022-09-08T11:49:55.000Z",
            "content_html": "<p>鉴于 zhy 妈妈的笔记过于全面，此系列笔记仅作一些补充和重点记忆强化。</p>\n<p><span id=\"more\"></span></p>\n<h1 id=\"重点笔记\"><a class=\"anchor\" href=\"#重点笔记\">#</a> 重点笔记</h1>\n<h2 id=\"易混的英文单词\"><a class=\"anchor\" href=\"#易混的英文单词\">#</a> 易混的英文单词</h2>\n<table>\n<thead>\n<tr>\n<th>层</th>\n<th>单元英文</th>\n<th>单元中文</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>网络层</td>\n<td>packets</td>\n<td>报文</td>\n</tr>\n<tr>\n<td>数据链路层</td>\n<td>frames</td>\n<td>帧</td>\n</tr>\n<tr>\n<td>运输层</td>\n<td>segments</td>\n<td>段</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"osi-和-tcpip模型对比\"><a class=\"anchor\" href=\"#osi-和-tcpip模型对比\">#</a> OSI 和 TCP/IP 模型对比</h2>\n<table>\n<thead>\n<tr>\n<th>层次</th>\n<th>特点</th>\n<th>关键字</th>\n<th>备注</th>\n<th>对应的层</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>物理层</td>\n<td>二进制传输</td>\n<td>信号和介质</td>\n<td>属于数据流层</td>\n<td>网络接入层</td>\n</tr>\n<tr>\n<td>数据链路层</td>\n<td>介质访问</td>\n<td>帧和介质访问控制</td>\n<td>属于数据流层</td>\n<td>网络接入层</td>\n</tr>\n<tr>\n<td>网络层</td>\n<td>路径选择</td>\n<td>路径选择，最优路径</td>\n<td>属于数据流层</td>\n<td>互联网层</td>\n</tr>\n<tr>\n<td>传输层</td>\n<td>终端到终端通信</td>\n<td>可靠性，流控制，错误纠正</td>\n<td>属于数据流层</td>\n<td>传输层</td>\n</tr>\n<tr>\n<td>会话层</td>\n<td>进程之间通信如何用户交流</td>\n<td>对话和交流</td>\n<td>属于应用层</td>\n<td>应用层</td>\n</tr>\n<tr>\n<td>展示层</td>\n<td>展示</td>\n<td>标准</td>\n<td>属于应用层</td>\n<td>应用层</td>\n</tr>\n<tr>\n<td>应用层</td>\n<td>给用户展示交互接口</td>\n<td>浏览</td>\n<td>属于应用层</td>\n<td>应用层</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"网络拓扑topology\"><a class=\"anchor\" href=\"#网络拓扑topology\">#</a> 网络拓扑 Topology</h2>\n<p>分为物理拓扑和逻辑拓扑</p>\n<p>总线 bus</p>\n<p>环型 ring   双环 dual ring</p>\n<p>星型 star</p>\n<p>树型 tree</p>\n<p>渔网型 complete（mesh）</p>\n<p>蜂窝型 cellular 非常低效</p>\n<h2 id=\"网络设备\"><a class=\"anchor\" href=\"#网络设备\">#</a> 网络设备</h2>\n<table>\n<thead>\n<tr>\n<th>名称</th>\n<th>中文</th>\n<th>层级</th>\n<th>应用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>media</td>\n<td>介质</td>\n<td>第一层</td>\n<td>携带信息流</td>\n</tr>\n<tr>\n<td>repeaters</td>\n<td>中继器</td>\n<td>第一层</td>\n<td>延长网络的长度，转发，不做过滤</td>\n</tr>\n<tr>\n<td>hubs</td>\n<td>集线器</td>\n<td>第一层</td>\n<td>不解决冲突，转发，不做过滤</td>\n</tr>\n<tr>\n<td>bridges</td>\n<td>网桥</td>\n<td>第二层</td>\n<td>在 lan 上过滤流量，创建冲突域</td>\n</tr>\n<tr>\n<td>switches</td>\n<td><strong>交换机</strong></td>\n<td>第二层</td>\n<td>结合网桥和交换机</td>\n</tr>\n<tr>\n<td>routers</td>\n<td><strong>路由器</strong></td>\n<td>第三层</td>\n<td>路径选择，ip 逻辑划分，切换到最佳路由</td>\n</tr>\n</tbody>\n</table>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221007092506024.png\" alt=\"image-20221007092506024\" /></p>\n<p>hubs 总线式连接</p>\n<p>交换机 星型连接</p>\n<h1 id=\"计算机互联网及其模型\"><a class=\"anchor\" href=\"#计算机互联网及其模型\">#</a> 计算机互联网及其模型</h1>\n<h2 id=\"overview-of-computer-network\"><a class=\"anchor\" href=\"#overview-of-computer-network\">#</a> Overview of Computer Network</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205164819506.png\" alt=\"image-20221205164819506\" /></p>\n<h3 id=\"data-networks-of-classifications\"><a class=\"anchor\" href=\"#data-networks-of-classifications\">#</a> data networks of classifications</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205164442393.png\" alt=\"image-20221205164442393\" /></p>\n<ol>\n<li>局域网，LAN，Local Area Networks\n<ul>\n<li>作用范围比较窄</li>\n<li>多用户同时复用链路介质</li>\n<li>网络性能比较高 (一般是一个公司来管理处理，可以达到 GPS 甚至是 10GPS)</li>\n<li>出错率相对比较容易控制 (低)</li>\n</ul>\n</li>\n<li>广域网，WAN，Wide Area Networks\n<ul>\n<li>在比较大的地理范围上进行连接</li>\n<li>要么串行连接 (serial links)，要么光链路连接 (optical links)</li>\n<li>传统上，传输速率比较低，因为一般是多公司管理，标准和介质等都不同</li>\n<li>出错率相对比较高</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"lan-devices\"><a class=\"anchor\" href=\"#lan-devices\">#</a> LAN Devices</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205164622432.png\" alt=\"image-20221205164622432\" /></p>\n<ol>\n<li>Hub 集线器 —— 工作在第一层。多端口中继器，连接 PC。重复信号</li>\n<li>Bridge 网桥 —— 工作在第二层，将局域网分段，进行 MAC 地址的计算</li>\n<li>Switch 交换机 —— 工作在第二层，多端口网桥，全带宽，大规模集成电路实现【相对于网桥的优点】</li>\n<li>Router 路由器 —— 工作在第三层，路径选择，分组交换</li>\n</ol>\n<h4 id=\"wan-devices\"><a class=\"anchor\" href=\"#wan-devices\">#</a> WAN Devices</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205164714100.png\" alt=\"image-20221205164714100\" /></p>\n<ol>\n<li>\n<p>路由器 —— 路径选择、分组交换</p>\n</li>\n<li>\n<p>Modem CSU/DSU TA/NT1 (点对点连接终端设备)</p>\n<p>CSU/DSU digital-interface device used to connect data terminal equipment (DTE), such as a router to a digital circuit, such as a Digital Signal 1 (DS1) T1 line.</p>\n<ul>\n<li>有 CSU 的功能 channel service unit——The channel service unit (CSU) is responsible for the connection to the telecommunication network 将终端用户和本地数字电话环路相连接</li>\n<li>有 DSU 的功能 data service unit ——the data service unit (DSU) is responsible for managing the interface with the DTE 把终端上物理层适配到通讯层上：模拟信号到数字信号进行转换</li>\n<li>TA/NT1—— 终端适配器和网络适配器</li>\n<li>模拟到数字（analog 模拟）</li>\n<li>远端局域网链接</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"lanwan-services\"><a class=\"anchor\" href=\"#lanwan-services\">#</a> LAN/WAN Services</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205170052016.png\" alt=\"image-20221205170052016\" /></p>\n<h3 id=\"internet-history\"><a class=\"anchor\" href=\"#internet-history\">#</a> Internet History</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205170127521.png\" alt=\"image-20221205170127521\" /></p>\n<h3 id=\"internet-with-multi-layer-isp-structure\"><a class=\"anchor\" href=\"#internet-with-multi-layer-isp-structure\">#</a> Internet with Multi-layer ISP structure</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205170237775.png\" alt=\"image-20221205170237775\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205170251358.png\" alt=\"image-20221205170251358\" /></p>\n<p>ISP (Internet Service Providers) 互联网服务提供商</p>\n<p>ICP (Internet Content Provider) 互联网内容提供商，不提供接入服务</p>\n<p>NAP (Network Access Point): 第一二层之间的接入点，也可以是 google (大公司) 直接和第一层 ISP 进行链接</p>\n<p>第一层 ISP 是核心层，主要负责远距离连通，这种多层 ISP 结构可以将大量的流量本地化。在低层次的 ISP 可以解决的问题就不进入上一层进行解决，将大量的流量分流。</p>\n<h3 id=\"basic-concepts\"><a class=\"anchor\" href=\"#basic-concepts\">#</a> Basic Concepts</h3>\n<h4 id=\"data\"><a class=\"anchor\" href=\"#data\">#</a> Data</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205170625080.png\" alt=\"image-20221205170625080\" /></p>\n<h4 id=\"data-packet\"><a class=\"anchor\" href=\"#data-packet\">#</a> Data Packet</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205170650722.png\" alt=\"image-20221205170650722\" /></p>\n<table>\n<thead>\n<tr>\n<th>层</th>\n<th>单元英文</th>\n<th>单元中文</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>网络层</td>\n<td>packets</td>\n<td>报文</td>\n</tr>\n<tr>\n<td>数据链路层</td>\n<td>frames</td>\n<td>帧</td>\n</tr>\n<tr>\n<td>运输层</td>\n<td>segments</td>\n<td>段</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"protocol\"><a class=\"anchor\" href=\"#protocol\">#</a> Protocol</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205170803254.png\" alt=\"image-20221205170803254\" /></p>\n<h4 id=\"source-and-destination\"><a class=\"anchor\" href=\"#source-and-destination\">#</a> source and destination</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205170827799.png\" alt=\"image-20221205170827799\" /></p>\n<h4 id=\"media-types\"><a class=\"anchor\" href=\"#media-types\">#</a> Media Types</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205170850296.png\" alt=\"image-20221205170850296\" /></p>\n<p>传输方式</p>\n<ol>\n<li>电缆方式\n<ul>\n<li>铜轴电缆方式</li>\n<li>双绞线方式</li>\n</ul>\n</li>\n<li>光缆方式：相对比较稳定，高速率传输都是用光缆。</li>\n<li>空气方式</li>\n</ol>\n<h4 id=\"digital-bandwidth-带宽\"><a class=\"anchor\" href=\"#digital-bandwidth-带宽\">#</a> Digital Bandwidth 带宽</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205171032640.png\" alt=\"image-20221205171032640\" /></p>\n<h4 id=\"throughput-吞吐量\"><a class=\"anchor\" href=\"#throughput-吞吐量\">#</a> throughput 吞吐量</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205171126428.png\" alt=\"image-20221205171126428\" /></p>\n<h2 id=\"osi-reference-model\"><a class=\"anchor\" href=\"#osi-reference-model\">#</a> OSI Reference Model</h2>\n<h3 id=\"概述\"><a class=\"anchor\" href=\"#概述\">#</a> 概述</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205171331468.png\" alt=\"image-20221205171331468\" /></p>\n<h3 id=\"层次重要\"><a class=\"anchor\" href=\"#层次重要\">#</a> 层次（重要）</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205171439821.png\" alt=\"image-20221205171439821\" /></p>\n<h3 id=\"原因-why-al-layered-model\"><a class=\"anchor\" href=\"#原因-why-al-layered-model\">#</a> 原因 Why al layered model?</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205171652270.png\" alt=\"image-20221205171652270\" /></p>\n<h3 id=\"34\"><a class=\"anchor\" href=\"#34\">#</a> 3+4</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205171814839.png\" alt=\"image-20221205171814839\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205171838094.png\" alt=\"image-20221205171838094\" /></p>\n<table>\n<thead>\n<tr>\n<th>层次</th>\n<th>特点</th>\n<th>关键字</th>\n<th>备注</th>\n<th>对应的层</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>the physical layer 物理层</td>\n<td>二进制传输</td>\n<td>signal and media 信号和介质</td>\n<td>属于数据流层</td>\n<td>网络接入层</td>\n</tr>\n<tr>\n<td>the data link layer 数据链路层</td>\n<td>介质访问</td>\n<td>frame, media access control 帧和介质访问控制</td>\n<td>属于数据流层</td>\n<td>网络接入层</td>\n</tr>\n<tr>\n<td>the network layer 网络层</td>\n<td>路径选择</td>\n<td>path selection,routing, addressing 路径选择，最优路径</td>\n<td>属于数据流层</td>\n<td>互联网层</td>\n</tr>\n<tr>\n<td>the transport layer 传输层</td>\n<td>终端到终端通信</td>\n<td>reliability, flow control, error correction 可靠性，流控制，错误纠正</td>\n<td>属于数据流层</td>\n<td>传输层</td>\n</tr>\n<tr>\n<td>the session layer 会话层</td>\n<td>进程之间通信如何用户交流</td>\n<td>dialog and conversations 对话和交流</td>\n<td>属于应用层</td>\n<td>应用层</td>\n</tr>\n<tr>\n<td>the presentation layer 展示层</td>\n<td>展示</td>\n<td>common format 标准</td>\n<td>属于应用层</td>\n<td>应用层</td>\n</tr>\n<tr>\n<td>the application layer 应用层</td>\n<td>给用户展示交互接口</td>\n<td>broswer 浏览</td>\n<td>属于应用层</td>\n<td>应用层</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"layer1-the-physical-layer\"><a class=\"anchor\" href=\"#layer1-the-physical-layer\">#</a> Layer1: the Physical Layer</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205184459680.png\" alt=\"image-20221205184459680\" /></p>\n<p>关键词：<strong>信号和介质</strong></p>\n<ol>\n<li>\n<p>定义终端系统 (包括介质 media) 之间链路的电气和功能规范 (specifications)</p>\n</li>\n<li>\n<p>定义电压电平 (voltage levels)、电压变化的定时 (timing of voltage changes)、物理数据速率、最大传输距离、物理连接器和其他类似属性。</p>\n</li>\n<li>\n<p>特点：对于信号不管理，对于信号正确性不做判断，只传递信号。</p>\n</li>\n</ol>\n<h4 id=\"layer-2the-data-link-layer-数据链路层\"><a class=\"anchor\" href=\"#layer-2the-data-link-layer-数据链路层\">#</a> Layer 2:The Data Link Layer 数据链路层</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205185000717.png\" alt=\"image-20221205185000717\" /></p>\n<p>关键词:<strong> 帧和介质访问控制</strong></p>\n<ol>\n<li>通过物理链路提供<strong>可靠</strong>的数据传输</li>\n<li>涉及<strong>物理</strong> (而不是逻辑) 寻址、网络拓扑、网络访问、错误通知、帧的有序传递和流控制，调节链路使用 (涉及到一系列电路控制)</li>\n<li>和第一层区别：需要<strong>检查电信号的正确性</strong>，点对点的线路的链接，比如 A-B 之间的链接</li>\n<li>几个数据链路层：A-B,B-C, 如果在两个链路则两个，反之则一个</li>\n</ol>\n<h4 id=\"layer-3the-network-网络层\"><a class=\"anchor\" href=\"#layer-3the-network-网络层\">#</a> Layer 3:The NetWork 网络层</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205185111613.png\" alt=\"image-20221205185111613\" /></p>\n<p>关键词:<strong> 路径选择，最优路径</strong>，基于逻辑 **IP * 地址的路径选择、路由和寻址，第三层要基于 protocol 生成路由表。</p>\n<ol>\n<li>在路由发生的两个终端系统之间提供连接和路径选择</li>\n<li>它们 (终端设备) 可能位于地理上 (geographically) 分离的网络上</li>\n<li>和第二层区别:\n<ul>\n<li>第二层只涉及到物理链路上点对点</li>\n<li>第三层上实现的是很多链路上的数据连通和传输。可以跨很远，在广域网上进行链路控制 (逻辑电路控制)。</li>\n</ul>\n</li>\n<li>IP 地址：逻辑地址，由本层分发 IP 地址。</li>\n<li>基于 Packets（报文）进行逻辑数据的管理。</li>\n</ol>\n<h4 id=\"layer-4the-transport-layer-运输层\"><a class=\"anchor\" href=\"#layer-4the-transport-layer-运输层\">#</a> Layer 4:The Transport Layer 运输层</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205185148208.png\" alt=\"image-20221205185148208\" /></p>\n<p>关键词:<strong> 可靠性，流控制，错误纠正</strong></p>\n<ol>\n<li>将数据分段并重新组合 (reassembles) 为数据流</li>\n<li>关于如何在网络上实现可靠的传输</li>\n<li>负责终端结点之间的可靠网络通信，并为虚拟电路的建立、维护和终止、传输故障检测和恢复以及信息流控制提供机制</li>\n<li>和第三层区别:\n<ul>\n<li>第三层实现设备到设备之间的连接，但是我们的操作系统是分时操作系统，需要网络系统进行分时处理，保证为对应的数据进程转发正确的数据。</li>\n<li>复杂数据校验交给终端设备，而不是中间设备，中间设备能够完成转发即可，降低工程量</li>\n<li>数据错误：请求第三层 (下层) 重传</li>\n<li>互相协商：调整数据传输效率</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"the-layer-5the-session-layer-会话层\"><a class=\"anchor\" href=\"#the-layer-5the-session-layer-会话层\">#</a> The Layer 5:The Session Layer 会话层</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205185240403.png\" alt=\"image-20221205185240403\" /></p>\n<p>关键词:<strong> 对话和交流</strong></p>\n<ol>\n<li>建立、管理和终止通信主机之间的会话</li>\n<li>同步表示层实体之间的对话框并管理其数据交换</li>\n<li>提供高效的数据传输、服务类别以及会话、表示和应用层问题的异常报告</li>\n<li>管理表示层实体之间的数据交换</li>\n<li>和前四层相比:\n<ul>\n<li>前四层不能处理具体的细节，所以需要我们在应用程序中完成应用的会话管理。</li>\n<li>checkpoint: 在相应时间检查数据是否同步。</li>\n<li>多进程的逻辑控制。</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"the-layer-6the-presentation-layer-表示层\"><a class=\"anchor\" href=\"#the-layer-6the-presentation-layer-表示层\">#</a> The Layer 6:The Presentation Layer 表示层</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205185255539.png\" alt=\"image-20221205185255539\" /></p>\n<p>关键词:<strong> 标准</strong>，不同标准有可能出现歧义</p>\n<ol>\n<li>确保一个系统的应用层发送的信息可以被另一个系统的应用层读取</li>\n<li>使用通用数据表示格式在多个数据表示格式之间转换</li>\n<li>关注数据结构和数据传输语法 (syntax) 的协商</li>\n<li>负责压缩和加密，防止泄密事情的出现。</li>\n</ol>\n<h4 id=\"layer-7-the-application-layer-应用层\"><a class=\"anchor\" href=\"#layer-7-the-application-layer-应用层\">#</a> Layer 7: The Application Layer 应用层</h4>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205185310352.png\" alt=\"image-20221205185310352\" /></p>\n<p>关键词:<strong> 浏览</strong>，主要处理用户界面，将操作封装成机器可以理解的形式</p>\n<ol>\n<li>最接近用户的一层</li>\n<li>为用户应用程序提供网络服务</li>\n<li>不向任何其他 OSI 层提供服务</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205172339098.png\" alt=\"image-20221205172339098\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205172400807.png\" alt=\"image-20221205172400807\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205172428249.png\" alt=\"image-20221205172428249\" /></p>\n<h2 id=\"tcpip-model\"><a class=\"anchor\" href=\"#tcpip-model\">#</a> TCP/IP Model</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205172512975.png\" alt=\"image-20221205172512975\" /></p>\n<p>美国国防部 (DoD,Department of Defense)</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205172626659.png\" alt=\"image-20221205172626659\" /></p>\n<h3 id=\"application应用层\"><a class=\"anchor\" href=\"#application应用层\">#</a> Application 应用层</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205185409442.png\" alt=\"image-20221205185409442\" /></p>\n<ol>\n<li>\n<p>处理高级协议、表示 (representation)、编码 (encoding) 和会话控制 (session control) 问题，包含 7 层上三层【应用层、表示层、会话层】的全部功能</p>\n</li>\n<li>\n<p>TCP/IP 将所有与应用程序相关的问题合并到一个层中，并确保将这些数据正确打包到下一层</p>\n</li>\n</ol>\n<h3 id=\"transport-传输层-tcpudp\"><a class=\"anchor\" href=\"#transport-传输层-tcpudp\">#</a> Transport 传输层 TCP/UDP</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205185417496.png\" alt=\"image-20221205185417496\" /></p>\n<ol>\n<li>处理服务质量的可靠性、流程控制和错误纠正问题。\n<ul>\n<li>传输控制协议 (TCP, Transmission Control Protocol): 代价比较大，效率比较低</li>\n<li>用户数据报协议 (UDP, User Datagram Protocol)</li>\n<li>它将应用层信息打包成称为段 segments 的单元</li>\n</ul>\n</li>\n<li>对应 OSI 的第 4 层：传输层</li>\n</ol>\n<h3 id=\"internet-ip\"><a class=\"anchor\" href=\"#internet-ip\">#</a> Internet IP</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205185424251.png\" alt=\"image-20221205185424251\" /></p>\n<ol>\n<li>\n<p>目的：从互联网上的任何网络发送源包，使它们独立于路径和网络到达目的地</p>\n</li>\n<li>\n<p>最佳路径确定和分组交换发生在这一层</p>\n</li>\n<li>\n<p>网际互联协议 (IP,Internet protocol)</p>\n</li>\n<li>\n<p>和 OSI 的第三层：网络层对应，报文 packets 从一方发送给另一方，报文传输经过路由器进行路径选择</p>\n</li>\n</ol>\n<h3 id=\"network-access-host-to-network-网络接入层\"><a class=\"anchor\" href=\"#network-access-host-to-network-网络接入层\">#</a> Network Access /host-to-network 网络接入层</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205185431692.png\" alt=\"image-20221205185431692\" /></p>\n<ol>\n<li>\n<p>也称为主机到网络层。</p>\n<ul>\n<li>\n<p>合并了 OSI 下面两层：物理层和数据链路层</p>\n</li>\n<li>\n<p>完成物理实现和物理介质控制</p>\n</li>\n</ul>\n</li>\n<li>\n<p>它涉及到 IP 数据包实际建立一个物理链路，然后再建立另一个物理链路所需的所有问题。</p>\n</li>\n<li>\n<p>它包括局域网和广域网的技术细节，以及 OSI 物理层和数据链路层的所有细节</p>\n</li>\n</ol>\n<h3 id=\"常见的tcpip-协议\"><a class=\"anchor\" href=\"#常见的tcpip-协议\">#</a> 常见的 TCP/IP 协议</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205193912670.png\" alt=\"image-20221205193912670\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205193924098.png\" alt=\"image-20221205193924098\" /></p>\n<table>\n<thead>\n<tr>\n<th>协议名称</th>\n<th>协议全称</th>\n<th>中文名</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>FTP</td>\n<td>File Transfer Protocol</td>\n<td>文件传输协议</td>\n<td>-</td>\n</tr>\n<tr>\n<td>HTTP</td>\n<td>Hypertext Transfer Protocol</td>\n<td>超文本传输协议</td>\n<td>主要用于浏览器</td>\n</tr>\n<tr>\n<td>SMTP</td>\n<td>Simple Mail Transfer protocol</td>\n<td>简单邮件<strong>发送</strong>协议</td>\n<td>注意是发送</td>\n</tr>\n<tr>\n<td>DNS</td>\n<td>Domain Name System</td>\n<td>域名解析系统</td>\n<td>将域名解析成 IP 地址</td>\n</tr>\n<tr>\n<td>TFTP</td>\n<td>Trivial File Transfer Protocol</td>\n<td>普通文件传输协议</td>\n<td>基于 UDP，在局域网发送，关于较小的文件的发送</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"tcpip-and-osi\"><a class=\"anchor\" href=\"#tcpip-and-osi\">#</a> TCP/IP and  OSI</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205172828862.png\" alt=\"image-20221205172828862\" /></p>\n<ol>\n<li>两者都有层次，网络专业人员需要知道两者，都通过分层的方案来完成具体的实现</li>\n<li>两者都有应用层，尽管它们包含非常不同的服务</li>\n<li>两者都有相同的传输层和网络层</li>\n<li>都采用分组交换 (非电路交换) 技术</li>\n<li>OSI 是基于报文交换来进行实现的，TCP/IP 也是基于报文交换来完成实现的。</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205172918008.png\" alt=\"image-20221205172918008\" /></p>\n<ol>\n<li>TCP/IP 看起来更简单，因为它有更少的层</li>\n<li><strong>TCP/IP 协议是 Internet 发展的标准，因此 TCP/IP 模型正是因为它的协议才获得了可信性。</strong></li>\n<li>通常网络不是建立在 OSI 协议之上的，即使 OSI 模型被用作指南。</li>\n<li><strong>TCP/IP 标准是大家都在使用的标准的。(实施标准)</strong>，5 层和 7 层都只是讲课使用的</li>\n<li>本课程我们一般使用<strong> 5 层</strong>来进行分割讲解。</li>\n</ol>\n<h2 id=\"network-topology\"><a class=\"anchor\" href=\"#network-topology\">#</a> Network Topology</h2>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205172958683.png\" alt=\"image-20221205172958683\" /></p>\n<ul>\n<li>Physical topology</li>\n<li>Logical topology - token passing</li>\n</ul>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205173112068.png\" alt=\"image-20221205173112068\" /></p>\n<h3 id=\"总线bus\"><a class=\"anchor\" href=\"#总线bus\">#</a> 总线 bus</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205195348133.png\" alt=\"image-20221205195348133\" /></p>\n<ol>\n<li>物理角度：每个主机都连接到一条公用线 (总线)。\n<ul>\n<li>优点：所有主机都可以直接通信。</li>\n<li>缺点：电缆断开会使主机彼此断开连接。</li>\n<li>也就是说总线是很重要的，总线一旦断开是不能够通信的，也是不可以分成多段总线进行处理 (在未处理的总线上会在断开的地方，反射电信号，形成电路震荡)</li>\n</ul>\n</li>\n<li>逻辑角度：每个网络设备都可以看到来自所有其他设备的所有信号，实际上是<strong>广播式</strong>传播</li>\n<li>优点：比较简单，所有的设备都可以监听到总线的信号。</li>\n<li>缺点:\n<ol>\n<li>信号冲突，需要进行复杂的介质访问权限控制来保证通信正常</li>\n<li>如果一处断开，则全部无法进行网络传输</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"环型ring-双环dual-ring\"><a class=\"anchor\" href=\"#环型ring-双环dual-ring\">#</a> 环型 ring   双环 dual ring</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205195359360.png\" alt=\"image-20221205195359360\" /></p>\n<ol>\n<li>物理角度\n<ul>\n<li>所有的设备直接首尾相连，组成一个菊花链 (daisy-chain)</li>\n<li>可以将信息传送给链上的所有的设备，但是一般是固定顺时针或者逆时针进行传输</li>\n</ul>\n</li>\n<li>逻辑角度\n<ul>\n<li>为了使信息流动，每个站点必须将信息传递给其相邻的站点。</li>\n<li>我们需要对于链路进行访问控制，防止很多设备同时使用环，我们使用 token 来进行控制访问权力</li>\n</ul>\n</li>\n<li>缺点：环上只要有一个地方断开就会破坏整个环</li>\n<li>令牌环拓扑主要用于控制领域，比较适用于实时系统的处理</li>\n</ol>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205195407101.png\" alt=\"image-20221205195407101\" /></p>\n<ol>\n<li>物理视角：\n<ul>\n<li>双环拓扑结构与环拓扑结构相同，只是有第二个冗余环<strong>连接相同</strong>的设备。</li>\n</ul>\n</li>\n<li>逻辑视角：\n<ul>\n<li>双环拓扑就像两个独立的环，同一时间只有一个环被应用。</li>\n<li>有 token 令牌才有发送权力发送信息 (使用总线)</li>\n</ul>\n</li>\n<li>优点：提供可靠性和灵活性</li>\n<li>Eg. 优先使用外环，如果外环出现物理错误，则切换到内环上使用，并且对外环进行物理修复。</li>\n<li>双环拓扑是指一个结点有两个点，同时只能一个环在传输信息，两个环的传输时的方向是不能确定的。</li>\n</ol>\n<h3 id=\"星型star\"><a class=\"anchor\" href=\"#星型star\">#</a> 星型 star</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205195416746.png\" alt=\"image-20221205195416746\" /></p>\n<ol>\n<li>物理视角：星型拓扑结构有一个中心节点，所有的链路都从它辐射 (radiating) 出去。</li>\n<li>逻辑视角：所有信息的流动将通过一个设备。</li>\n<li>优点：优点：它允许所有其他节点相互通信，方便。出于安全或限制访问的原因，它也可能是可取的</li>\n<li>缺点：如果中心节点出现故障，整个网络就会断开连接。根据使用的网络设备类型，冲突可能是一个问题，中心点会有很大的负担，并且容易造成通信阻塞。</li>\n<li>扩展星型拓扑：设置次级中心结点：和 Internet 的层次结点类似</li>\n</ol>\n<h3 id=\"树型tree\"><a class=\"anchor\" href=\"#树型tree\">#</a> 树型 tree</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205195428151.png\" alt=\"image-20221205195428151\" /></p>\n<ol>\n<li>树拓扑使用一个主干节点 (Trunk Node)，从该节点分支到其他节点。\n<ul>\n<li>二叉树 (每个节点分成两个链接)</li>\n<li>主干树 (主干有分支节点，其上挂有链接)。</li>\n</ul>\n</li>\n<li>物理观点：主干是一条有几层分支的电线。</li>\n<li>逻辑观点：信息流是层次性的。</li>\n<li>在根一级数据结点可以对数据进行汇总和统计</li>\n<li>类似电信网络：中心点不仅仅是转存和发送，还要控制和统计，而星形拓扑是不需要控制统计的。</li>\n<li>当前节点不能处理的部分，则交给父结点处理</li>\n</ol>\n<h3 id=\"渔网型completemesh\"><a class=\"anchor\" href=\"#渔网型completemesh\">#</a> 渔网型 complete（mesh）</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205195436548.png\" alt=\"image-20221205195436548\" /></p>\n<ol>\n<li>物理视角：有明显的优点和缺点</li>\n<li>逻辑角度：完整或网格拓扑的行为在很大程度上取决于所使用的设备。</li>\n<li>优点：最大的连接性和可靠性。</li>\n<li>缺点：链接的媒体数量和到链接的连接数量变得非常庞大。</li>\n<li>全连接拓扑\n<ul>\n<li>缺点：成本高、路径选择多：添加选择最合理的路径的机制</li>\n<li>优点：鲁棒性高，抗干扰能力强。</li>\n</ul>\n</li>\n<li>常使用在比较使用重要的情况下：通常 Internet 就是使用 Mesh 的拓扑</li>\n</ol>\n<h3 id=\"蜂窝型cellular\"><a class=\"anchor\" href=\"#蜂窝型cellular\">#</a> 蜂窝型 cellular</h3>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205195445290.png\" alt=\"image-20221205195445290\" /></p>\n<p>非常低效</p>\n<ol>\n<li>物理视角\n<ul>\n<li>蜂窝拓扑结构是用于无线技术的拓扑结构</li>\n<li>有时接收节点移动 (如手机)，有时发送节点移动 (如卫星)</li>\n</ul>\n</li>\n<li>逻辑视角：节点之间直接通信 (尽管有时非常困难)，或者只与相邻的单元通信，这是<strong>非常低效</strong>的。</li>\n<li>每一个结点都是无线的连通方式：远结点需要进行转发</li>\n<li>使用场景\n<ol>\n<li>无线电话</li>\n<li>卫星</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"network-devices\"><a class=\"anchor\" href=\"#network-devices\">#</a> Network Devices</h2>\n<p>NICs - MAC address - layer 2</p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205173500374.png\" alt=\"image-20221205173500374\" /></p>\n<p><img data-src=\"https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20221205173327786.png\" alt=\"image-20221205173327786\" /></p>\n",
            "tags": [
                "NJUSE",
                "互联网计算",
                "计网"
            ]
        }
    ]
}