<!-- build time:Wed Oct 16 2024 13:42:47 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/undergraduate/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/undergraduate/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="Carpe diem" href="https://quas-modo.github.io/undergraduate/rss.xml"><link rel="alternate" type="application/atom+xml" title="Carpe diem" href="https://quas-modo.github.io/undergraduate/atom.xml"><link rel="alternate" type="application/json" title="Carpe diem" href="https://quas-modo.github.io/undergraduate/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/undergraduate/css/app.css?v=0.2.5"><meta name="keywords" content="数据管理基础"><link rel="canonical" href="https://quas-modo.github.io/undergraduate/2023/06/14/NJUSE/%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E5%9F%BA%E7%A1%80%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/"><title>数据管理基础期末复习 - 数据管理基础 - NJUSE | quas-modo = Carpe diem = pluck the day</title><meta name="generator" content="Hexo 5.4.2"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">数据管理基础期末复习</h1><div class="meta"><span class="item" title="创建时间：2023-06-14 20:14:57"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2023-06-14T20:14:57+08:00">2023-06-14</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>32k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>29 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/undergraduate/" rel="start">quas-modo</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/wenjun-lin-asset (1).jpg"></li><li class="item" data-background-image="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/krenz-cushart-10.jpg"></li><li class="item" data-background-image="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/krenz-cushart-shanghai2.jpg"></li><li class="item" data-background-image="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/krenz-cushart-steampunk-color5-final.jpg"></li><li class="item" data-background-image="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/krenz-cushart-9.jpg"></li><li class="item" data-background-image="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/krenz-cushart-whitebride-exam4.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/undergraduate/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/undergraduate/categories/NJUSE/" itemprop="item" rel="index" title="分类于 NJUSE"><span itemprop="name">NJUSE</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/undergraduate/categories/NJUSE/%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E5%9F%BA%E7%A1%80/" itemprop="item" rel="index" title="分类于 数据管理基础"><span itemprop="name">数据管理基础</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://quas-modo.github.io/undergraduate/2023/06/14/NJUSE/%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E5%9F%BA%E7%A1%80%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/undergraduate/images/avatar.png"><meta itemprop="name" content="quas-modo"><meta itemprop="description" content="pluck the day, notes/thoughts/nonsense"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Carpe diem"></span><div class="body md" itemprop="articleBody"><p>结合 pjz 学长的笔记做了一些删改。</p><p><span id="more"></span></p><h1 id="第1章-绪论"><a class="anchor" href="#第1章-绪论">#</a> 第 1 章 绪论</h1><blockquote><p>ppt 01-07</p></blockquote><h2 id="11-数据库系统概述"><a class="anchor" href="#11-数据库系统概述">#</a> 1.1 数据库系统概述</h2><h3 id="基本概念"><a class="anchor" href="#基本概念">#</a> 基本概念</h3><ul><li><p>数据 data</p><ul><li><strong>数据库中存储的基本对象</strong>，是描述事物的<strong>符号记录</strong>。</li><li>数据的含义称为语义 **，数据与其语义是不可分的。**<ul><li>98 是一个数据</li><li>可能是我的体重、数据库的分数，等等</li></ul></li></ul></li><li><p>数据库 database</p><ul><li>简称 DB</li><li>是<strong>长期储存</strong>在计算机内、<strong>有组织的</strong>、<strong>可共享的</strong>大量数据的集合。</li><li>基本特点<ul><li>数<strong>据按一定的数据模型组织、描述和储存</strong></li><li>具有较小的冗余度（redundancy）</li><li>较高的数据独立性（data independency）</li><li>易扩展性（scalability）</li><li>可为各种用户共享</li></ul></li></ul></li><li><p>数据库管理系统 DataBase Management System DBMS</p><ul><li><p>DBMS 的功能（可能出选择）</p><ul><li>定义</li><li>组织、存储和管理</li><li>操纵</li><li>管理事务和运行管理</li><li>建立和维护</li><li>其他，如不同数据库之间的互访和互操作功能</li></ul></li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618152757727.png" alt="image-20220618152757727"></p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618152804060.png" alt="image-20220618152804060"></p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618152812590.png" alt="image-20220618152812590"></p></li><li><p>数据库系统 DataBase System DBS</p><ul><li><p>数据库系统的构成：</p><ul><li>数据库</li><li>数据库管理系统（DBMS，及其应用开发工具）</li><li>应用程序</li><li>数据库管理员（DBA）</li></ul></li></ul></li></ul><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230606100430739.png" alt="image-20230606100430739"></p><h3 id="数据库基本特征简答"><a class="anchor" href="#数据库基本特征简答">#</a> 数据库基本特征【简答】</h3><ol><li><p>数据结构化</p><ul><li>数据内部结构化</li><li>数据之间具有联系，整体是结构化的</li></ul></li><li><p>数据的共享性高，冗余度低且易扩充</p></li><li><p>数据独立性高</p><ul><li>数据和程序相互不依赖</li><li>物理独立性<ul><li>数据库存储结构（物理结构）改变，管理员对模式 / 内模式映像作改变，可以使模式不变、外模式不变</li></ul></li><li>逻辑独立性<ul><li>模式（逻辑结构）改变，管理员对各个外模式 / 模式的映像作相应改变，可以使外模式保持不变，应用程序不变。</li></ul></li></ul></li><li><p>数据由数据管理系统（DBMS）统一管理和控制</p><ul><li>安全性保护</li><li>完整性检查</li><li>并发控制</li><li>数据库恢复</li></ul></li></ol><h3 id="使用数据库系统有什么好处"><a class="anchor" href="#使用数据库系统有什么好处">#</a> 使用数据库系统有什么好处？</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230612194832083.png" alt="image-20230612194832083"></p><h3 id="数据管理方式对比简答"><a class="anchor" href="#数据管理方式对比简答">#</a> 数据管理方式对比【简答】</h3><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618151823240.png" alt="image-20220618151823240"></p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618151837106.png" alt="image-20220618151837106"></p><h2 id="12-数据模型"><a class="anchor" href="#12-数据模型">#</a> 1.2 数据模型</h2><p><strong>概念</strong>：数据模型是<strong>对现实世界数据特征的抽象，用以抽象、表示和处理现实世界中的数据和信息。</strong></p><p><strong>数据模型的组成要素</strong>：</p><ol><li>数据结构</li><li>数据操作</li><li>数据的完整性约束条件</li></ol><p><strong>分类</strong>：</p><ul><li>概念模型<ul><li>按用户的观点来对数据和信息建模，用于数据库设计</li><li>关系和实体</li></ul></li><li>逻辑模型<ul><li>按计算机系统的观点对数据建模，用于 DBMS 实现</li><li>主要包括网状模型、层次模型、关系模型、面向对象数据模型、对象关系数据模型、半结构化数据模型等。</li><li>表、索引、逻辑</li></ul></li><li>物理模型<ul><li>是对数据最底层的抽象，描述数据在系统内部的表示方式和存取方法。</li><li>mysql 结构，物理设计</li></ul></li></ul><h3 id="概念模型"><a class="anchor" href="#概念模型">#</a> 概念模型</h3><p>用于数据库设计， 用 E-R 图来描述现实世界的概念模型。</p><p>概念：</p><ol><li><strong>实体</strong><ul><li>客观存在并可相互区别的事物称为实体。</li><li>可以是具体的人、事、物或抽象的概念。</li></ul></li><li><strong>属性</strong><ul><li>实体所具有的某一特性称为属性。</li><li>一个实体可以由若干个属性来刻画。</li></ul></li><li><strong>码</strong><ul><li>唯一标识实体的属性集称为码</li></ul></li><li>实体型</li><li>实体集</li><li>联系<ul><li>一对一、一对多、多对多</li></ul></li></ol><h4 id="概念模型-e-r-图"><a class="anchor" href="#概念模型-e-r-图">#</a> 概念模型 (<strong>E-R 图</strong>)</h4><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220613141148229.png" alt="image-20220613141148229"></p><p>当然也有内部的联系<img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618153337416.png" alt="image-20220618153337416"></p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220613141227087.png" alt="image-20220613141227087"></p><ul><li>联系也可以有属性</li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619205929354.png" alt="image-20220619205929354"></p><ul><li>实例</li></ul><p>&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIxMDAxMjQ4OS5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619210012489.png</span>&quot; alt=&quot;image-20220619210012489&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIxMDAyNjkzMS5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619210026931.png</span>&quot; alt=&quot;image-20220619210026931&quot; /&gt;</p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619210045777.png" alt="image-20220619210045777"></p><ul><li>IS-A 联系（考试可能会考）</li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619210102615.png" alt="image-20220619210102615"></p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619210139138.png" alt="image-20220619210139138"></p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619210155620.png" alt="image-20220619210155620"></p><ul><li>Part-of / 独占 / 弱实体</li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619210343391.png" alt="image-20220619210343391"></p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619210444963.png" alt="image-20220619210444963"></p><h3 id="逻辑模型"><a class="anchor" href="#逻辑模型">#</a> 逻辑模型</h3><p><strong>分类</strong>：</p><ol><li><p>层次模型</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230612200708933.png" alt="image-20230612200708933"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230612200848830.png" alt="image-20230612200848830"></p></li><li><p>网状模型</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230612200735665.png" alt="image-20230612200735665"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230612200909254.png" alt="image-20230612200909254"></p></li><li><p>关系模型</p><p>关系模型必须是规范化的：比如，关系的每个分量必须是一个不可分的数据项</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230612201155877.png" alt="image-20230612201155877"></p><p><strong>关系模型的优缺点</strong></p><p>（要知道，可能会考简答，后面的 nosql 跟关系型数据库的对比也提到了这个知识点）</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230612201118327.png" alt="image-20230612201118327"></p></li><li><p>面向对象数据模型</p></li></ol><h2 id="13-数据库系统的结构"><a class="anchor" href="#13-数据库系统的结构">#</a> 1.3 数据库系统的结构</h2><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220613141759080.png" alt="image-20220613141759080"></p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220613141936109.png" alt="image-20220613141936109"></p><h3 id="三级结构"><a class="anchor" href="#三级结构">#</a> 三级结构</h3><ul><li><p>三级模式是对数据的三个抽象级别</p></li><li><p>外模式：数据库用户的数据视图，是与某一应用有关的局部数据的逻辑表示</p><p>和模式类似于 VO 和 PO 的关系</p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618154425091.png" alt="image-20220618154425091"></p></li><li><p>模式：数据库中全体数据的逻辑结构和特征的描述</p><ul><li>公共视图</li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618154358659.png" alt="image-20220618154358659"></p></li><li><p>内模式：是数据在数据库内部的表示方式</p><ul><li>唯一</li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618154349794.png" alt="image-20220618154349794"></p></li></ul><h3 id="二级映像"><a class="anchor" href="#二级映像">#</a> 二级映像</h3><h4 id="外模式模式映像"><a class="anchor" href="#外模式模式映像">#</a> 外模式 / 模式映像:</h4><ul><li>一对多的关系</li><li>每一个外模式，数据库系统都有一个外模式／模式映象，定义外模式与模式之间的对应关系</li><li>当模式改变时，数据库管理员对外模式／模式映象作相应改变，使外模式保持不变。应用程序是依据数据的外模式编写的，应用程序不必修改，<strong>保证了数据与程序的逻辑独立性</strong>，简称数据的逻辑独立性。</li></ul><h4 id="模式内模式映像"><a class="anchor" href="#模式内模式映像">#</a> 模式 / 内模式映像：</h4><ul><li>一对一的关系</li><li>模式／内模式映象定义了数据全局逻辑结构与存储结构之间的对应关系。</li><li>当数据库的存储结构改变了（例如选用了另一种存储结构），数据库管理员修改模式／内模式映象，使模式保持不变。应用程序不受影响，<strong>保证了数据与程序的物理独立性</strong>。</li></ul><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230612201514043.png" alt="image-20230612201514043"></p><h2 id="14-数据库系统的组成"><a class="anchor" href="#14-数据库系统的组成">#</a> 1.4 数据库系统的组成</h2><p>看看就好</p><ul><li><p>组成</p><ul><li>硬件、软件、人员</li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220613143304670.png" alt="image-20220613143304670"></p></li></ul><h1 id="第2章-关系数据库"><a class="anchor" href="#第2章-关系数据库">#</a> 第 2 章 关系数据库</h1><blockquote><p>ppt 08-10</p></blockquote><h2 id="21-关系数据结构"><a class="anchor" href="#21-关系数据结构">#</a> 2.1 关系数据结构</h2><ul><li>域</li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220613143856931.png" alt="image-20220613143856931"></p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220613144149712.png" alt="image-20220613144149712"></p><ul><li><p>笛卡尔积</p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220613143948194.png" alt="image-20220613143948194"></p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220613144028213.png" alt="image-20220613144028213"></p></li><li><p>关系</p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618155133689.png" alt="image-20220618155133689"></p><ul><li><p>关系的类型：基本关系、查询表（查询结果对应的表）、视图表（虚表）</p></li><li><p>基本关系的性质</p><ul><li>列是同质的：每一列中的分量是同一类型的数据，来自同一个域</li><li>不同的列可出自同一个域，其中的每一列称为一个属性</li><li>列和行的顺序无所谓</li><li>任意两个元组的候选码不能相同</li><li>分量必须取原子值</li></ul><p><strong>关系的每一个分量必须是一个不可分割项</strong></p></li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220613144012518.png" alt="image-20220613144012518"></p></li><li><p>码</p></li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618155103797.png" alt="image-20220618155103797"></p><p>​	这两张表就是<strong>数据</strong><br>​ 而单独的一张表就称为<strong>数据对象</strong>，即人员表是一个<strong>数据对象</strong>，课程表也是一个<strong>数据对象</strong><br>而每张表中的每一行就称为<strong>数据元素</strong><br>而姓名，性别，身高，课程代号，课程名就称为<strong>数据项</strong></p><ul><li><p>关系模式（型）</p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618155345995.png" alt="image-20220618155345995"></p><p>关系模式是静态的，关系是动态的。关系是关系模式在某一时刻的状态或内容。</p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220613145054448.png" alt="image-20220613145054448"></p></li><li><p>关系数据库：所有关系的集合构成一个关系数据库</p><ul><li>关系数据库的型：关系数据库模式，是对关系数据库的描述</li><li>关系数据库的值：关系模式在某一时刻对应的关系的集合，通常称为关系数据库</li></ul></li></ul><h2 id="2223-关系操作和完整性"><a class="anchor" href="#2223-关系操作和完整性">#</a> 2.2&amp;2.3 关系操作和完整性</h2><ul><li><p>查询</p><ul><li><strong>选择、投影、并、差、笛卡尔积</strong>是 5 种基本操作</li></ul></li><li><p>更新</p><ul><li>插入、修改、删除</li></ul></li><li><p><strong>实体完整性</strong>：primary key is <strong>NOT NULL</strong></p><ul><li>若属性（指一个或一组属性）A 是基本关系 R 的主属性，则 A 不能取空值（null value）</li><li>空值就是 “不知道” 或 “不存在” 或 “无意义” 的值</li><li>原因：如果取了空值，就说明存在某个不可标识的实体，即存在不可区分的实体。</li></ul></li><li><p>外码：Foreign Key</p><ul><li>R(K<sub>R</sub>,F, ... ) -&gt; S(K<sub>s</sub>, ...)</li><li><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230609145205507.png" alt="image-20230609145205507"></li></ul></li><li><p><strong>参照完整性</strong>: The value of foreign key is <strong>either</strong> NULL <strong>or</strong> in the referenced column<img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618155633343.png" alt="image-20220618155633343"></p><ul><li>四种可能被破坏的情况<ul><li>SC 表中增加一个元组，该元组的 Sno 属性的值在表 Student 中找不到一个元组，其 Sno 属性的值与之相等。</li><li>修改 SC 表中的一个元组，修改后该元组的 Sno 属性的值在表 Student 中找不到一个元组，其 Sno 属性的值与之相等。</li><li>从 Student 表中删除一个元组，造成 SC 表中某些元组的 Sno 属性的值在表 Student 中找不到一个元组，其 Sno 属性的值与之相等。</li><li>修改 Student 表中一个元组的 Sno 属性，造成 SC 表中某些元组的 Sno 属性的值在表 Student 中找不到一个元组，其 Sno 属性的值与之相等 。</li></ul></li></ul></li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618171654106.png" alt="image-20220618171654106"></p><ul><li><strong>用户定义的完整性</strong>：应用领域需要遵循的约束条件，体现了<strong>具体领域中的语义约束</strong>（就是字面意思）<ul><li>比如学生不能没有姓名</li><li>成绩的取值范围定义在 0-100 之间</li></ul></li></ul><h2 id="24-关系代数重点"><a class="anchor" href="#24-关系代数重点">#</a> 2.4 关系代数（重点）</h2><p><em>见 ppt ch10 或第五版课本 P47，做往年题和课后题！</em></p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618155915523.png" alt="image-20220618155915523"></p><ul><li><p><strong>选择、投影、并、差、笛卡尔积</strong>是 5 种基本操作</p></li><li><p>集合运算符从行的角度看，专门的关系运算符可从行、列的角度看</p></li><li><p>选择、差、交、并是从行的角度来看，投影是从列的角度来看</p><ul><li>差是减去相同的行</li><li>投影包含<strong>去重</strong>操作</li></ul></li><li><p>除和自然连接是在行、列的角度上看</p></li><li><p>连接绝大多数是自然连接</p><ul><li>自然连接：一种特殊的等值连接，两个关系中比较的分量必须是<strong>相同的属性组</strong>，且在结果中把重复的属性去掉（<strong>去掉重复列</strong>）</li></ul></li><li><p>悬浮元组</p><ul><li>两个关系 R 和 S 在做自然连接时，关系 R 中某些元组有可能在 S 中不存在公共属性上值相等的元组，从而造成 R 中这些元组在操作时被舍弃了，这些被舍弃的元组称为悬浮元组。</li></ul></li><li><p>外连接</p><ul><li>如果把悬浮元组也保存在结果关系中，而在其他属性上填空值 (Null)，就叫做外连接</li><li>左外连接 (LEFT OUTER JOIN 或 LEFT JOIN)<ul><li>只保留左边关系 R 中的悬浮元组</li></ul></li><li>右外连接 (RIGHT OUTER JOIN 或 RIGHT JOIN)<ul><li>只保留右边关系 S 中的悬浮元组</li></ul></li></ul></li></ul><p>&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxODE2MDM1ODg4MS5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618160358881.png</span>&quot; alt=&quot;image-20220618160358881&quot; style=&quot;zoom:50%;&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxODE2MDQyODk2OC5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618160428968.png</span>&quot; alt=&quot;image-20220618160428968&quot; style=&quot;zoom:50%;&quot; /&gt;</p><ul><li>除运算</li></ul><p>&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxODE2MDcyNTAxMi5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618160725012.png</span>&quot; alt=&quot;image-20220618160725012&quot; style=&quot;zoom:50%;&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxODE2MDgxMDkwMS5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618160810901.png</span>&quot; alt=&quot;image-20220618160810901&quot; style=&quot;zoom:50%;&quot; /&gt;</p><h1 id="第3章-关系数据库语言sql"><a class="anchor" href="#第3章-关系数据库语言sql">#</a> 第 3 章 关系数据库语言 SQL</h1><blockquote><p>ppt 11-22</p></blockquote><h2 id="31-33-概述和数据定义操作直接看书"><a class="anchor" href="#31-33-概述和数据定义操作直接看书">#</a> 3.1 - 3.3 概述和数据定义（操作直接看书）</h2><ul><li><p>SQL Structured Query Language 结构化查询语言</p></li><li><p>SQL 特点</p><ul><li><strong>综合统一</strong></li><li><strong>高度非过程化</strong></li><li><strong>面向集合的操作方式</strong></li><li>以一种语法结构提供多种使用方式</li><li>语言间接，易学易用</li></ul></li><li><table><thead><tr><th>SQL 功能</th><th>动词</th></tr></thead><tbody><tr><td>数据查询</td><td>SELECT</td></tr><tr><td>数据定义</td><td>CREATE, DROP, ALTER</td></tr><tr><td>数据操纵</td><td>INSERT, UPDATE, DELETE</td></tr><tr><td>数据控制</td><td>GRANT, REVOKE</td></tr></tbody></table><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230609171534179.png" alt="image-20230609171534179"></p></li><li><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230609171423158.png" alt="image-20230609171423158"></p></li><li><p>层次化的数据库对象命名机制</p></li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618161355132.png" alt="image-20220618161355132"></p><ul><li>Drop 的 Restrict 和 Cascade</li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618161502660.png" alt="image-20220618161502660"></p><ul><li>数据字典</li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618161618365.png" alt="image-20220618161618365"></p><h2 id="34-数据查询必考"><a class="anchor" href="#34-数据查询必考">#</a> 3.4 数据查询（必考）</h2><ul><li>基本语法</li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618161829326.png" alt="image-20220618161829326"></p><ul><li>剩余见课后习题和往年卷！</li></ul><h3 id="单表查询"><a class="anchor" href="#单表查询">#</a> 单表查询</h3><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220613210755589.png" alt="img"></p><ul><li>聚集、GROUP BY 要掌握</li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220620232055025.png" alt="image-20220620232055025"></p><ul><li><em>一定会出一道写 sql 的题</em></li></ul><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">SELECT</span> <span class="token punctuation">[</span><span class="token keyword">ALL</span> <span class="token operator">|</span> <span class="token keyword">DISTINCT</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>目标列表达式<span class="token operator">></span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>目标列表达式<span class="token operator">></span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">FROM</span> <span class="token operator">&lt;</span>tableName<span class="token operator">></span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>tableName<span class="token operator">></span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>select_caluse<span class="token operator">></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token punctuation">[</span><span class="token keyword">AS</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>alias<span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>conditional_expression<span class="token operator">></span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token punctuation">[</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span>colName<span class="token operator">></span> <span class="token punctuation">[</span><span class="token keyword">HAVING</span> <span class="token operator">&lt;</span>conditional_expression<span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span>colName<span class="token operator">></span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">ASC</span> <span class="token operator">|</span> <span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> Sname <span class="token keyword">FROM</span> Student<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">SELECT</span> Sname<span class="token punctuation">,</span> Sno<span class="token punctuation">,</span> Sdept <span class="token keyword">FROM</span> Student<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> Sname<span class="token punctuation">,</span> Ssex<span class="token punctuation">,</span> Sage<span class="token punctuation">,</span> Sdept <span class="token keyword">FROM</span> Student<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student<span class="token punctuation">;</span> <span class="token comment">/* 与上一行等价 */</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">SELECT</span> Sname<span class="token punctuation">,</span> <span class="token number">2014</span><span class="token operator">-</span>Sage <span class="token keyword">FROM</span> Student<span class="token punctuation">;</span> <span class="token comment">/* 可以存在表达式 */</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">SELECT</span> Sname<span class="token punctuation">,</span> <span class="token string">'Year of Birth: '</span><span class="token punctuation">,</span> <span class="token number">2014</span><span class="token operator">-</span>Sage<span class="token punctuation">,</span> LOWER<span class="token punctuation">(</span>Sdept<span class="token punctuation">)</span> <span class="token keyword">FROM</span> Student<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">SELECT</span> Sname NAME<span class="token punctuation">,</span><span class="token string">'Year of Birth:'</span> BIRTH<span class="token punctuation">,</span> <span class="token number">2014</span><span class="token operator">-</span>Sage BIRTHDAY<span class="token punctuation">,</span> LOWER<span class="token punctuation">(</span>Sdept<span class="token punctuation">)</span> DEPARTMENT <span class="token keyword">FROM</span> Student<span class="token punctuation">;</span> <span class="token comment">/* 查询结果表头为别名，要求用小写字母表示所在系 */</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">SELECT</span> <span class="token keyword">ALL</span> Sno <span class="token keyword">FROM</span> SC<span class="token punctuation">;</span> <span class="token operator">=</span> <span class="token keyword">SELECT</span> Sno <span class="token keyword">FROM</span> SC<span class="token punctuation">;</span><span class="token comment">/* 默认时 ALL*/</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> Sno <span class="token keyword">FROM</span> SC<span class="token punctuation">;</span><span class="token comment">/* 消除取值重复的行 */</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">/* 比较大小 */</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">SELECT</span> Sname <span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">WHERE</span> Sdept<span class="token operator">=</span>‘CS’<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">SELECT</span> Sname<span class="token punctuation">,</span> Sage <span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">WHERE</span> Sage <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> Sn <span class="token keyword">FROM</span> SC</pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token keyword">WHERE</span> Grade <span class="token operator">&lt;</span> <span class="token number">60</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token comment">/* 确定范围 */</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">SELECT</span> Sname<span class="token punctuation">,</span> Sdept<span class="token punctuation">,</span> Sage <span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token keyword">WHERE</span> Sage <span class="token operator">BETWEEN</span> <span class="token number">20</span> <span class="token operator">AND</span> <span class="token number">23</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token keyword">SELECT</span> Sname<span class="token punctuation">,</span> Sdept<span class="token punctuation">,</span> Sage <span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token keyword">WHERE</span> Sage <span class="token operator">NOT</span> <span class="token operator">BETWEEN</span> <span class="token number">20</span> <span class="token operator">AND</span> <span class="token number">23</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token comment">/* 确定集合 */</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token keyword">SELECT</span> Sname<span class="token punctuation">,</span> Ssex <span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token keyword">WHERE</span> Sdept <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'CS'</span><span class="token punctuation">,</span> <span class="token string">'MA'</span><span class="token punctuation">,</span> <span class="token string">'IS'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>              </pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token keyword">SELECT</span> Sname<span class="token punctuation">,</span> Ssex <span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token keyword">WHERE</span> Sdept <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'IS'</span><span class="token punctuation">,</span> <span class="token string">'MA'</span><span class="token punctuation">,</span> <span class="token string">'CS'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token comment">/* 字符匹配 */</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token keyword">WHERE</span> Sno <span class="token operator">LIKE</span> <span class="token string">'201215121'</span><span class="token punctuation">;</span> <span class="token comment">/* 匹配固定字符串 */</span></pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token comment">/* 等价于 */</span></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token keyword">WHERE</span> Sno <span class="token operator">=</span> <span class="token string">'201215121'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token keyword">SELECT</span> Sname<span class="token punctuation">,</span> Sno<span class="token punctuation">,</span> Ssex <span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token keyword">WHERE</span> Sname <span class="token operator">LIKE</span> <span class="token string">'刘%'</span><span class="token punctuation">;</span> <span class="token comment">/* % 匹配任意长度（长度可以为 0）字符串 */</span></pre></td></tr><tr><td data-num="53"></td><td><pre></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token keyword">SELECT</span> Sname <span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token keyword">WHERE</span> Sname <span class="token operator">LIKE</span> <span class="token string">'欧阳_'</span><span class="token punctuation">;</span> <span class="token comment">/* _ 匹配任意单个字符 */</span></pre></td></tr><tr><td data-num="56"></td><td><pre></pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token keyword">SELECT</span> Sname，Sno <span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="58"></td><td><pre><span class="token keyword">WHERE</span> Sname <span class="token operator">LIKE</span> <span class="token string">'_阳%'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre></pre></td></tr><tr><td data-num="60"></td><td><pre><span class="token keyword">SELECT</span> Sname<span class="token punctuation">,</span> Sno<span class="token punctuation">,</span> Ssex <span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="61"></td><td><pre><span class="token keyword">WHERE</span> Sname <span class="token operator">NOT</span> <span class="token operator">LIKE</span> <span class="token string">'刘%'</span><span class="token punctuation">;</span> <span class="token comment">/*  查询所有不姓刘的学生姓名、学号和性别。 */</span></pre></td></tr><tr><td data-num="62"></td><td><pre></pre></td></tr><tr><td data-num="63"></td><td><pre><span class="token keyword">SELECT</span> Cno，Ccredit <span class="token keyword">FROM</span> Course</pre></td></tr><tr><td data-num="64"></td><td><pre><span class="token keyword">WHERE</span> Cname <span class="token operator">LIKE</span> <span class="token string">'DB\_Design'</span> <span class="token keyword">ESCAPE</span> <span class="token string">'\ '</span><span class="token punctuation">;</span> <span class="token comment">/* ESCAPE '＼' 表示 '＼' 为换码字符 */</span></pre></td></tr><tr><td data-num="65"></td><td><pre></pre></td></tr><tr><td data-num="66"></td><td><pre><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Course</pre></td></tr><tr><td data-num="67"></td><td><pre><span class="token keyword">WHERE</span> Cname <span class="token operator">LIKE</span> <span class="token string">'DB\_%i_ _'</span> <span class="token keyword">ESCAPE</span> <span class="token string">'\ '</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="68"></td><td><pre></pre></td></tr><tr><td data-num="69"></td><td><pre><span class="token comment">/* 涉及空值的计算 */</span></pre></td></tr><tr><td data-num="70"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> Cno <span class="token keyword">FROM</span> SC</pre></td></tr><tr><td data-num="71"></td><td><pre><span class="token keyword">WHERE</span> Grade <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="72"></td><td><pre></pre></td></tr><tr><td data-num="73"></td><td><pre><span class="token keyword">SELECT</span> Sno，Cno <span class="token keyword">FROM</span> SC</pre></td></tr><tr><td data-num="74"></td><td><pre><span class="token keyword">WHERE</span> Grade <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span> <span class="token comment">/* 涉及空值的查询：IS (NOT) NULL: IS 不可换成 = */</span></pre></td></tr><tr><td data-num="75"></td><td><pre></pre></td></tr><tr><td data-num="76"></td><td><pre><span class="token comment">/* 多重条件查询 */</span></pre></td></tr><tr><td data-num="77"></td><td><pre><span class="token comment">/* AND 的优先级高于 OR 可以用括号改变优先级 */</span></pre></td></tr><tr><td data-num="78"></td><td><pre><span class="token keyword">SELECT</span> Sname <span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="79"></td><td><pre><span class="token keyword">WHERE</span> Sdept <span class="token operator">=</span> <span class="token string">'CS'</span> <span class="token operator">AND</span> Sage <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="80"></td><td><pre></pre></td></tr><tr><td data-num="81"></td><td><pre><span class="token keyword">SELECT</span> Sname<span class="token punctuation">,</span> Ssex <span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="82"></td><td><pre><span class="token keyword">WHERE</span> Sdept <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'CS'</span><span class="token punctuation">,</span> <span class="token string">'MA'</span><span class="token punctuation">,</span> <span class="token string">'IS'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="83"></td><td><pre></pre></td></tr><tr><td data-num="84"></td><td><pre><span class="token keyword">SELECT</span> Sname<span class="token punctuation">,</span> Ssex <span class="token keyword">FROM</span> Student </pre></td></tr><tr><td data-num="85"></td><td><pre><span class="token keyword">WHERE</span> Sdept <span class="token operator">=</span> <span class="token string">' CS'</span> <span class="token operator">OR</span> Sdept <span class="token operator">=</span> <span class="token string">'MA'</span> <span class="token operator">OR</span> Sdept<span class="token operator">=</span> <span class="token string">'IS'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="86"></td><td><pre></pre></td></tr><tr><td data-num="87"></td><td><pre><span class="token comment">/* 可以按一个或多个属性列排序</span></pre></td></tr><tr><td data-num="88"></td><td><pre>升序：ASC; 降序：DESC; 缺省值为升序</pre></td></tr><tr><td data-num="89"></td><td><pre>对于空值，排序时显示的次序由具体系统实现来决定 */</pre></td></tr><tr><td data-num="90"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> Grade <span class="token keyword">FROM</span> SC <span class="token keyword">WHERE</span> Cno <span class="token operator">=</span> <span class="token string">'3'</span></pre></td></tr><tr><td data-num="91"></td><td><pre><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> Grade <span class="token keyword">DESC</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="92"></td><td><pre></pre></td></tr><tr><td data-num="93"></td><td><pre><span class="token comment">/*Sdept 按升序排列，学生年龄按降序排列 */</span></pre></td></tr><tr><td data-num="94"></td><td><pre><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="95"></td><td><pre><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> Sdept<span class="token punctuation">,</span> Sage <span class="token keyword">DESC</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="96"></td><td><pre></pre></td></tr><tr><td data-num="97"></td><td><pre><span class="token comment">/* 聚集函数：</span></pre></td></tr><tr><td data-num="98"></td><td><pre>统计元组个数</pre></td></tr><tr><td data-num="99"></td><td><pre>    COUNT (*)</pre></td></tr><tr><td data-num="100"></td><td><pre>统计一列中值的个数</pre></td></tr><tr><td data-num="101"></td><td><pre>    COUNT ([DISTINCT|ALL] &lt; 列名 >) DISTINC 取消重复值</pre></td></tr><tr><td data-num="102"></td><td><pre>计算一列值的总和（此列必须为数值型）</pre></td></tr><tr><td data-num="103"></td><td><pre>	SUM ([DISTINCT|ALL] &lt; 列名 >)	</pre></td></tr><tr><td data-num="104"></td><td><pre>计算一列值的平均值（此列必须为数值型）</pre></td></tr><tr><td data-num="105"></td><td><pre>	AVG ([DISTINCT|ALL] &lt; 列名 >)</pre></td></tr><tr><td data-num="106"></td><td><pre>求一列中的最大值和最小值</pre></td></tr><tr><td data-num="107"></td><td><pre> 	MAX ([DISTINCT|ALL] &lt; 列名 >)</pre></td></tr><tr><td data-num="108"></td><td><pre>	MIN ([DISTINCT|ALL] &lt; 列名 >) */</pre></td></tr><tr><td data-num="109"></td><td><pre><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> Student<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="110"></td><td><pre></pre></td></tr><tr><td data-num="111"></td><td><pre><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> Sno<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="112"></td><td><pre><span class="token keyword">FROM</span> SC<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="113"></td><td><pre></pre></td></tr><tr><td data-num="114"></td><td><pre><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>Grade<span class="token punctuation">)</span> <span class="token keyword">FROM</span> SC</pre></td></tr><tr><td data-num="115"></td><td><pre><span class="token keyword">WHERE</span> Cno <span class="token operator">=</span> <span class="token string">'1'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="116"></td><td><pre></pre></td></tr><tr><td data-num="117"></td><td><pre><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>Grade<span class="token punctuation">)</span> <span class="token keyword">FROM</span> SC</pre></td></tr><tr><td data-num="118"></td><td><pre><span class="token keyword">WHERE</span> Cno <span class="token operator">=</span> <span class="token string">'1'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="119"></td><td><pre></pre></td></tr><tr><td data-num="120"></td><td><pre><span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>Ccredit<span class="token punctuation">)</span> <span class="token keyword">FROM</span> SC<span class="token punctuation">,</span> Course </pre></td></tr><tr><td data-num="121"></td><td><pre><span class="token keyword">WHERE</span> Sno <span class="token operator">=</span> <span class="token string">'201215012'</span> <span class="token operator">AND</span> SC<span class="token punctuation">.</span>Cno <span class="token operator">=</span> Course<span class="token punctuation">.</span>Cno<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="122"></td><td><pre></pre></td></tr><tr><td data-num="123"></td><td><pre><span class="token comment">/* GROUP BY 子句分组：</span></pre></td></tr><tr><td data-num="124"></td><td><pre>细化聚集函数的作用对象；也就是说 GROUP BY 是和聚集函数配套使用的</pre></td></tr><tr><td data-num="125"></td><td><pre>如果未对查询结果分组，聚集函数将作用于整个查询结果</pre></td></tr><tr><td data-num="126"></td><td><pre>* 对查询结果分组后，聚集函数将分别作用于每个组 *</pre></td></tr><tr><td data-num="127"></td><td><pre>按指定的一列或多列值分组，值相等的为一组 */</pre></td></tr><tr><td data-num="128"></td><td><pre><span class="token keyword">SELECT</span> Cno<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>Sno<span class="token punctuation">)</span> <span class="token keyword">FROM</span> SC</pre></td></tr><tr><td data-num="129"></td><td><pre><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> Cno<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="130"></td><td><pre></pre></td></tr><tr><td data-num="131"></td><td><pre><span class="token comment">/* HAVING 短语与 WHERE 子句的 区别：</span></pre></td></tr><tr><td data-num="132"></td><td><pre>	作用对象不同</pre></td></tr><tr><td data-num="133"></td><td><pre>	WHERE 子句作用于基表或视图，从中选择满足条件的元组</pre></td></tr><tr><td data-num="134"></td><td><pre>	HAVING 短语作用于组，从中选择满足条件的组。*/</pre></td></tr><tr><td data-num="135"></td><td><pre><span class="token keyword">SELECT</span> Sno <span class="token keyword">FROM</span> SC</pre></td></tr><tr><td data-num="136"></td><td><pre><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> Sno</pre></td></tr><tr><td data-num="137"></td><td><pre><span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">3</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="138"></td><td><pre></pre></td></tr><tr><td data-num="139"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>Grade<span class="token punctuation">)</span> <span class="token keyword">FROM</span> SC </pre></td></tr><tr><td data-num="140"></td><td><pre><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> Sno</pre></td></tr><tr><td data-num="141"></td><td><pre><span class="token keyword">HAVING</span> <span class="token function">AVG</span><span class="token punctuation">(</span>Grade<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">90</span><span class="token punctuation">;</span> <span class="token comment">/* 查询平均成绩大于等于 90 分的学生学号和平均成绩 */</span></pre></td></tr></table></figure><h3 id="连接查询"><a class="anchor" href="#连接查询">#</a> 连接查询</h3><ul><li>连接要知道</li><li>连接操作不用看，知道有这么回事就行</li></ul><p><code>[&lt;表名1&gt;.]&lt;列名1&gt;&lt;比较运算符&gt;[&lt;表名2&gt;.]&lt;列名2&gt;</code></p><p>若在等值连接中把目标列中重复的属性列去掉则为<strong>自然连接</strong>。</p><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/* [例 3.49] 查询每个学生及其选修课程的情况 */</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">SELECT</span> Student<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> SC<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> Student<span class="token punctuation">,</span> SC</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">WHERE</span> Student<span class="token punctuation">.</span>Sno <span class="token operator">=</span> SC<span class="token punctuation">.</span>Sno<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">/* 对上例使用自然连接 */</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">SELECT</span> Student<span class="token punctuation">.</span>Sno<span class="token punctuation">,</span>Sname<span class="token punctuation">,</span>Ssex<span class="token punctuation">,</span>Sage<span class="token punctuation">,</span>Sd ept<span class="token punctuation">,</span>Cno<span class="token punctuation">,</span>Grade <span class="token keyword">FROM</span> Student<span class="token punctuation">,</span>SC</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">WHERE</span> Student<span class="token punctuation">.</span>Sno <span class="token operator">=</span> SC<span class="token punctuation">.</span>Sno<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">/*WHERE 子句由连接谓词和选择谓词组成 */</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">SELECT</span> Student<span class="token punctuation">.</span>Sno<span class="token punctuation">,</span> Sname </pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">FROM</span> Student<span class="token punctuation">,</span> SC</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">WHERE</span> Student<span class="token punctuation">.</span>Sno <span class="token operator">=</span> SC<span class="token punctuation">.</span>Sno <span class="token operator">AND</span> SC<span class="token punctuation">.</span>Cno<span class="token operator">=</span><span class="token string">'2'</span> <span class="token operator">AND</span> SC<span class="token punctuation">.</span>Grade <span class="token operator">></span> <span class="token number">90</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">SELECT</span> <span class="token keyword">FIRST</span><span class="token punctuation">.</span>Cno<span class="token punctuation">,</span> <span class="token keyword">SECOND</span><span class="token punctuation">.</span>Cpno <span class="token keyword">FROM</span> Course <span class="token keyword">FIRST</span><span class="token punctuation">,</span> Course <span class="token keyword">SECOND</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">WHERE</span> <span class="token keyword">FIRST</span><span class="token punctuation">.</span>Cpno <span class="token operator">=</span> <span class="token keyword">SECOND</span><span class="token punctuation">.</span>Cno<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">/* 自身连接：查询每一门课的间接先修课（即先修课的 先修课）*/</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">SELECT</span> <span class="token keyword">FIRST</span><span class="token punctuation">.</span>Cno<span class="token punctuation">,</span> <span class="token keyword">SECOND</span><span class="token punctuation">.</span>Cpno</pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">FROM</span> Course <span class="token keyword">FIRST</span><span class="token punctuation">,</span> Course <span class="token keyword">SECOND</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">WHERE</span> <span class="token keyword">FIRST</span><span class="token punctuation">.</span>Cpno <span class="token operator">=</span> <span class="token keyword">SECOND</span><span class="token punctuation">.</span>Cno<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token comment">/* [例 3.53] 改写 [例 3.49] </span></pre></td></tr><tr><td data-num="23"></td><td><pre>	左外连接：列出左表中所有的元组 */</pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">SELECT</span> Student<span class="token punctuation">.</span>Sno<span class="token punctuation">,</span> Sname<span class="token punctuation">,</span> Ssex<span class="token punctuation">,</span> Sage<span class="token punctuation">,</span> Sdept<span class="token punctuation">,</span> Cno<span class="token punctuation">,</span> Grade</pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">LEFT</span> <span class="token keyword">OUT</span> <span class="token keyword">JOIN</span> SC <span class="token keyword">ON</span> <span class="token punctuation">(</span>Student<span class="token punctuation">.</span>Sno<span class="token operator">=</span>SC<span class="token punctuation">.</span>Sno<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token comment">/* [例 3.54] 查询每个学生的学号、姓名、选修 的课程名及成绩 */</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token keyword">SELECT</span> Student<span class="token punctuation">.</span>Sno<span class="token punctuation">,</span> Sname<span class="token punctuation">,</span> Cname<span class="token punctuation">,</span> Grade</pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">FROM</span> Student<span class="token punctuation">,</span> SC<span class="token punctuation">,</span> Course <span class="token comment">/* 多表连接 */</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token keyword">WHERE</span> Student<span class="token punctuation">.</span>Sno <span class="token operator">=</span> SC<span class="token punctuation">.</span>Sno</pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token operator">AND</span> SC<span class="token punctuation">.</span>Cno <span class="token operator">=</span> Course<span class="token punctuation">.</span>Cno<span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="嵌套查询"><a class="anchor" href="#嵌套查询">#</a> 嵌套查询</h3><ul><li><p>上层的查询块称为外层查询或父查询，下层查询块称为内层查询或子查询。</p><p>SQL 语言允许多层嵌套查询，即一个子查询中还可以嵌套其他子查询。</p><p>子查询的限制：*<strong> 不能使用 <code>ORDER BY</code> 子句 *</strong>。有些嵌套查询可以用连接运算替代，<strong>谨慎使用嵌套查询</strong>。</p></li><li><p>嵌套的部分不做要求</p></li><li><p>但是考试写嵌套没有问题</p></li><li><p>带谓词的子查询看一看就行</p></li><li><p><strong>用聚集函数实现子查询通常比直接用 ANY 或 ALL 查询效率要高</strong></p></li><li><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230611093819977.png" alt="image-20230611093819977"></p></li><li></li></ul><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># [例 3.55] 查询与 “刘晨” 在同一个系学习的学生。</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment"># 不相关子查询：子查询的查询条件不依赖于父查询</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> Sname<span class="token punctuation">,</span> Sdept</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">WHERE</span> Sdept <span class="token operator">IN</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">SELECT</span> Sdept</pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">WHERE</span> Sname <span class="token operator">=</span> <span class="token string">'刘晨'</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment"># 在 [例 3.55] 中，由于一个学生只可能在一个系学习，则 可以用 = 代替 IN：</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> Sname<span class="token punctuation">,</span> Sdept</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">WHERE</span> Sdept <span class="token operator">=</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">SELECT</span> Sdept</pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">WHERE</span> Sname <span class="token operator">=</span> <span class="token string">'刘晨'</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment"># 上例的解法 2</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">SELECT</span> S1<span class="token punctuation">.</span>Sno<span class="token punctuation">,</span> S1<span class="token punctuation">.</span>Sname<span class="token punctuation">,</span> S1<span class="token punctuation">.</span>Sdept</pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">FROM</span> Student S1<span class="token punctuation">,</span> Student S2</pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">WHERE</span> S1<span class="token punctuation">.</span>Sdept <span class="token operator">=</span> S2<span class="token punctuation">.</span>Sdept <span class="token operator">AND</span> S2<span class="token punctuation">.</span>Sname <span class="token operator">=</span> <span class="token string">'刘晨'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token comment"># 自身链接</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token keyword">SELECT</span> S1<span class="token punctuation">.</span>Sno<span class="token punctuation">,</span> S1<span class="token punctuation">.</span>Sname<span class="token punctuation">,</span> S1<span class="token punctuation">.</span>Sdept</pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token keyword">FROM</span> Student S1<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="29"></td><td><pre>     Student S2</pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">WHERE</span> S1<span class="token punctuation">.</span>Sdept <span class="token operator">=</span> S2<span class="token punctuation">.</span>Sdept</pre></td></tr><tr><td data-num="31"></td><td><pre>  <span class="token operator">AND</span> S2<span class="token punctuation">.</span>Sname <span class="token operator">=</span> <span class="token string">'刘晨'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token comment"># [例 3.56] 查询选修了课程名为 “信息系统” 的学生学号和姓名</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> Sname</pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token keyword">WHERE</span> Sno <span class="token operator">IN</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token keyword">SELECT</span> Sno</pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token keyword">FROM</span> SC</pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token keyword">WHERE</span> Cno <span class="token operator">IN</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token keyword">SELECT</span> Cno</pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token keyword">FROM</span> Course</pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token keyword">WHERE</span> Cname <span class="token operator">=</span> <span class="token string">'信息系统'</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token comment"># 用连接查询实现 [例 3.56]</span></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> Sname</pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token keyword">FROM</span> Student<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="49"></td><td><pre>     SC<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="50"></td><td><pre>     Course</pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token keyword">WHERE</span> Student<span class="token punctuation">.</span>Sno <span class="token operator">=</span> SC<span class="token punctuation">.</span>Sno</pre></td></tr><tr><td data-num="52"></td><td><pre>  <span class="token operator">AND</span> SC<span class="token punctuation">.</span>Cno <span class="token operator">=</span> Course<span class="token punctuation">.</span>Cno</pre></td></tr><tr><td data-num="53"></td><td><pre>  <span class="token operator">AND</span> Course<span class="token punctuation">.</span>Cname <span class="token operator">=</span> <span class="token string">'信息系统'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre></pre></td></tr><tr><td data-num="55"></td><td><pre></pre></td></tr><tr><td data-num="56"></td><td><pre><span class="token comment"># [例 3.57] 找出每个学生超过他选修课程平均成绩的课程号。</span></pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token comment"># 相关子查询：子查询依赖于父查询（与父查询相关），需要反复求值</span></pre></td></tr><tr><td data-num="58"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> Cno</pre></td></tr><tr><td data-num="59"></td><td><pre><span class="token keyword">FROM</span> SC x</pre></td></tr><tr><td data-num="60"></td><td><pre><span class="token keyword">WHERE</span> Grade <span class="token operator">>=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> AVG（Grade） </pre></td></tr><tr><td data-num="61"></td><td><pre>                <span class="token keyword">FROM</span> SC y </pre></td></tr><tr><td data-num="62"></td><td><pre>                <span class="token keyword">WHERE</span> y<span class="token punctuation">.</span>Sno <span class="token operator">=</span> x<span class="token punctuation">.</span>Sno<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre></pre></td></tr><tr><td data-num="64"></td><td><pre><span class="token comment"># [例 3.58] 查询非计算机科学系中比 计算机科学系任意一个学生年龄小的学生姓名和年龄</span></pre></td></tr><tr><td data-num="65"></td><td><pre><span class="token comment"># 带有 ANY 或 ALL 谓词的子查询</span></pre></td></tr><tr><td data-num="66"></td><td><pre><span class="token keyword">SELECT</span> Sname<span class="token punctuation">,</span> Sage</pre></td></tr><tr><td data-num="67"></td><td><pre><span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="68"></td><td><pre><span class="token keyword">WHERE</span> Sage <span class="token operator">&lt;</span> <span class="token keyword">ANY</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> Sage </pre></td></tr><tr><td data-num="69"></td><td><pre>                  <span class="token keyword">FROM</span> Student </pre></td></tr><tr><td data-num="70"></td><td><pre>                  <span class="token keyword">WHERE</span> Sdept <span class="token operator">=</span> <span class="token string">' CS '</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="71"></td><td><pre><span class="token operator">AND</span> Sdept <span class="token operator">&lt;></span> <span class="token string">'CS'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="72"></td><td><pre></pre></td></tr><tr><td data-num="73"></td><td><pre><span class="token comment"># 用聚集函数实现 [例 3.58]</span></pre></td></tr><tr><td data-num="74"></td><td><pre><span class="token keyword">SELECT</span> Sname<span class="token punctuation">,</span> Sage</pre></td></tr><tr><td data-num="75"></td><td><pre><span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="76"></td><td><pre><span class="token keyword">WHERE</span> Sage <span class="token operator">&lt;</span> </pre></td></tr><tr><td data-num="77"></td><td><pre>			<span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>Sage<span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="78"></td><td><pre>             <span class="token keyword">FROM</span> Student </pre></td></tr><tr><td data-num="79"></td><td><pre>             <span class="token keyword">WHERE</span> Sdept <span class="token operator">=</span> <span class="token string">'CS '</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="80"></td><td><pre><span class="token operator">AND</span> Sdept <span class="token operator">&lt;></span> <span class="token string">'CS'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="81"></td><td><pre></pre></td></tr><tr><td data-num="82"></td><td><pre><span class="token comment"># [例 3.59] 查询非计算机科学系 中比计算机科学系所有学生年龄都小的学生姓名及年龄。</span></pre></td></tr><tr><td data-num="83"></td><td><pre><span class="token comment"># 方法一：用 ALL 谓词</span></pre></td></tr><tr><td data-num="84"></td><td><pre><span class="token keyword">SELECT</span> Sname<span class="token punctuation">,</span> Sage</pre></td></tr><tr><td data-num="85"></td><td><pre><span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="86"></td><td><pre><span class="token keyword">WHERE</span> Sage <span class="token operator">&lt;</span> <span class="token keyword">ALL</span> </pre></td></tr><tr><td data-num="87"></td><td><pre>			<span class="token punctuation">(</span><span class="token keyword">SELECT</span> Sage </pre></td></tr><tr><td data-num="88"></td><td><pre>             <span class="token keyword">FROM</span> Student </pre></td></tr><tr><td data-num="89"></td><td><pre>             <span class="token keyword">WHERE</span> Sdept <span class="token operator">=</span> <span class="token string">'CS'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="90"></td><td><pre><span class="token operator">AND</span> Sdept <span class="token operator">&lt;></span> <span class="token string">'CS'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="91"></td><td><pre></pre></td></tr><tr><td data-num="92"></td><td><pre><span class="token comment"># 方法二：用聚集函数</span></pre></td></tr><tr><td data-num="93"></td><td><pre><span class="token keyword">SELECT</span> Sname<span class="token punctuation">,</span> Sage</pre></td></tr><tr><td data-num="94"></td><td><pre><span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="95"></td><td><pre><span class="token keyword">WHERE</span> Sage <span class="token operator">&lt;</span> </pre></td></tr><tr><td data-num="96"></td><td><pre>			<span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>Sage<span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="97"></td><td><pre>             <span class="token keyword">FROM</span> Student </pre></td></tr><tr><td data-num="98"></td><td><pre>             <span class="token keyword">WHERE</span> Sdept <span class="token operator">=</span> <span class="token string">'CS'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="99"></td><td><pre><span class="token operator">AND</span> Sdept <span class="token operator">&lt;></span> <span class="token string">'CS'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="100"></td><td><pre></pre></td></tr><tr><td data-num="101"></td><td><pre><span class="token comment"># [例 3.60] 查询所有选修了 1 号课程的学生姓名。</span></pre></td></tr><tr><td data-num="102"></td><td><pre><span class="token comment"># 带有 EXIST 谓词的子查询不返回任何数据，只产生逻辑真值 “true” 或逻辑假植 “false”</span></pre></td></tr><tr><td data-num="103"></td><td><pre><span class="token keyword">SELECT</span> Sname</pre></td></tr><tr><td data-num="104"></td><td><pre><span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="105"></td><td><pre><span class="token keyword">WHERE</span> <span class="token keyword">EXISTS</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="106"></td><td><pre>              <span class="token keyword">SELECT</span> <span class="token operator">*</span></pre></td></tr><tr><td data-num="107"></td><td><pre>              <span class="token keyword">FROM</span> SC</pre></td></tr><tr><td data-num="108"></td><td><pre>              <span class="token keyword">WHERE</span> Sno <span class="token operator">=</span> Student<span class="token punctuation">.</span>Sno <span class="token operator">AND</span> Cno <span class="token operator">=</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="109"></td><td><pre></pre></td></tr><tr><td data-num="110"></td><td><pre><span class="token comment">#  [例 3.61] 查询没有选修 1 号课程的学生姓名。</span></pre></td></tr><tr><td data-num="111"></td><td><pre><span class="token keyword">SELECT</span> Sname</pre></td></tr><tr><td data-num="112"></td><td><pre><span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="113"></td><td><pre><span class="token keyword">WHERE</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="114"></td><td><pre>        <span class="token keyword">SELECT</span> <span class="token operator">*</span></pre></td></tr><tr><td data-num="115"></td><td><pre>        <span class="token keyword">FROM</span> SC</pre></td></tr><tr><td data-num="116"></td><td><pre>        <span class="token keyword">WHERE</span> Sno <span class="token operator">=</span> Student<span class="token punctuation">.</span>Sno</pre></td></tr><tr><td data-num="117"></td><td><pre>          <span class="token operator">AND</span> Cno <span class="token operator">=</span> <span class="token string">'1'</span></pre></td></tr><tr><td data-num="118"></td><td><pre>    <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="119"></td><td><pre></pre></td></tr><tr><td data-num="120"></td><td><pre><span class="token comment"># [例 3.55] 查询与 “刘晨” 在同一 个系学习的学生。</span></pre></td></tr><tr><td data-num="121"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> Sname<span class="token punctuation">,</span> Sdept</pre></td></tr><tr><td data-num="122"></td><td><pre><span class="token keyword">FROM</span> Student S1</pre></td></tr><tr><td data-num="123"></td><td><pre><span class="token keyword">WHERE</span> <span class="token keyword">EXISTS</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="124"></td><td><pre>              <span class="token keyword">SELECT</span> <span class="token operator">*</span></pre></td></tr><tr><td data-num="125"></td><td><pre>              <span class="token keyword">FROM</span> Student S2</pre></td></tr><tr><td data-num="126"></td><td><pre>              <span class="token keyword">WHERE</span> S2<span class="token punctuation">.</span>Sdept <span class="token operator">=</span> S1<span class="token punctuation">.</span>Sdept</pre></td></tr><tr><td data-num="127"></td><td><pre>              <span class="token operator">AND</span> S2<span class="token punctuation">.</span>Sname <span class="token operator">=</span> <span class="token string">'刘晨'</span></pre></td></tr><tr><td data-num="128"></td><td><pre>          <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="129"></td><td><pre></pre></td></tr><tr><td data-num="130"></td><td><pre><span class="token comment"># [例 3.62] 查询选修了全部课程的学生姓名。</span></pre></td></tr><tr><td data-num="131"></td><td><pre><span class="token comment"># 存在量词表示全称量词</span></pre></td></tr><tr><td data-num="132"></td><td><pre><span class="token comment"># 即，不存在没有修过的课程</span></pre></td></tr><tr><td data-num="133"></td><td><pre><span class="token keyword">SELECT</span> Sname</pre></td></tr><tr><td data-num="134"></td><td><pre><span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="135"></td><td><pre><span class="token keyword">WHERE</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="136"></td><td><pre>        <span class="token keyword">SELECT</span> <span class="token operator">*</span></pre></td></tr><tr><td data-num="137"></td><td><pre>        <span class="token keyword">FROM</span> Course</pre></td></tr><tr><td data-num="138"></td><td><pre>        <span class="token keyword">WHERE</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="139"></td><td><pre>                <span class="token keyword">SELECT</span> <span class="token operator">*</span> </pre></td></tr><tr><td data-num="140"></td><td><pre>            	<span class="token keyword">FROM</span> SC </pre></td></tr><tr><td data-num="141"></td><td><pre>            	<span class="token keyword">WHERE</span> Sno <span class="token operator">=</span> Student<span class="token punctuation">.</span>Sno </pre></td></tr><tr><td data-num="142"></td><td><pre>            		<span class="token operator">AND</span> Cno <span class="token operator">=</span> Course<span class="token punctuation">.</span>Cno</pre></td></tr><tr><td data-num="143"></td><td><pre>            <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="144"></td><td><pre>    <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="145"></td><td><pre></pre></td></tr><tr><td data-num="146"></td><td><pre><span class="token comment"># [例 3.62] 改</span></pre></td></tr><tr><td data-num="147"></td><td><pre><span class="token keyword">SELECT</span> Sname</pre></td></tr><tr><td data-num="148"></td><td><pre><span class="token keyword">FROM</span> student</pre></td></tr><tr><td data-num="149"></td><td><pre><span class="token keyword">WHERE</span> Sno <span class="token operator">IN</span> <span class="token punctuation">(</span></pre></td></tr><tr><td data-num="150"></td><td><pre>    <span class="token keyword">SELECT</span> Sno</pre></td></tr><tr><td data-num="151"></td><td><pre>    <span class="token keyword">FROM</span> SC</pre></td></tr><tr><td data-num="152"></td><td><pre>    <span class="token keyword">Group</span> <span class="token keyword">by</span> Sno</pre></td></tr><tr><td data-num="153"></td><td><pre>    <span class="token keyword">HAVING</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> course<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="154"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="155"></td><td><pre></pre></td></tr><tr><td data-num="156"></td><td><pre><span class="token comment"># [例 3.63] 查询至少选修了学生 201215122 选修的全部课程的学生号码。</span></pre></td></tr><tr><td data-num="157"></td><td><pre><span class="token comment"># 不存在这样的课程 y，学生 201215122 选修了 y，而学生 x 没有选。</span></pre></td></tr><tr><td data-num="158"></td><td><pre><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> Sno</pre></td></tr><tr><td data-num="159"></td><td><pre><span class="token keyword">FROM</span> SC SCX</pre></td></tr><tr><td data-num="160"></td><td><pre><span class="token keyword">WHERE</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">(</span>  <span class="token comment"># 学生 201215122 选修了而学生 x 没有选的课程</span></pre></td></tr><tr><td data-num="161"></td><td><pre>        <span class="token keyword">SELECT</span> <span class="token operator">*</span></pre></td></tr><tr><td data-num="162"></td><td><pre>        <span class="token keyword">FROM</span> SC SCY</pre></td></tr><tr><td data-num="163"></td><td><pre>        <span class="token keyword">WHERE</span> SCY<span class="token punctuation">.</span>Sno <span class="token operator">=</span> <span class="token string">'201215122'</span> <span class="token operator">AND</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="164"></td><td><pre>                <span class="token keyword">SELECT</span> <span class="token operator">*</span>  <span class="token comment"># 学生 x 选修的课程 y</span></pre></td></tr><tr><td data-num="165"></td><td><pre>                <span class="token keyword">FROM</span> SC SCZ</pre></td></tr><tr><td data-num="166"></td><td><pre>                <span class="token keyword">WHERE</span> SCZ<span class="token punctuation">.</span>Sno <span class="token operator">=</span> SCX<span class="token punctuation">.</span>Sno</pre></td></tr><tr><td data-num="167"></td><td><pre>                  <span class="token operator">AND</span> SCZ<span class="token punctuation">.</span>Cno <span class="token operator">=</span> SCY<span class="token punctuation">.</span>Cno</pre></td></tr><tr><td data-num="168"></td><td><pre>            <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="169"></td><td><pre>    <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="集合操作"><a class="anchor" href="#集合操作">#</a> 集合操作</h3><ul><li><p>并操作 UNION<br>交操作 INTERSECT<br>差操作 EXCEPT</p></li><li><p>UNION：将多个查询结果合并起来时，系统自动去掉重复元组<br>UNION ALL：将多个查询结果合并起来时，保留重复元组</p></li></ul><p>&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxODE2NTMzNDk3NC5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618165334974.png</span>&quot; alt=&quot;image-20220618165334974&quot; /&gt;</p><p>&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxODE2NTM0NTI1NC5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618165345254.png</span>&quot; alt=&quot;image-20220618165345254&quot; /&gt;</p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618165424605.png" alt="image-20220618165424605"></p><h3 id="基于派生表的查询"><a class="anchor" href="#基于派生表的查询">#</a> 基于派生表的查询</h3><p>通过 FROM 子句生成派生标的时候，AS 关键字可以省略，<strong>派生关系必须指定一个别名</strong></p><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> Cno</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">FROM</span> SC<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> <span class="token function">Avg</span><span class="token punctuation">(</span>Grade<span class="token punctuation">)</span> <span class="token keyword">FROM</span> SC <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> Sno<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token keyword">AS</span> Avg_sc<span class="token punctuation">(</span>avg_sno<span class="token punctuation">,</span> avg_grade<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token keyword">WHERE</span> SC<span class="token punctuation">.</span>Sno <span class="token operator">=</span> Avg_sc<span class="token punctuation">.</span>avg_sno <span class="token operator">AND</span> SC<span class="token punctuation">.</span>Grade <span class="token operator">>=</span> Avg_sc<span class="token punctuation">.</span>avg_grade<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">SELECT</span> Sname</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">FROM</span> Student<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> Sno <span class="token keyword">FROM</span> SC <span class="token keyword">WHERE</span> Cno<span class="token operator">=</span><span class="token string">'1'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> SC1</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">WHERE</span> Student<span class="token punctuation">.</span>Sno<span class="token operator">=</span>SC1<span class="token punctuation">.</span>Sno</pre></td></tr></table></figure><h2 id="35-数据更新"><a class="anchor" href="#35-数据更新">#</a> 3.5 数据更新</h2><ul><li>插入和修改和删除</li></ul><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">INSERT</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">INTO</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>属性列<span class="token number">1</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>属性列<span class="token number">2</span> <span class="token operator">></span>…<span class="token punctuation">)</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>常量<span class="token number">1</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>常量<span class="token number">2</span><span class="token operator">></span><span class="token punctuation">]</span>… <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>             </pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">UPDATE</span>  <span class="token operator">&lt;</span>表名<span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">SET</span>  <span class="token operator">&lt;</span>列名<span class="token operator">>=</span><span class="token operator">&lt;</span>表达式<span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>列名<span class="token operator">>=</span><span class="token operator">&lt;</span>表达式<span class="token operator">></span><span class="token punctuation">]</span>…</pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>条件<span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>   </pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">DELETE</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">FROM</span>     <span class="token operator">&lt;</span>表名<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>条件<span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr></table></figure><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">INSERT</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">INTO</span> Student<span class="token punctuation">(</span>Sno<span class="token punctuation">,</span> Cno<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'201215128'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">INSERT</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">INTO</span> Dept_age<span class="token punctuation">(</span>Sdept<span class="token punctuation">,</span> Avg_age<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">SELECT</span> Sdept<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>Sage<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> Sdept<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">UPDATE</span> Student</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">SET</span> Sage <span class="token operator">=</span> <span class="token number">22</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">WHERE</span> Sno <span class="token operator">=</span> <span class="token string">'211250106'</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">DELETE</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">From</span> Student</pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">WHERE</span> Sno <span class="token operator">=</span> <span class="token string">'211250106'</span></pre></td></tr></table></figure><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618165546535.png" alt="image-20220618165546535"></p><h2 id="36-空值的处理重要"><a class="anchor" href="#36-空值的处理重要">#</a> 3.6 空值的处理（重要）</h2><ul><li>空值就是 “不知道” 或 “不存在” 或 “无意义” 的值。</li><li>一般有以下几种情况：<ul><li>该属性应该有一个值，但目前不知道它的具体值<br>该属性不应该有值<br>由于某种原因不便于填写，或还没有赋值</li></ul></li></ul><p>判断空值用 <code>IS NULL</code> 或 <code>IS NOT NULL</code> 。</p><p>有 <code>NOT NULL</code> 限制的 <code>UNIQUE</code> 属性不能为空值，码不能为空值。</p><p>空值与其他值的算术运算结果为空值，空值与其他值的比较运算结果为 <code>UNKNOWN</code> 。</p><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># [例 3.83] 选出选修 1 号课程的不及格的学生以及缺考的学生。</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">SELECT</span> Sno</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">FROM</span> SC</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">WHERE</span> Grade <span class="token operator">&lt;</span> <span class="token number">60</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token operator">AND</span> Cno <span class="token operator">=</span> <span class="token string">'1'</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">UNION</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">SELECT</span> Sno</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">FROM</span> SC</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">WHERE</span> Grade <span class="token operator">IS</span> <span class="token boolean">NULL</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token operator">AND</span> Cno <span class="token operator">=</span> <span class="token string">'1'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment"># 或者</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">SELECT</span> Sno</pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">FROM</span> SC</pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">WHERE</span> Cno <span class="token operator">=</span> <span class="token string">'1'</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token operator">AND</span> <span class="token punctuation">(</span>Grade <span class="token operator">&lt;</span> <span class="token number">60</span> <span class="token operator">OR</span> Grade <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul><li>属性定义（或者域定义）中<ul><li>有 NOT NULL 约束条件的不能取空值<br>加了 UNIQUE 限制的属性不能取空值<br>码属性不能取空值</li></ul></li></ul><p>&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxODE2NTgxNDMxMC5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618165814310.png</span>&quot; alt=&quot;image-20220618165814310&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxODE2NTgyMTg3Ni5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618165821876.png</span>&quot; alt=&quot;image-20220618165821876&quot; /&gt;</p><h2 id="37-视图"><a class="anchor" href="#37-视图">#</a> 3.7 视图</h2><ul><li><p>基本表定义：基本表式独立存在的表，在 SQL 中一个关系就对应一个表</p></li><li><p>视图定义：<strong>视图是由数据库中的一个表或多个表导出的虚拟表</strong>，其作用是方便用户对数据的操作。</p></li><li><p>基本表和视图的区别和联系：</p><ul><li><p>视图在概念上与基本表等同，用户可以像基本表一样使用视图</p></li><li><p><strong>只存放视图的定义</strong>，不存放视图对应的数据</p></li><li><p>基表中的数据发生变化，从视图中查询出的数据也随之改变</p></li></ul></li><li><p>视图的作用</p><ul><li>能够简化用户的操作（视图中数据不是直接来自基本表时，能简化）</li><li>能使用户以多种角度看待同一数据</li><li>对重构数据库提供了一定程度的<strong>逻辑独立性</strong></li><li>能够对机密数据<strong>提供安全保护</strong>（每个用户只能看到他有权看到的数据）</li><li>适当的利用视图可以更清晰的表达查询<img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618170303260.png" alt="image-20220618170303260"></li></ul></li><li><p>哪些可以更新？</p></li><li><p>行列子集视图</p><ul><li>若一个视图是从单个基本表导出的，并且只是去掉了基本表的某些行和某些列，但保留了主码，我们称这类视图为行列子集视图</li></ul></li><li><p>非行列子集视图</p></li><li><p>视图不仅可以建立在一个或多个基本表上，也可以建立在一个或多个已定义好的视图上，或建立在基本表与视图上</p></li></ul><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> <span class="token operator">&lt;</span>视图名<span class="token operator">></span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>列名<span class="token operator">></span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>列名<span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">AS</span> <span class="token operator">&lt;</span>子查询<span class="token operator">></span> <span class="token punctuation">[</span><span class="token keyword">WITH</span> <span class="token keyword">CHECK</span> <span class="token keyword">OPTION</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># WITH CKECK OPTION 表示对视图进行更新操作时要保证更新后的行满足谓词条件（即子查询中的条件，即子查询中的 WHERE）</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 子查询可以是任意的 SELECT 语句，是否可以含有 ORDER BY 子句和 DISTINCT 短语，则决定具体系统的实现。</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># [例 3.85] 建立信息系学生 的视图，并要求进行修改 和插入操作时仍需保证该 视图只有信息系的学生。</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> IS_Student <span class="token keyword">AS</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> Sname<span class="token punctuation">,</span> Sage</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">WHERE</span> Sdept <span class="token operator">=</span> <span class="token string">'IS'</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">WITH</span> <span class="token keyword">CHECK</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment"># [例 3.86] 建立信息系选修了 1 号课程的学生的视图（包括学号、 姓名、成绩）。</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> IS_S1<span class="token punctuation">(</span>Sno<span class="token punctuation">,</span> Sname<span class="token punctuation">,</span> Grade<span class="token punctuation">)</span> <span class="token keyword">AS</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">SELECT</span> Student<span class="token punctuation">.</span>Sno<span class="token punctuation">,</span> Sname<span class="token punctuation">,</span> Grade</pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">FROM</span> Student<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>     SC</pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">WHERE</span> Sdept <span class="token operator">=</span> <span class="token string">'IS'</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token operator">AND</span> Student<span class="token punctuation">.</span>Sno <span class="token operator">=</span> SC<span class="token punctuation">.</span>Sno</pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token operator">AND</span> SC<span class="token punctuation">.</span>Cno <span class="token operator">=</span> <span class="token string">'1'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token comment"># [例 3.87] 建立信息系选修 了 1 号课程且成绩在 90 分 以上的学生的视图。</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> IS_S2 <span class="token keyword">AS</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> Sname<span class="token punctuation">,</span> Grade</pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">FROM</span> IS_S1</pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token keyword">WHERE</span> Grade <span class="token operator">>=</span> <span class="token number">90</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token comment"># [例 3.88] 定义一个反映学 生出生年份的视图。</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> BT_S<span class="token punctuation">(</span>Sno<span class="token punctuation">,</span> Sname<span class="token punctuation">,</span> Sbirth<span class="token punctuation">)</span> <span class="token keyword">AS</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> Sname<span class="token punctuation">,</span> <span class="token number">2014</span> <span class="token operator">-</span> Sage</pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token keyword">FROM</span> Student<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token comment"># [例 3.89] 将学生的学号及平 均成绩定义为一个视图</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> S_G<span class="token punctuation">(</span>Sno<span class="token punctuation">,</span> Gavg<span class="token punctuation">)</span> <span class="token keyword">AS</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>Grade<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token keyword">FROM</span> SC</pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> Sno<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token comment"># [例 3.90] 将 Student 表中所有女生记 录定义为一个视图</span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token comment"># 修改基表 Student 的结构后，Student 表与 F_Student 视图 的映象关系被破坏，导致该视图不能正确工作。</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> F_Student<span class="token punctuation">(</span>F_Sno<span class="token punctuation">,</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> age<span class="token punctuation">,</span> dept<span class="token punctuation">)</span> <span class="token keyword">AS</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token comment">/* 不指定属性列 */</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token keyword">WHERE</span> Ssex <span class="token operator">=</span> <span class="token string">'女'</span><span class="token punctuation">;</span></pre></td></tr></table></figure><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> <span class="token operator">&lt;</span>视图名<span class="token operator">></span><span class="token punctuation">[</span><span class="token keyword">CASCADE</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># [例 3.91] 删除视图 BT_S 和 IS_S1</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> BT_S<span class="token punctuation">;</span> <span class="token comment">/* 成功执行 */</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> IS_S1<span class="token punctuation">;</span> <span class="token comment">/* 拒绝执行 */</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> IS_S1 <span class="token keyword">CASCADE</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># 成功执行</span></pre></td></tr></table></figure><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># [例 3.92] 在信息系学生的视 图中找出年龄小于 20 岁的学生。</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> Sage</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">FROM</span> IS_Student</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">WHERE</span> Sage <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># 视图消解转换后的查询语句为：</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> Sage</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">FROM</span> Student</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">WHERE</span> Sdept <span class="token operator">=</span> <span class="token string">'IS'</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token operator">AND</span> Sage <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment"># [例 3.93] 查询选修了 1 号课 程的信息系学生</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">SELECT</span> IS_Student<span class="token punctuation">.</span>Sno<span class="token punctuation">,</span> Sname</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">FROM</span> IS_Student<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>     SC</pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">WHERE</span> IS_Student<span class="token punctuation">.</span>Sno <span class="token operator">=</span> SC<span class="token punctuation">.</span>Sno</pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token operator">AND</span> SC<span class="token punctuation">.</span>Cno <span class="token operator">=</span> <span class="token string">'1'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment"># [例 3.94] 在 S_G 视图中查询平均成 绩在 90 分以上的学生学号和平均成绩</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">SELECT</span> <span class="token operator">*</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">FROM</span> S_G</pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">WHERE</span> Gavg <span class="token operator">>=</span> <span class="token number">90</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token comment"># S_G 视图的子查询定义：</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>Grade<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token keyword">FROM</span> SC</pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> Sno<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token comment"># 错误：</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>Grade<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">FROM</span> SC</pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token keyword">WHERE</span> <span class="token function">AVG</span><span class="token punctuation">(</span>Grade<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">90</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> Sno<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token comment"># 正确：</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>Grade<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token keyword">FROM</span> SC</pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> Sno</pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token keyword">HAVING</span> <span class="token function">AVG</span><span class="token punctuation">(</span>Grade<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">90</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token comment"># 或者使用派生表</span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token keyword">SELECT</span> <span class="token operator">*</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token keyword">FROM</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>Grade<span class="token punctuation">)</span> <span class="token keyword">FROM</span> SC <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> Sno<span class="token punctuation">)</span> <span class="token keyword">AS</span> S_G<span class="token punctuation">(</span>Sno<span class="token punctuation">,</span> Gavg<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token keyword">WHERE</span> Gavg <span class="token operator">>=</span> <span class="token number">90</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h1 id="第4章-数据库安全性"><a class="anchor" href="#第4章-数据库安全性">#</a> 第 4 章 数据库安全性</h1><blockquote><p>ppt 23-25</p></blockquote><p>数据库的安全性是<strong>指保护数据库以防止不合法使用所造成的数据泄露、更改或破坏</strong></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230609212932647.png" alt="image-20230609212932647"></p><p>C1 进行自主存取控制 DAC</p><p>C2 是安全产品的最低档次</p><p>B1 实施强制存取控制 MAC，是真正意义上的安全产品</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230609213543484.png" alt="image-20230609213543484"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230609213523289.png" alt="image-20230609213523289"></p><ul><li><p>存取控制（机制）</p><ul><li><p>定义用户权限：用户对某一数据对象的操作权力称为权限，<strong>DBMS 提供适当的语言来定义用户权限，存放在数据字典中</strong></p></li><li><p>合法权限检查：<strong>用户发出存取数据库操作请求，DBMS 进行合法权限检查</strong></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230612220056903.png" alt="image-20230612220056903"></p></li></ul></li><li><p>自主存取控制（DAC Discretionary Access ControlS）</p><ul><li>C2 级</li><li>用户对不同的数据对象有不同的存取权限</li><li>不同的用户对同一对象也有不同的权限</li><li>用户还可将其拥有的存取权限转授给其他用户</li><li>使用 SQL 中的 <code>GRANT</code> 和 <code>REVOKE</code><ul><li>定义各个用户对不同数据对象的存取权限。当用户对数据库访问时首先检查用户的存取权限。防止不合法用户对数据库的存取</li><li><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230609214048305.png" alt="image-20230609214048305"></li><li><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230609214115426.png" alt="image-20230609214115426"></li></ul></li><li>创建数据库模式的权限<ul><li><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230609214245214.png" alt="image-20230609214245214"></li><li><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230609214253774.png" alt="image-20230609214253774"></li></ul></li><li>数据库角色<ul><li>CREATE</li><li>GRANT</li><li>REVOKE</li></ul></li><li>自主存取控制缺点<ul><li>可能存在数据的 “无意泄露 “，数据本身并无安全性标记</li></ul></li></ul></li><li><p>强制存取控制 （MAC)</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230612220035959.png" alt="image-20230612220035959"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230612220234134.png" alt="image-20230612220234134"></p><ul><li>B1 级，保证更高程度的安全性</li><li>每一个数据对象被标以一定的密级</li><li>每一个用户也被授予某一个级别的许可证</li><li>对于任意一个对象，只有具有合法许可证的用户才可以存取</li><li>用户不能直接感知或进行控制</li><li>适用于对数据有严格而固定密级分类的部门<ul><li>军事部门</li><li>政府部门</li></ul></li></ul></li></ul><p>&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxODE3MTMzMjM4MC5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618171332380.png</span>&quot; alt=&quot;image-20220618171332380&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxODE3MTI0NDU2NS5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618171244565.png</span>&quot; alt=&quot;image-20220618171244565&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxODE3MTI1NTAzOS5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618171255039.png</span>&quot; alt=&quot;image-20220618171255039&quot; /&gt;</p><p>强制存取规则为什么要这么设计，有什么内容？要知道</p><ul><li>高等级才能知晓，低等级才能修改。（低级别可以通过写，来让高级别知道自己的修改）</li><li>避免高等级的主观失误或故意而造成的泄密。</li><li>并且数据无论怎么复制，密级都是固定的，一旦数据被发布，不能被修改</li></ul><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230609214755656.png" alt="image-20230609214755656"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230609213138851.png" alt="image-20230609213138851"></p><p>关注 C1\C2\A1 的对应关系</p><ul><li>视图<ul><li>把<strong>要保密的数据对无权存取这些数据的用户隐藏起来</strong>，对数据提供一定程度的安全保护</li><li><code>CREATE VIEW [viewname]</code></li><li><code>GRANT SELECT ON [view] to [user]</code></li></ul></li><li>审计<ul><li>启用一个专用的审计日志（Audit Log）<strong>将用户对数据库的所有操作记录在上面</strong></li><li>审计员利用审计日志监控数据库中的各种行为，找出非法存取数据的人、时间和内容</li><li>C2 以上安全级别的 DBMS 必须具有审计功能</li><li>审计可选<ul><li>耗费时间和空间</li><li>DBA 可以根据应用对安全性的要求，灵活地打开或关闭审计功能</li><li>用于安全性要求较高的部门</li></ul></li><li>审计事件</li><li>审计功能</li><li>AUDIT\NOAUDIT</li></ul></li><li>数据加密<ul><li>防止数据库中数据在<strong>存储和传输</strong>中失密的有效手段</li><li>根据一定的算法将原始数据明文（ Plain text ）变换为不可直接识别的格式 密文（ Cipher text）</li><li>加密方法<ul><li>存储加密<ul><li>透明存储加密</li><li>非透明存储加密</li></ul></li><li>传输加密<ul><li>链路加密</li><li>端到端加密</li></ul></li></ul></li></ul></li><li>其他安全性保护<ul><li>推理控制</li><li>隐蔽信道</li><li>数据隐私保护</li></ul></li></ul><h1 id="第5章-数据库完整性"><a class="anchor" href="#第5章-数据库完整性">#</a> 第 5 章 数据库完整性</h1><blockquote><p>ppt 26-31</p></blockquote><p>数据库的完整性是指数据的<strong>正确性</strong>和<strong>相容性</strong>。</p><ul><li>完整性机制：<ol><li>（定义功能）提供定义完整性约束条件的机制</li><li>（检查功能）提供完整性检查的方法</li><li>（违约处理功能）</li></ol></li></ul><ul><li><p>实体完整性 <code>PRIMARY KEY</code></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230610132519644.png" alt="image-20230610132519644"></p><ul><li>区分列级、表级定义</li><li>PRIMARY KEY is <strong>UNIQUE</strong></li><li>PRIMARY KEY is <strong>NOT NULL</strong></li><li>PRIMARY KEY has <strong>INDEX</strong></li><li>完整性检查和违约处理<ul><li>全表扫描（耗时）</li><li>索引，如 B + 数索引</li></ul></li></ul></li><li><p>参照完整性 <code>FOREIGN KEY [] REFERENCES []</code></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230610132531345.png" alt="image-20230610132531345"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230610133451722.png" alt="image-20230610133451722"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230610132556407.png" alt="image-20230610132556407"></p><ul><li>违约处理<ul><li><strong>NO ACTION</strong>: 不允许该操作执行</li><li><strong>CASCADE</strong>: 当删除或修改被参照表（Student）的一个元组造成了与参照表（SC）的不一致，则删除或修改参照表中的所有造成不一致的元组</li><li><strong>SET-NULL</strong>: 当删除或修改被参照表的一个元组时造成了不一致，则将参照表中的所有造成不一致的元组的对应属性设置为空值。</li></ul></li></ul></li><li><p>用户定义完整性 <code>CONTRAINT [约束名](随便取的名字)　[约束条件]</code> （跟在哪个属性后面就对哪个属性生效）</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230610134615830.png" alt="image-20230610134615830"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230610134712028.png" alt="image-20230610134712028"></p><ul><li>NOT NULL</li><li>UNIQUE</li><li>CHECK (条件)<ul><li>eg: <code>CHECK (Ssex='女' OR Sname NOT LIKE 'Ms.%')</code></li><li>当学生的性别是男时，其名字不能以 Ms. 打头。</li></ul></li><li>CREATE/ALTER</li></ul></li><li><p>断言（不做要求了）</p><ul><li><p><code>CREATE ASSERTION &lt;断言名&gt; &lt;CHECK 子句&gt;</code></p></li><li><p><code>DROP ASSERTION &lt;断言名&gt;</code></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230610135037129.png" alt="image-20230610135037129"></p></li><li><p>断言创建以后，任何对断言中所涉及的关系的操作都会触发关系数据库管理系统对断言的检查，任何使断言不为真值的操作都会被拒绝执行</p></li></ul></li><li><p>触发器（Trigger）是用户定义在关系表上的<strong>一类由事件驱动的特殊过程</strong></p><ul><li>触发器又叫作<strong>事件 - 条件 - 动作</strong>规则。</li><li>触发器保存在数据库服务器中</li><li>任何用户对表的增、删、改操作均由服务器自动激活相应的触发器</li><li>触发器可以实施更为复杂的检查和操作，具有更精细和更强大的数据控制能力</li><li>触发器的执行，是由触发事件激活的，并由数据库服务器自动执行</li><li>一个数据表上可能定义了多个触发器，遵循如下的执行顺序:<ul><li>执行该表上的 BEFORE 触发器；（谁先创建，谁先执行）</li><li>激活触发器的 SQL 语句；</li><li>执行该表上的 AFTER 触发器。</li></ul></li></ul></li></ul><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> <span class="token operator">&lt;</span>触发器名<span class="token operator">></span> &#123;BEFORE <span class="token operator">|</span> <span class="token keyword">AFTER</span>&#125; <span class="token operator">&lt;</span>触发事件<span class="token operator">></span> </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">ON</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span> REFERENCING NEW<span class="token operator">|</span>OLD <span class="token keyword">ROW</span> <span class="token keyword">AS</span><span class="token operator">&lt;</span>变量<span class="token operator">></span> </pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">FOR</span> EACH &#123;<span class="token keyword">ROW</span> <span class="token operator">|</span> STATEMENT&#125;</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span><span class="token keyword">WHEN</span> <span class="token operator">&lt;</span>触发条件<span class="token operator">></span><span class="token punctuation">]</span><span class="token operator">&lt;</span>触发动作体<span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#[例 5.21] 当对表 SC 的 Grade 属性进行修改时，若分数增加了 10% 则将此次操作记录到下面表中：SC_U（Sno,Cno,Oldgrade,Newgrade）其中 Oldgrade 是修改前的分数，Newgrade 是修改后的分数。</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span>  SC_T		</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">AFTER</span> <span class="token keyword">UPDATE</span> <span class="token keyword">OF</span> Grade <span class="token keyword">ON</span> SC</pre></td></tr><tr><td data-num="9"></td><td><pre> <span class="token comment">/* 指明触发器激活的时间是在执行 UPDATE 后 */</span> </pre></td></tr><tr><td data-num="10"></td><td><pre>REFERENCING</pre></td></tr><tr><td data-num="11"></td><td><pre>	    OLD <span class="token keyword">row</span> <span class="token keyword">AS</span>  OldTuple<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	    NEW <span class="token keyword">row</span> <span class="token keyword">AS</span>  NewTuple</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">FOR EACH ROW</span> <span class="token comment">/* 行级触发器 */</span> </pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">/* FOR EACH STATEMENT 语句级触发器 */</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">WHEN</span> <span class="token punctuation">(</span>NewTuple<span class="token punctuation">.</span>Grade <span class="token operator">>=</span> <span class="token number">1.1</span><span class="token operator">*</span>OldTuple<span class="token punctuation">.</span>Grade<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	    <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> SC_U<span class="token punctuation">(</span>Sno<span class="token punctuation">,</span>Cno<span class="token punctuation">,</span>OldGrade<span class="token punctuation">,</span>NewGrade<span class="token punctuation">)</span>  </pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">VALUES</span><span class="token punctuation">(</span>OldTuple<span class="token punctuation">.</span>Sno<span class="token punctuation">,</span>OldTuple<span class="token punctuation">.</span>Cno<span class="token punctuation">,</span>OldTuple<span class="token punctuation">.</span>Grade<span class="token punctuation">,</span>NewTuple<span class="token punctuation">.</span>Grade<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">DROP</span> <span class="token keyword">TRIGGER</span> <span class="token operator">&lt;</span>触发器名<span class="token operator">></span> <span class="token keyword">ON</span> <span class="token operator">&lt;</span>表名<span class="token operator">></span></pre></td></tr></table></figure><h1 id="第6章-关系数据理论必考"><a class="anchor" href="#第6章-关系数据理论必考">#</a> 第 6 章 关系数据理论（必考）</h1><blockquote><p>ppt 32-36</p></blockquote><h2 id="基本概念-2"><a class="anchor" href="#基本概念-2">#</a> 基本概念</h2><ul><li><p>关系模式，是一个五元组： <code>R(U,D,DOM,F)</code> ，</p></li><li><p>数据依赖：是一个关系内部属性与属性之间的一种约束关系，通过属性间值的相等与否体现出来的数据间相关联系</p><ul><li><p>多值依赖（Multi-Valued Dependency，MD）</p></li><li><p>函数依赖 （Functional Dependency，FD）</p><ul><li>Y 函数依赖于 X : X-&gt;Y ，若 X -&gt; Y 且 Y -&gt; X，则 X&lt;--&gt;Y</li><li>Sname = f (Sno)，一个学号只对应一个学生的姓名</li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618173849601.png" alt="image-20220618173849601"></p><ul><li><p>平凡函数依赖、非平凡函数依赖 、完全函数依赖</p><p>&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxODE3MzkxODQ5Ni5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618173918496.png</span>&quot; alt=&quot;image-20220618173918496&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxODE3MzkzNDY2Mi5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618173934662.png</span>&quot; alt=&quot;image-20220618173934662&quot; /&gt;</p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618174104550.png" alt="image-20220618174104550"></p></li></ul></li><li><p>码、候选码、主码、主属性、非主属性、全码（整个属性组是码）、超码</p></li></ul></li><li><p>规范化 ：一个低一级范式的关系模式，通过<strong>模式分解</strong>可以转换为若干个高一级范式的关系模式的集合，这种过程就叫规范化。</p><p>（此处有图 见 PDF）</p></li></ul><h2 id="1nf"><a class="anchor" href="#1nf">#</a> 1NF</h2><ul><li>第一范式 (1NF) : 作为二维表，关系要符合一个最基本的条件：每个分量必须是不可分开的数据项。<strong>（属性不可再分）</strong></li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618173604608.png" alt="image-20220618173604608"></p><p>&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxODE3MzYyMDIxNi5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618173620216.png</span>&quot; alt=&quot;image-20220618173620216&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxODE3MzYyODUyNS5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618173628525.png</span>&quot; alt=&quot;image-20220618173628525&quot; /&gt;</p><h2 id="2nf"><a class="anchor" href="#2nf">#</a> 2NF</h2><ul><li>第二范式（2NF）: 若关系模式 R∈1NF，并且每一个非主属性都完全函数依赖于任何一个候选码，则 R∈2NF。 <strong>（非主键要完全依赖候选码）</strong></li></ul><p>&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxODE3NDQyOTQ4Ni5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618174429486.png</span>&quot; alt=&quot;image-20220618174429486&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxODE3NDQzNjU0MC5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618174436540.png</span>&quot; alt=&quot;image-20220618174436540&quot; /&gt;</p><p>实例</p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618174501389.png" alt="image-20220618174501389"></p><h2 id="3nf"><a class="anchor" href="#3nf">#</a> 3NF</h2><ul><li>第三范式（3NF）: 设关系模式<em> R</em>&lt;<em>U</em>,<em>F</em>&gt;∈1NF, 若<em> R</em> 中不存在这样的码<em> X</em>、属性组<em> Y</em> 及非主属性<em> Z</em>（<em>Z</em> ⊈<em>Y</em>）, 使得<em> X</em>→<em>Y</em>，<em>Y</em>→<em>Z</em> 成立，<em>Y</em> ↛ <em>X</em> 成立，则称<em> R</em>&lt;<em>U</em>,<em>F</em>&gt; ∈ 3NF。 <strong>（没有传递依赖）</strong></li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220618174513643.png" alt="image-20220618174513643"></p><h2 id="bcnf"><a class="anchor" href="#bcnf">#</a> BCNF</h2><ul><li>BCNF: 在关系模式 R&lt;U,F&gt; 中，如果<strong>每一个决定属性集都包含候选码</strong>，则 R∈BCNF<ul><li>决定属性集：函数依赖的自变量：<ul><li>设关系模式 R&lt;U,F&gt;∈1NF，若 X →Y 且 Y ⊈ X 时 X 必含有码，则 R&lt;U,F&gt;∈BCNF。</li></ul></li><li>所有<strong>非主属性</strong>都完全函数<strong>依赖于每个候选码</strong>（2NF 的性质）</li><li>所有主属性都完全函数依赖于每个不包含它的候选码</li><li>没有任何属性完全函数依赖于非码的任何一组属性</li></ul></li><li>好处和消解方法见课本 P184<ul><li>在函数依赖的范畴实现了彻底的分离，消除了插入和删除的异常</li><li>3NF 的不彻底性表现在可能存在主属性对码的部分依赖和传递依赖</li></ul></li></ul><hr><p><em>以下内容不要求。</em></p><ul><li><p>多值依赖：设<em> R (U)<em> 是属性集</em> U</em> 上的一个关系模式。<em>X</em>,<em>Y</em>,<em>Z</em> 是<em> U</em> 的子集，并且<em> Z</em>=<em>U</em>-<em>X</em>-<em>Y</em>。关系模式<em> R (U)<em> 中多值依赖</em> X</em>→→<em>Y</em> 成立，当且仅当对<em> R (U)<em> 的任一关系</em> r</em>，给定的一对 (<em>x</em>,<em>z</em>) 值，有一组<em> Y</em> 的值，这组值仅仅决定于<em> x</em> 值而与<em> z</em> 值无关</p><ul><li>对称性：若<em> X</em>→→<em>Y</em>，则<em> X</em>→→<em>Z</em>，其中<em> Z</em>＝<em>U</em>－<em>X</em>－<em>Y</em></li><li>传递性：若<em> X</em>→→<em>Y</em>，<em>Y</em>→→<em>Z</em>， 则 <em>X</em>→→<em>Z</em> - <em>Y</em></li><li>经典例子：课程 C、教师 T、书 B <strong>[ Teaching(C,T,B) ]</strong><ul><li>一个课程多个老师，多个参考书，一个老师多个课程，一本书多个课程</li><li>C→→T, C→→B</li></ul></li></ul></li><li><p>4NF：关系模式的属性之间不允许有非平凡且非函数依赖的多值依赖。</p></li></ul><h1 id="第7章-数据库设计"><a class="anchor" href="#第7章-数据库设计">#</a> 第 7 章 数据库设计</h1><blockquote><p>ppt 37-44</p></blockquote><ul><li><p>数据库设计的特点：</p><ul><li>三分技术，七分管理，十二分基础数据</li><li>结构设计与行为设计相结合</li></ul></li><li><p>数据库设计方法</p><ul><li>New Orleans 方法</li><li>E-R 模型方法</li><li>3NF 方法</li><li>OOP 方法</li><li>UML 方法</li></ul></li><li><p>数据库设计的基本步骤（<strong>数据库分析的 6 个阶段</strong>）</p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220613220014932.png" alt="image-20220613220014932"></p></li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220615194005996.png" alt="img"></p><ul><li>数据库的各级模式</li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220615194236256.png" alt="img"></p><ul><li>需求分析：收集用户对数据库的<em>信息要求、处理要求、安全性与完整性要求</em></li><li><strong>数据字典</strong>：是关于数据库中数据的描述，即元数据，不是数据本身。包括<strong>数据项、数据结构、数据流、数据存储结构</strong>、处理过程。</li><li>概念结构设计：画 E-R 图（不太重要）<ul><li>E-R 图，[见 1.2](#1.2 数据模型)<ul><li>属性必须是不可分的数据项，不能包含其他属性。</li><li>属性不能与其他实体具有联系，即 E-R 图中所表示的联系是实体之间的联系。</li></ul></li></ul></li><li>逻辑结构设计：E-R 图<strong>转换</strong>为关系模型，即数据库的表<ul><li>转换<ul><li>一个 1:1 联系可以转换为一个独立的关系模式，也可以与任意一端对应的关系模式合并</li><li>一个 1:n 联系可以转换为一个独立的关系模式，也可以与 n 端对应的关系模式合并</li><li>一个 m:n 联系转换为一个关系模式（本质是多对多关系需要单独开一个表来维护）</li><li>三个或三个以上实体间的一个多元联系转换为一个关系模式</li><li>具有相同码的关系模式可合并</li></ul></li><li>设计用户子模式（视图）</li></ul></li><li><strong>关系模式的分解</strong>（重要，如果问到能还原即可）<ul><li>水平分解<ul><li>分解后表的属性不变，但是存储的数据变了</li><li>把关系的元祖分为若干子集合</li></ul></li><li><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619212725702.png" alt="image-20220619212725702"></li><li>垂直分解<ul><li>分解后表的属性变了</li><li>把属性分为若干子集合，形成若干子关系模式</li></ul></li><li><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619212838748.png" alt="image-20220619212838748"></li><li><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619212856677.png" alt="image-20220619212856677"></li></ul></li><li>物理结构设计：为一个给定的逻辑数据模型<strong>选取</strong>一个最适合应用要求的<strong>物理结构</strong><ul><li>存取方法<ul><li>B+ Tree 索引</li><li>hash 索引</li><li>clustering（聚簇，这个可能没学过，要了解）</li><li><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619213047944.png" alt="image-20220619213047944"></li></ul></li></ul></li><li>数据库实施和维护：略</li></ul><h1 id="第8章-数据库编程"><a class="anchor" href="#第8章-数据库编程">#</a> 第 8 章 数据库编程</h1><blockquote><p>ppt 45-47</p></blockquote><p>JDBC 比较常用，其他不考，略</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230611105309306.png" alt="image-20230611105309306"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230611105328511.png" alt="image-20230611105328511"></p><p>过程化 sql</p><p>存储过程和函数</p><h1 id="第9章-关系查询处理和优化"><a class="anchor" href="#第9章-关系查询处理和优化">#</a> 第 9 章 关系查询处理和优化</h1><blockquote><p>ppt 58-61</p></blockquote><p>不考，略</p><h1 id="第10章-数据库恢复技术"><a class="anchor" href="#第10章-数据库恢复技术">#</a> 第 10 章 数据库恢复技术</h1><blockquote><p>ppt 48-53</p></blockquote><ul><li>事务：是用户定义的一个<strong>数据库操作序列</strong>，这些操作要么全做，要么全不做，是一个不可分割的工作单位，是<strong>恢复和并发控制的基本单位</strong></li><li>事务和程序的差别<ul><li>在关系数据库中，一个事务可以是一条 SQL 语句，一组 SQL 语句或整个程序</li><li>一个程序通常包含多个事务</li></ul></li></ul><pre><code class="language-mysql">BEGIN TRANSACTION; # 显式开始事务
COMMIT; # 事务正常结束
ROLLBACK; # 事务回滚到开始时的状态
</code></pre><ul><li>事务的特性 ACID<ul><li><strong>原子性</strong>（Atomicity）<ul><li>事务是数据库的逻辑工作单位，事务中的诸操作要么都做，要么都不做</li></ul></li><li><strong>一致性</strong>（Consistency）<ul><li>事务执行的结果必须是使数据库从一个一致性状态变到另一个一致性状态</li><li>全做或者全不做，数据库都处于一致性状态。</li></ul></li><li><strong>隔离性</strong>（Isolation）<ul><li>一个事务的执行不能被其他事务干扰</li><li>一个事务内部的操作及使用的数据对其他并发事务是隔离的</li><li>并发执行的各个事务之间不能互相干扰</li></ul></li><li><strong>持续性</strong>（Durability），也称永久性（Permanence）<ul><li>一个事务一旦提交，它对数据库中数据的改变就应该是永久性的。</li><li>接下来的其他操作或故障不应该对其执行结果有任何影响。</li></ul></li></ul></li><li>故障恢复可以保证事务的<strong>原子性和持续性</strong></li><li>并发控制可以保证事务的<strong>一致性和隔离性</strong></li><li>数据库故障的种类<ul><li>事物内部的故障<ul><li>事务撤销（UNDO）</li></ul></li><li>系统故障</li><li>介质故障</li><li>计算机病毒</li></ul></li><li>恢复操作的基本原理：冗余</li><li>恢复的实现技术：复杂</li></ul><p>恢复数据的原理是<strong>冗余</strong>，建立冗余数据最常用的技术是<strong>数据转储</strong>和<strong>登记日志文件</strong></p><ul><li><strong>数据转储</strong>：数据库管理员定期地将整个数据库复制到磁带、磁盘或其他存储介质上保存起来的过程<ul><li>备用的数据文本称为后备副本 (backup) 或后援副本</li><li>重装后备副本只能将数据库恢复到转储时的状态</li><li><strong>静态转储</strong><ul><li>在系统中无运行事务时进行的转储操作</li><li>转储开始时数据库处于一致性状态</li><li><strong>转储期间不允许对数据库的任何存取、修改活动</strong></li><li>得到的一定是一个数据一致性的副本</li><li>优点：实现简单</li><li>缺点：降低了数据库的可用性<ul><li>转储必须等待正在运行的用户事务结束</li><li>新的事务必须等待转储结束</li></ul></li></ul></li><li>动态转储<ul><li>转储操作与用户事务并发进行</li><li><strong>转储期间允许对数据库进行存取或修改</strong></li><li>优点<ul><li>不用等待正在运行的用户事务结束</li><li>不会影响新事务的运行</li></ul></li><li>缺点<ul><li>不能保证副本中的数据正确有效</li></ul></li><li>利用动态转储得到的副本进行故障恢复<ul><li>需要把动态转储期间各事务对数据库的修改活动登记下来，<strong>建立日志文件</strong></li><li>后备副本加上日志文件就能把数据库恢复到某一时刻的正确状态</li></ul></li></ul></li><li>海量转储<ul><li>每次转储全部数据库</li></ul></li><li>增量转储<ul><li>只转储上次转储后更新过的数据</li></ul></li><li>海量转储和增量转储的比较<ul><li>海量转储恢复较为方便</li><li>数据库很大，事务处理频繁，增量转储使用有效</li></ul></li></ul></li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619214037064.png" alt="image-20220619214037064"></p><ul><li><p>日志文件：用来记录事务对数据库的更新操作的文件</p><ul><li><p>格式：</p><ul><li>记录</li><li>数据块</li></ul></li><li><p>日志文件的内容</p><ul><li>各个事务的开始标记（BEGIN TRANSACTION）</li><li>各个事务的结束标记（COMMIT/ROLLBACK）</li><li>所有更新操作</li><li>事务标识</li><li>操作类型</li><li>操作对象</li><li>更新前的值</li><li>更新后的值</li></ul></li><li><p>作用：</p><ul><li>事务故障恢复和系统故障恢复必须用日志文件。</li><li>在动态转储方式中必须建立日志文件，后备副本和日志文件结合起来才能有效地恢复数据库。</li><li>在静态转储方式中，也可以建立日志文件。</li></ul></li><li><p><strong>登记日志文件的原则</strong></p><ul><li>登记的次序严格按并发事务执行的时间次序</li><li><strong>必须先写日志文件，后写数据库</strong>，为什么？（必考）（保持 ACID）<ul><li>写数据库和写日志文件是两个不同的操作，在这两个操作之间可能发生故障。</li><li>如果先写了数据库修改，而在日志文件中没有登记下这个修改，则以后就无法恢复这个修改了</li><li>如果先写日志，但没有修改数据库，按日志文件恢复时只不过是多执行一次不必要的 UNDO 操作，并不会影响数据库的正确性</li></ul></li></ul></li></ul></li><li><p>恢复策略（PPT 51）</p><ul><li>事物故障：事务在运行至正常终点前被终止<ul><li>恢复方法：由恢复子系统利用日志文件撤消（ UNDO ）此事务已对数据库进行的修改</li><li>自动完成</li><li>恢复步骤：反向扫描 - 逆操作 - 直至开始标记</li></ul></li><li>系统故障：未完成事务对数据库的更新可能已写入数据库；已提交事务对数据库的更新可能还留在缓冲区没来得及写入数据库<ul><li>恢复方法：<ul><li>UNDO 故障发生时未完成的事务</li><li>REDO 已完成的事务</li></ul></li><li>重启自动完成</li><li>恢复步骤：反向扫描，逆操作 UNDO 队列；正向扫描，执行 REDO 队列</li></ul></li><li>介质故障：重装数据库，重做已完成的事务<ul><li>需要管理员介入</li><li>恢复步骤：装入后备数据库副本（静态 / 动态）- 装入有关日志副本，REDO 已完成的事务</li></ul></li></ul></li><li><p>检查点恢复技术：</p><ul><li><p>为什么？</p><ul><li>搜索日志和重做处理耗费了大量的时间</li></ul></li><li><p>技术要点：</p><ul><li>在日志文件中增加<strong>检查点记录</strong></li><li>增加<strong>重新开始文件</strong>（新增一个记录文件）</li><li>恢复子系统在登录日志文件期间动态地维护日志</li></ul></li><li><p>检查点内容：</p><ul><li>建立检查点时刻所有正在执行的事务清单</li><li>这些事务最近一个日志记录的地址</li></ul></li><li><p>重新开始文件的内容</p><ul><li>各个检查点记录在日志文件中的地址</li></ul><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230614085140170.png" alt="image-20230614085140170"></p></li><li><p>恢复步骤：</p><ol><li>重新检查文件找到最后一条检查点记录地址，在日志文件中找到这个检查点记录</li><li>建立 UNDO-LIST, REDO-LIST, 将检查点上所有正在执行的事物放入 UNDO-LIST</li><li>从检查点记录正向扫描日志。<ol><li>如果有新开始的事物，放入 UNDO-LIST；</li><li>如果有提交（COMMIT）的事物，从 UNDO-LIST 移动到 REDO-LIST。直至日志文件结束</li></ol></li><li>对 LIST 中事物进行相应的 UNDO 和 REDO 操作</li></ol></li></ul></li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220616161158480.png" alt="img"></p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619215228883.png" alt="image-20220619215228883"></p><ul><li>数据库镜像 ——<strong> 提高数据库可用性</strong>的解决方案<ul><li><p>解决介质故障</p></li><li><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230611131458313.png" alt="image-20230611131458313"></p></li><li><p>出现故障</p><ul><li><p>可由镜像磁盘继续提供使用</p></li><li><p>同时数据库管理系统自动利用镜像磁盘数据进行数据库的恢复</p></li><li><p>不需要关闭系统和重装数据库副本</p></li><li><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230611131550904.png" alt="image-20230611131550904"></p></li></ul></li><li><p>没有出现故障</p><ul><li><p>可用于<strong>并发操作</strong></p></li><li><p>一个用户对数据加排他锁修改数据，其他用户可以读镜像数据库上的数据，而不必等待该用户释放锁</p></li><li><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230611131606468.png" alt="image-20230611131606468"></p></li></ul></li><li><p>频繁地复制数据自然会降低系统运行效率，<strong>在实际应用中用户往往只选择对关键数据和日志文件镜像</strong>，不是对整个数据库进行镜像</p></li></ul></li></ul><h1 id="第11章-并发控制"><a class="anchor" href="#第11章-并发控制">#</a> 第 11 章 并发控制</h1><blockquote><p>ppt 54-57</p></blockquote><ul><li>串行执行、交叉并发执行</li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220615194131511.png" alt="image-20220615194131511"></p><ul><li><strong>事务是并发控制的基本单位</strong></li><li><strong>需要保证事务的隔离性和一致性</strong></li><li>并发操作带来的数据不一致性<ul><li><strong>丢失修改</strong>：两个事务 T1 和 T2 读入同一数据并修改， T2 的提交结果破坏了 T1 提交的结果，导致 T1 的修改被丢失（造成不一致性）</li><li><strong>不可重复读</strong>：不可重复读是指事务 T1 读取数据后，事务 T2 执行更新操作，使 T1 无法再现前一次读取结果。<ul><li>3 种情况，后两种不可重复读有时也称为幻影现象（Phantom Row）：</li><li>事务 T1 读取某一数据后，事务 T2 对其<strong>做了修改</strong>，当事务 T1 再次读该数据时，得到与前一次不同的值</li><li>事务 T1 按一定条件从数据库中读取了某些数据记录后，事务 T2<strong> 删除</strong>了其中部分记录，当 T1 再次按相同条件读取数据时，发现某些记录神秘地消失了。</li><li>事务 T1 按一定条件从数据库中读取某些数据记录后，事务 T2<strong> 插入了一些记录</strong>，当 T1 再次按相同条件读取数据时，发现多了一些记录。</li></ul></li><li><strong>脏读</strong>：事务 T1 修改某一数据，并将其写回磁盘。事务 T2 读取同一数据后， <strong>T1 由于某种原因被撤销</strong>。这时 T1 已修改过的数据恢复原值， <strong>T2 读到的数据就与数据库中的数据不一致</strong>。T2 读到的数据就为 “脏” 数据，即不正确的数据</li></ul></li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220615194500872.png" alt="image-20220615194500872"></p><ul><li>数据不一致性：由于并发操作破坏了事务的隔离性</li><li>并发控制就是要用正确的方式调度并发操作，使一个用户事务的执行不受其他事务的干扰，从而避免造成数据的不一致性<ul><li>关系型数据库的并发控制主要靠封锁（Locking）</li></ul></li></ul><ul><li><p>封锁：</p><ul><li>排它锁（X 锁、写锁），共享锁（S 锁、读锁）<br><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220615194848184.png" alt="image-20220615194848184"></li><li>锁的相容矩阵<br><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220615195011343.png" alt="image-20220615195011343"></li></ul></li><li><p>封锁协议</p><ul><li>一级封锁协议：事务 T 在<strong>修改数据 R 之前必须先对其加 X 锁</strong>，直到事务结束才释放<ul><li>一级封锁协议可防止丢失修改，并保证事务 T 是可恢复的。</li><li>如果仅仅是读数据不对其进行修改，是不需要加锁的，所以它不能保证可重复读和不读 “脏” 数据</li></ul></li><li>二级封锁协议：一级封锁协议加上事务 T 在<strong>读取数据 R 之前必须先对其加 S 锁</strong>，<strong>读完后即可释放</strong> S 锁。<ul><li>可以防止丢失修改和读 “脏” 数据</li><li>因为读完数据后即可释放 S 锁，<strong>但在事务结束的时候可能其他事务已经修改了这个数据，所以它不能保证可重复读</strong></li></ul></li><li>三级封锁协议：一级封锁协议加上事务 T 在读取数据 R 之前必须先对其加 S 锁，<strong>直到事务结束才释放</strong>（X 和 S 锁）<ul><li>可防止丢失修改、读脏数据和不可重复读</li></ul></li></ul></li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619222230257.png" alt="image-20220619222230257"></p><ul><li><p>活锁：一个事务永远可能等待，因为是新来先服务</p><ul><li>解决方案：先来先服务</li></ul></li><li><p>死锁：T1 在等待 T2 ，而 T2 又在等待 T1 ， T1 和 T2 两个事务永远不能结束</p></li><li><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619222358912.png" alt="image-20220619222358912"></p><ul><li><p>预防</p><ul><li><strong>一次封锁法</strong>，要求每个事务必须一次将所有要使用的数据全部加锁，否则就不能继续执行</li><li><strong>顺序封锁法</strong>，预先对数据对象规定一个封锁顺序，所有事务都按这个顺序实行封锁</li></ul></li><li><p>数据库管理系统在解决死锁的问题上更普遍采用的是<strong>诊断并解除死锁的方法</strong></p></li><li><p>解决方案</p><ul><li><p><strong>超时法</strong>：如果一个事务的等待时间超过了规定的时限，就认为发生了死锁</p></li><li><p><strong>等待图法</strong>：发控制子系统周期性地（比如每隔数秒）<strong>生成事务等待图，检测事务</strong>。如果发现图<strong>中存在回路</strong>，则表示系统中出现了死锁。</p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220615201057389.png" alt="image-20220615201057389"></p></li><li><p>解除死锁</p><ul><li>选择一个处理死锁<strong>代价最小</strong>的事务，将其撤消<br>释放此事务持有的所有的锁，使其它事务能继续运行下去</li></ul></li></ul></li></ul></li><li><p>可串行化调度</p><ul><li>多个事务的并发执行是正确的，当且仅当其结果与按某一次序串行地执行这些事务时的结果相同，这种调度策略被称为可串行化调度</li></ul></li><li><p>冲突可串行化（掌握概念即可）</p><ul><li>执行结果等价于串行调度的调度也是正确的，称为<strong>可串行化</strong>调度</li><li><strong>冲突操作：是指不同的事务对同一数据的读写操作和写写操作</strong></li><li><strong>不能交换的操作：同一事务的两个操作、不同事务的冲突操作</strong></li><li>一个调度 Sc 在保证冲突操作的次序不变的情况下，通过交换两个事务不冲突操作的次序得到另一个调度 Sc’，如果 Sc’是串行的，称调度 Sc 是<strong>冲突可串行化</strong>的调度<ul><li>冲突可串行化调度是可串行化调度的<strong>充分条件</strong>，不是必要条件</li></ul></li></ul></li><li><p>两段锁协议（2PL)，指所有事务必须分两个阶段对数据项加锁和解锁</p><ul><li>第一阶段：获得封锁，也称为扩展阶段。事务可以申请获得任何数据项上的任何类型的锁，但是不能释放任何锁</li><li>第二阶段：释放封锁，也称为收缩阶段。事务可以释放任何数据项上的任何类型的锁，但是不能再申请任何锁</li><li>事务遵守两段锁协议是可串行化调度的<strong>充分条件</strong>，而不是必要条件</li></ul></li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619222951210.png" alt="image-20220619222951210"></p><p>&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIyMzA0Mzg1My5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619223043853.png</span>&quot; alt=&quot;image-20220619223043853&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIyMzA1MjYwMC5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619223052600.png</span>&quot; alt=&quot;image-20220619223052600&quot; /&gt;</p><ul><li><p>封锁对象的大小称为<strong>封锁粒度</strong> (Granularity)</p><ul><li>逻辑单元：属性值、属性值的集合、元组、关系、索引项、整个索引、整个数据库等</li><li>物理单元：页（数据页或索引页）、物理记录等</li></ul></li><li><p>封锁的粒度越大，数据库所能够封锁的数据单元就越少，<strong>并发度</strong>就越小，系统开销也越小</p></li><li><p>多粒度封锁：在一个系统中同时支持多种封锁粒度供不同的事务选择</p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220615204625429.png" alt="image-20220615204625429"></p></li><li><p>多粒度加锁，对一个结点加锁，意味着这个结点的所有后裔结点也被加以同样类型的锁。</p><ul><li><strong>显式封锁</strong>：直接加到数据对象上的封锁</li><li><strong>隐式封锁</strong>：是该数据对象没有独立加锁，是由于其上级结点加锁而使该数据对象加上了锁</li><li>对某个数据对象加锁，系统要检查：<ul><li>该数据对象：有无显式封锁与之冲突</li><li>所有上级结点：本事务的显式封锁是否与该数据对象上的隐式封锁冲突</li><li>所有下级结点：看它们的的显式封锁是否与本事务的隐式封锁冲突</li></ul></li></ul></li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619223343312.png" alt="image-20220619223343312"></p><ul><li><p>意向锁：如果对一个结点加意向锁，则说明该结点的下层结点正在被加锁。对任一结点加基本锁，<strong>必须先对它的上层结点加意向锁</strong>。</p><ul><li>IS 锁：它的后裔结点拟（意向）加 S 锁</li><li>IX 锁：它的后裔结点拟（意向）加 X 锁</li><li>SIX 锁：<strong>它加 S 锁，再加 IX 锁。</strong><ul><li><strong>e.g.</strong> 对某个表加 SIX 锁，则表示该事务要读整个表（所以要对该表加 S 锁），同时会更新个别元组（所以要对该表加 IX 锁</li></ul></li><li><strong>申请封锁时应该按自上而下的次序进行，释放封锁时则应该按自下而上的次序进行</strong></li></ul></li></ul><h1 id="nosql"><a class="anchor" href="#nosql">#</a> NoSQL</h1><blockquote><p>ppt 62-74</p></blockquote><p>见《nosql 精粹》第 1-6，8-11 章</p><h2 id="1-为什么关系型数据库好-nosql和sql的差异"><a class="anchor" href="#1-为什么关系型数据库好-nosql和sql的差异">#</a> 1. 为什么关系型数据库好 / NoSQL 和 SQL 的差异</h2><ul><li><p>可回答第一章的部分（关系模型的优缺点）</p><ul><li><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220620211107102.png" alt="image-20220620211107102"></li></ul></li><li><p>也可回答 PPT62 的部分</p><ul><li><p>获取持久化数据</p><ul><li>持久存储大量数据</li></ul></li><li><p>集成</p><ul><li>并能<strong>共享数据库集成</strong>，<strong>多个应用程序都将数据保存在同一个数据库中</strong>。这样一来，所有应用程序很容易就能使用彼此的数据了</li></ul></li><li><p>并发</p><ul><li>在面对并发操作时，关系型数据库<strong>提供了 “事务” 机制来控制对其数据的访问</strong></li><li><strong>事务在处理错误时也起到作用</strong>。比如如果事务中途出错，可以通过回滚保证数据不受破坏</li></ul></li><li><p>近乎标准的模型</p><ul><li>关系型数据库以<strong>近乎标准的方式</strong>提供了<strong>数据模型</strong>。规定了模式，具有更高的数据独立性和安全保密性。</li></ul></li><li><p>但是存取路径对用户透明，<strong>查询效率往往不如格式化数据模型</strong>（NoSQL）</p></li><li><p>为提高性能，必须对用户的查询请求进行优化，<strong>增加了 DBMS 的难度。</strong></p></li><li><p>NoSQL 是<strong>应用数据库</strong>，MySQL 是<strong>集成数据库</strong></p></li><li><p>NoSQL 在集群问题上，<strong>让用户自行决定可用性和一致性的平衡</strong></p></li><li><p>NoSQL 是<strong>无模式</strong>的，不需要预先定义值和型，不会发生阻抗失谐的问题</p></li></ul></li><li><p>NoSQL</p><ul><li><p>开源分布式的非关系型数据库</p></li><li><p>不使用关系模型</p></li><li><p>在集群中运行良好</p><ul><li>关系型数据库使用 ACID 事务来保持整个数据库的一致性，而这种方式本身与集群环境相冲突</li><li>NoSQL 数据库为处理并发及分布问题提供了众多选项。</li></ul></li><li><p>开源</p></li><li><p>适用于 21 世纪的互联网公司</p></li><li><p>无模式</p><ul><li>不用事先修改结构定义，即可自由添加字段了</li><li>这在处理不规则数据和自定义字段时 非常有用</li></ul></li></ul></li></ul><h2 id="2-nosql的由来考选择题"><a class="anchor" href="#2-nosql的由来考选择题">#</a> 2. NoSQL 的由来（考选择题）</h2><h3 id="阻抗失谐"><a class="anchor" href="#阻抗失谐">#</a> 阻抗失谐</h3><p><strong>关系模型</strong>和内存中的<strong>数据结构</strong>之间存在差异，存储时，需要在两种不同的表示形式之间转译。每次处理的过程很麻烦</p><p>解决方法：</p><ol><li>面向对象数据库</li><li>对象 - 关系映射框架，通过映射模式表达转换</li></ol><h3 id="集成数据库和应用程序数据库"><a class="anchor" href="#集成数据库和应用程序数据库">#</a> 集成数据库和应用程序数据库</h3><p>集成数据库和应用程序数据库的问题（NoSQL 是<strong>应用程序数据库</strong>）</p><h3 id="集群问题"><a class="anchor" href="#集群问题">#</a> 集群问题</h3><ol><li>纵向扩展和横向扩展</li><li>分片和复制</li><li>让用户<strong>自行决定可用性和一致性的平衡</strong></li></ol><h2 id="3-聚合无知"><a class="anchor" href="#3-聚合无知">#</a> 3. 聚合无知</h2><ul><li><p>聚合</p><ul><li>把一组相互关联的对象视为一个整体单元来操作，而这个单元就叫聚合</li><li>键值数据库</li><li>文档数据库</li><li>列族数据库</li></ul></li><li><p>关系型数据库不知道一个特定的聚合（数据结构），把其打散存在不同关系里，select 时，再聚在一起</p><ul><li>“图数据库 &quot; 也是聚合无知的。</li></ul></li></ul><h2 id="4-无模式"><a class="anchor" href="#4-无模式">#</a> 4. 无模式</h2><p>关系型数据库模式和 NoSQL 模式的区别：</p><p>NoSQL 是无模式的，不需要预先定义值和型。</p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619224154166.png" alt="image-20220619224154166"></p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619224203066.png" alt="image-20220619224203066"></p><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619224209118.png" alt="image-20220619224209118"></p><h2 id="5-分布式"><a class="anchor" href="#5-分布式">#</a> 5. 分布式</h2><ul><li><p>概念默认大家知道，没必要考</p></li><li><p>PPT66</p></li><li><p>分片</p><ul><li>不同数据存放到不同节点中</li></ul></li><li><p>复制</p><ul><li>将同一份数据拷贝到多个节点</li><li>主从复制</li><li>对等复制</li></ul></li></ul><h2 id="6-一致性和持久性"><a class="anchor" href="#6-一致性和持久性">#</a> 6. 一致性和持久性</h2><ul><li><p>CAP 定理</p><ul><li>CAP 定理：给定 “一致性”(Consistency)、“可用性”(Availability)、“分区耐受性”( Partition tolerance) 这三个属性，我们只能同时满足其中两个属性。<ul><li>“一致性”</li><li>“可用性”，如果客户可以同集群中的某个节点通信，那么该节点就必然能够处理读取及写入操作。</li><li>“分区耐受性” ，如果发生通信故障，导致整个集群被分割成多个无法互相通信的分区时 (这种情况也叫 “ 脑裂”，split brain)，集群仍然可用。</li></ul></li><li>分区耐受性不能够妥协，但凡有一个结点 down，整个系统都要 down 掉</li></ul></li><li><p>剩下的理解为主，不需要照搬背诵</p></li></ul><h2 id="7-仲裁"><a class="anchor" href="#7-仲裁">#</a> 7. 仲裁</h2><ul><li>经典公式：<ul><li>R + W &gt; N<ul><li>“对等式分布模型”：<ul><li>只有当 R+W&gt;N 时，才能保证读取操作的 “强一致性”。其中，执行读取操作时所需联系的节点数 (R)，确认写入操作时所需征询的节点数 (W)，以及复制因子 (N)</li><li>否则，可能读到的都是 UNWRITE 的</li></ul></li><li>“主从式分布模型”<ul><li>只需从主节点中读取数据</li></ul></li></ul></li><li>写入：二分之一<ul><li>“对等式分布模型”：<ul><li>“写入仲裁”(write quorum)：如果发生两个相互冲突的写入操作，那么只有其中一个操作能为超过半数的节点所认可，W&gt;N/2 。即，参与写入操作的节点数 (W)，必须超过副本节点数 (N) 的一半。副本个数又称为 “复制因子”</li></ul></li><li>“主从式分布模型”<ul><li>只需要向主节点中写入数据</li></ul></li></ul></li></ul></li><li>复制因子</li><li>实际情况</li></ul><h2 id="8-key-value数据库"><a class="anchor" href="#8-key-value数据库">#</a> 8. key-value 数据库</h2><ul><li>数据库是如何完成基本存放的想法 / 数据库存放的是什么东西，怎么存的<ul><li>是一张<strong>简单的哈希表</strong> (hash table)，主要用在所有数据库访问均通过主键 (primary key) 来操作的情况下。<ul><li>可把此表想象成传统的 “关系” 该关系有两列：ID 与 NAME<ul><li>ID 列代表关键字，NAME 列存放值。<strong>NAME 列仅能存放 String 型的数据。</strong></li><li><strong>应用程序</strong>可提供 ID 及 VALUE 值，并将这一键值对持久化</li><li>假如 ID 已存在，就用新值覆盖当前值，否则就新建一条数据。</li></ul></li></ul></li><li><strong>客户端可以根据键查询值，设置键所对应的值，或从数据库中删除键。</strong><ul><li><strong>“值” 只是数据库存储的一块数据而已，它并不关心也无需知道其中的内容</strong></li><li><strong>应用程序负责理解所存数据的含义。</strong></li><li><strong>能够存储 list、set、hash 等数据结构</strong></li></ul></li></ul></li><li>适合做什么，不适合做什么<ul><li>非常适合<ul><li>保存<strong>会话</strong> (用会话 ID 作为键)</li><li><strong>购物车数据</strong>（用 userid 绑定）</li><li><strong>用户配置</strong>等信息（本质是因为键值数据库可以存放任意数据结构的数据）</li></ul></li><li>不适合<ul><li><strong>数据间（建立）关系</strong></li><li><strong>含有多项操作的事务</strong>（kv 数据库不擅长回滚恢复等操作）</li><li><strong>查询数据</strong>（无法搜索 value）</li><li><strong>操作关键字集合</strong>（一次只能操作一个键）</li></ul></li></ul></li></ul><p>&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIzMDE1NzAzMi5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619230157032.png</span>&quot; alt=&quot;image-20220619230157032&quot; style=&quot;zoom:33%;&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIzMDIwNzIzMi5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619230207232.png</span>&quot; alt=&quot;image-20220619230207232&quot; style=&quot;zoom:33%;&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIzMDIxNjgwNy5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619230216807.png</span>&quot; alt=&quot;image-20220619230216807&quot; style=&quot;zoom:33%;&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIzMDI0NzE1MC5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619230247150.png</span>&quot; style=&quot;zoom:33%;&quot; /&gt;</p><h2 id="9-文档数据库"><a class="anchor" href="#9-文档数据库">#</a> 9. 文档数据库</h2><ul><li>数据库是如何完成基本存放的想法<ul><li>文档彼此相似，但不必完全相同。<strong>文档数据库所存放的文档，就相当于键值数据库所存放的 “值”</strong>。</li><li>文档数据库可视为<strong>其值可查的键值数据库。</strong></li></ul></li><li>数据库存放的是什么东西，怎么存的<ul><li><strong>“文档”</strong>(document) 是文档数据库中的主要概念。<ul><li>其格式可以是<strong> XML、JSON、BSON</strong> 等。</li><li>文档具备自述性 (self-describing)，呈现分层的<strong>树状数据结构</strong> (hierarchical tree data structure)，可以包含映射表、集合和标量值。</li></ul></li></ul></li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619230506254.png" alt="image-20220619230506254"></p><ul><li>适合做什么，不适合做什么<ul><li>适用：<ul><li><strong>事件记录</strong>（数据结构灵活）</li><li><strong>内容管理系统及博客平台</strong>（数据结构灵活，支持 JSON）</li><li><strong>网站分析与实时分析</strong>（可以只更新部分数据，方便保存浏览量等信息）</li><li><strong>电子商务应用程序</strong>（适应较为灵活的模式）</li></ul></li><li>不适用：<ul><li><strong>包含多项操作的复杂事务</strong>（不适合执行跨文档的原子操作）</li><li><strong>查询持续变化的聚合结构</strong></li></ul></li></ul></li></ul><p>&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIzMDUzMjA3My5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619230532073.png</span>&quot; alt=&quot;image-20220619230532073&quot; style=&quot;zoom:33%;&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIzMDUzOTUzMi5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619230539532.png</span>&quot; alt=&quot;image-20220619230539532&quot; style=&quot;zoom:33%;&quot; /&gt;</p><p>&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIzMDczODM2OC5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619230738368.png</span>&quot; alt=&quot;image-20220619230738368&quot; style=&quot;zoom:33%;&quot; /&gt;</p><h2 id="10-列族数据库"><a class="anchor" href="#10-列族数据库">#</a> 10. 列族数据库</h2><ul><li>数据库是如何完成基本存放的想法<ul><li>列族数据库，可以存储关键字及其映射值，并且可以把值分成多个列族，让每个列族代表一张数据映射表 (map of data)。</li><li>列族数据库将数据存储在列族中，而列族里的行则把许多列数据与本行的 “行键”(row key) 关联起来。</li></ul></li><li>数据库存放的是什么东西，怎么存的<ul><li><strong>基本存储单元为 “列”</strong>，列由一个 **“名值对 **”(name-value pair) 组成，其中的<strong>名字也充当关键字</strong>。</li><li>每个键值对都占据一列，并且都<strong>存有一个 “时间戳” 值</strong>。令数据过期、解决写入冲突、处理陈旧数据等操作都会用到时间戳。若某列数据不再使用，则数据库可于稍后的 “压缩阶段”(compaction phase) 回收其所占空间。</li><li><strong>行是列的集合</strong>，这些<strong>列都附在某个关键字名下</strong>，或与之相连。由<strong>相似行所构成的集合就是列族</strong>。</li><li>每个列族都可以与关系型数据库的 “行容器”(container of rows) 相对照:<ul><li>两者都用关键字标识行，并且每一行都由多个列组成。</li><li>其差别在于，列族数据库的各行不一定要具备完全相同的列，并且可以随意向其中某行加入一列，而不用把它添加到其他行中。</li></ul></li></ul></li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619230901046.png" alt="image-20220619230901046"></p><ul><li><p>“标准列族”(standard column family) 中的列都是 “简单列”(simple column) 。</p></li><li><p>“超列族”(super column family)：</p><ul><li>如果某列中包含一个由小列组成的映射表，那么它就是 “超列”(super column)。可将超列视为 “列容器”(container of columns)。</li><li>用超列构建的列族叫做 “超列族” 。</li><li>超列族适合将相关数据存在一起。但是，如果部分列在大部分情况下都用不到，则存在不必要的开销。</li></ul></li><li><p>“键空间” (keyspace) 与关系型数据库中的 “数据库” 类似，与应用程序有关的全部列族都存放于此。</p><ul><li>必须先创建键空间，才能为其增添列族</li></ul></li><li><p>适合做什么，不适合做什么</p><ul><li>适合：<strong>事件记录、内容管理系统与博客平台、计数器、限期</strong>（利用时间戳 TTL）</li><li>不适合：<ul><li>需要以 “ACID 事务” 执行写入及读取操作的系统。</li><li>根据查询结果聚合数据（需要把每一行读到客户端，成本高）</li><li>开发早期或试探某个技术方案（改变查询模式成本高）</li></ul></li></ul></li></ul><p>&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIzMTA0OTU4MC5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619231049580.png</span>&quot; style=&quot;zoom:33%;&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIzMTEwMDM5Ny5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619231100397.png</span>&quot; alt=&quot;image-20220619231100397&quot; style=&quot;zoom:33%;&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIzMTEwOTA1MS5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619231109051.png</span>&quot; alt=&quot;image-20220619231109051&quot; style=&quot;zoom:33%;&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIzMTA0MjQ1OS5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619231042459.png</span>&quot; alt=&quot;image-20220619231042459&quot; style=&quot;zoom:33%;&quot; /&gt;</p><h2 id="11-图数据库"><a class="anchor" href="#11-图数据库">#</a> 11. 图数据库</h2><ul><li>数据库是如何完成基本存放的想法<ul><li>图数据库可存放<strong>实体及实体间关系。</strong></li><li>用图将数据一次性组织好，稍后便可根据 “关系” 以不同方式解读它。</li></ul></li><li>数据库存放的是什么东西，怎么存的<ul><li>实体也叫 **“节点”<strong>(node)，它们具有</strong>属性 **(property)。可将节点视为应用程序中某对象的实例。</li><li>关系又叫 **“边”<strong>(edge)，它们也有</strong>属性 **，有<strong>类型</strong>。边具备<strong>方向性</strong> (directional significance)，而节点则按关系组织起来，以便在其中查找所需模式。</li><li>实体和实体间关系组成的有向图（实体作为结点，实体间关系作为边）</li></ul></li></ul><p>&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIzMTE1Mzc0MC5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619231153740.png</span>&quot; alt=&quot;image-20220619231153740&quot; style=&quot;zoom: 45%;&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIzMTIxMjQ5Mi5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619231212492.png</span>&quot; alt=&quot;image-20220619231212492&quot; style=&quot;zoom: 45%;&quot; /&gt;</p><ul><li>适合做什么，不适合做什么<ul><li>适合：<ul><li><strong>互联</strong>数据</li><li>安排<strong>运输路线</strong></li><li>分派<strong>货物</strong>和<strong>基于位置</strong>的服务</li><li><strong>推荐引擎</strong>（结点间关系）</li></ul></li><li>不适合：<ul><li>更新全部或某子集内的实体（无法一次改变所有结点的某个属性）</li><li>图数据库可能没有办法处理<strong>数据量过大的场合</strong>，即便模型适合</li></ul></li></ul></li></ul><p>&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIzMTMzNDYzNi5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619231334636.png</span>&quot; alt=&quot;image-20220619231334636&quot; style=&quot;zoom:33%;&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIzMTM0MTEzNC5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619231341134.png</span>&quot; alt=&quot;image-20220619231341134&quot; style=&quot;zoom:33%;&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIzMTM1MDIxNi5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619231350216.png</span>&quot; alt=&quot;image-20220619231350216&quot; style=&quot;zoom:33%;&quot; /&gt;&lt;img src=&quot;<span class="exturl" data-url="aHR0cHM6Ly9wZW5nLWltZy5vc3MtY24tc2hhbmdoYWkuYWxpeXVuY3MuY29tL21hcmtkb3duLWltZy9pbWFnZS0yMDIyMDYxOTIzMTM1NjU1OC5wbmc=">https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619231356558.png</span>&quot; alt=&quot;image-20220619231356558&quot; style=&quot;zoom:33%;&quot; /&gt;</p><h2 id="12-4种数据库大汇总"><a class="anchor" href="#12-4种数据库大汇总">#</a> 12. 4 种数据库大汇总</h2><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220620212854163.png" alt="image-20220620212854163"></p><h2 id="提到的可能考点"><a class="anchor" href="#提到的可能考点">#</a> 提到的可能考点</h2><ul><li>综合题<ul><li>写 sql</li><li>写关系代数</li><li>写 E-R</li></ul></li><li>简答题（几分就是几点）<ul><li>NoSQL 和 SQL 的最大差异</li></ul></li></ul><p><img data-src="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20220619225729150.png" alt="image-20220619225729150"></p><div class="tags"><a href="/undergraduate/tags/%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E5%9F%BA%E7%A1%80/" rel="tag"><i class="ic i-tag"></i> 数据管理基础</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-06-21 15:01:13" itemprop="dateModified" datetime="2023-06-21T15:01:13+08:00">2023-06-21</time> </span><span id="2023/06/14/NJUSE/数据管理基础期末复习/" class="item leancloud_visitors" data-flag-title="数据管理基础期末复习" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/undergraduate/images/wechatpay.jpg" alt="quas-modo 微信支付"><p>微信支付</p></div><div><img data-src="/undergraduate/images/alipay.jpg" alt="quas-modo 支付宝"><p>支付宝</p></div><div><img data-src="/undergraduate/images/paypal.png" alt="quas-modo 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>quas-modo <i class="ic i-at"><em>@</em></i>Carpe diem</li><li class="link"><strong>本文链接：</strong> <a href="https://quas-modo.github.io/undergraduate/2023/06/14/NJUSE/%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E5%9F%BA%E7%A1%80%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/" title="数据管理基础期末复习">https://quas-modo.github.io/undergraduate/2023/06/14/NJUSE/数据管理基础期末复习/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/undergraduate/2023/05/25/%E6%AF%94%E8%B5%9B/%E6%9F%90%E5%A4%A7%E5%AD%A6-vivo%E7%BC%96%E7%A8%8B%E9%A9%AC%E6%8B%89%E6%9D%BE%E5%A4%A7%E8%B5%9B%E5%86%B3%E8%B5%9B%E8%AE%B0%E5%BD%95/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;quasdo.oss-cn-hangzhou.aliyuncs.com&#x2F;img&#x2F;wenjun-lin-asset (4).jpg" title="某大学-vivo编程马拉松大赛决赛记录"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 比赛</span><h3>某大学-vivo编程马拉松大赛决赛记录</h3></a></div><div class="item right"><a href="/undergraduate/2023/06/21/NJUSE/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;quasdo.oss-cn-hangzhou.aliyuncs.com&#x2F;img&#x2F;wenjun-lin-asset (4).jpg" title="计算机操作系统期末复习"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 计算机操作系统</span><h3>计算机操作系统期末复习</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC1%E7%AB%A0-%E7%BB%AA%E8%AE%BA"><span class="toc-number">1.</span> <span class="toc-text">第 1 章 绪论</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 数据库系统概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.1.1.</span> <span class="toc-text">基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E7%89%B9%E5%BE%81%E7%AE%80%E7%AD%94"><span class="toc-number">1.1.2.</span> <span class="toc-text">数据库基本特征【简答】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%9C%89%E4%BB%80%E4%B9%88%E5%A5%BD%E5%A4%84"><span class="toc-number">1.1.3.</span> <span class="toc-text">使用数据库系统有什么好处？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E6%96%B9%E5%BC%8F%E5%AF%B9%E6%AF%94%E7%AE%80%E7%AD%94"><span class="toc-number">1.1.4.</span> <span class="toc-text">数据管理方式对比【简答】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 数据模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.2.1.</span> <span class="toc-text">概念模型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%E6%A8%A1%E5%9E%8B-e-r-%E5%9B%BE"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">概念模型 (E-R 图)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.2.2.</span> <span class="toc-text">逻辑模型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 数据库系统的结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E7%BA%A7%E7%BB%93%E6%9E%84"><span class="toc-number">1.3.1.</span> <span class="toc-text">三级结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E7%BA%A7%E6%98%A0%E5%83%8F"><span class="toc-number">1.3.2.</span> <span class="toc-text">二级映像</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%96%E6%A8%A1%E5%BC%8F%E6%A8%A1%E5%BC%8F%E6%98%A0%E5%83%8F"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">外模式 &#x2F; 模式映像:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E5%86%85%E6%A8%A1%E5%BC%8F%E6%98%A0%E5%83%8F"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">模式 &#x2F; 内模式映像：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">1.4.</span> <span class="toc-text">1.4 数据库系统的组成</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC2%E7%AB%A0-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.</span> <span class="toc-text">第 2 章 关系数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#21-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 关系数据结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2223-%E5%85%B3%E7%B3%BB%E6%93%8D%E4%BD%9C%E5%92%8C%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="toc-number">2.2.</span> <span class="toc-text">2.2&amp;2.3 关系操作和完整性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-%E5%85%B3%E7%B3%BB%E4%BB%A3%E6%95%B0%E9%87%8D%E7%82%B9"><span class="toc-number">2.3.</span> <span class="toc-text">2.4 关系代数（重点）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC3%E7%AB%A0-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%AD%E8%A8%80sql"><span class="toc-number">3.</span> <span class="toc-text">第 3 章 关系数据库语言 SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#31-33-%E6%A6%82%E8%BF%B0%E5%92%8C%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E6%93%8D%E4%BD%9C%E7%9B%B4%E6%8E%A5%E7%9C%8B%E4%B9%A6"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 - 3.3 概述和数据定义（操作直接看书）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#34-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E5%BF%85%E8%80%83"><span class="toc-number">3.2.</span> <span class="toc-text">3.4 数据查询（必考）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.2.1.</span> <span class="toc-text">单表查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.2.2.</span> <span class="toc-text">连接查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.2.3.</span> <span class="toc-text">嵌套查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E6%93%8D%E4%BD%9C"><span class="toc-number">3.2.4.</span> <span class="toc-text">集合操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%B4%BE%E7%94%9F%E8%A1%A8%E7%9A%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.2.5.</span> <span class="toc-text">基于派生表的查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#35-%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0"><span class="toc-number">3.3.</span> <span class="toc-text">3.5 数据更新</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#36-%E7%A9%BA%E5%80%BC%E7%9A%84%E5%A4%84%E7%90%86%E9%87%8D%E8%A6%81"><span class="toc-number">3.4.</span> <span class="toc-text">3.6 空值的处理（重要）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#37-%E8%A7%86%E5%9B%BE"><span class="toc-number">3.5.</span> <span class="toc-text">3.7 视图</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC4%E7%AB%A0-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E6%80%A7"><span class="toc-number">4.</span> <span class="toc-text">第 4 章 数据库安全性</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC5%E7%AB%A0-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="toc-number">5.</span> <span class="toc-text">第 5 章 数据库完整性</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC6%E7%AB%A0-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%90%86%E8%AE%BA%E5%BF%85%E8%80%83"><span class="toc-number">6.</span> <span class="toc-text">第 6 章 关系数据理论（必考）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5-2"><span class="toc-number">6.1.</span> <span class="toc-text">基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1nf"><span class="toc-number">6.2.</span> <span class="toc-text">1NF</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2nf"><span class="toc-number">6.3.</span> <span class="toc-text">2NF</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3nf"><span class="toc-number">6.4.</span> <span class="toc-text">3NF</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#bcnf"><span class="toc-number">6.5.</span> <span class="toc-text">BCNF</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC7%E7%AB%A0-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="toc-number">7.</span> <span class="toc-text">第 7 章 数据库设计</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC8%E7%AB%A0-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BC%96%E7%A8%8B"><span class="toc-number">8.</span> <span class="toc-text">第 8 章 数据库编程</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC9%E7%AB%A0-%E5%85%B3%E7%B3%BB%E6%9F%A5%E8%AF%A2%E5%A4%84%E7%90%86%E5%92%8C%E4%BC%98%E5%8C%96"><span class="toc-number">9.</span> <span class="toc-text">第 9 章 关系查询处理和优化</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC10%E7%AB%A0-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D%E6%8A%80%E6%9C%AF"><span class="toc-number">10.</span> <span class="toc-text">第 10 章 数据库恢复技术</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC11%E7%AB%A0-%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6"><span class="toc-number">11.</span> <span class="toc-text">第 11 章 并发控制</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#nosql"><span class="toc-number">12.</span> <span class="toc-text">NoSQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%B8%BA%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A5%BD-nosql%E5%92%8Csql%E7%9A%84%E5%B7%AE%E5%BC%82"><span class="toc-number">12.1.</span> <span class="toc-text">1. 为什么关系型数据库好 &#x2F; NoSQL 和 SQL 的差异</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-nosql%E7%9A%84%E7%94%B1%E6%9D%A5%E8%80%83%E9%80%89%E6%8B%A9%E9%A2%98"><span class="toc-number">12.2.</span> <span class="toc-text">2. NoSQL 的由来（考选择题）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%BB%E6%8A%97%E5%A4%B1%E8%B0%90"><span class="toc-number">12.2.1.</span> <span class="toc-text">阻抗失谐</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E6%88%90%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">12.2.2.</span> <span class="toc-text">集成数据库和应用程序数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E7%BE%A4%E9%97%AE%E9%A2%98"><span class="toc-number">12.2.3.</span> <span class="toc-text">集群问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E8%81%9A%E5%90%88%E6%97%A0%E7%9F%A5"><span class="toc-number">12.3.</span> <span class="toc-text">3. 聚合无知</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%97%A0%E6%A8%A1%E5%BC%8F"><span class="toc-number">12.4.</span> <span class="toc-text">4. 无模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%88%86%E5%B8%83%E5%BC%8F"><span class="toc-number">12.5.</span> <span class="toc-text">5. 分布式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E4%B8%80%E8%87%B4%E6%80%A7%E5%92%8C%E6%8C%81%E4%B9%85%E6%80%A7"><span class="toc-number">12.6.</span> <span class="toc-text">6. 一致性和持久性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E4%BB%B2%E8%A3%81"><span class="toc-number">12.7.</span> <span class="toc-text">7. 仲裁</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-key-value%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">12.8.</span> <span class="toc-text">8. key-value 数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E6%96%87%E6%A1%A3%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">12.9.</span> <span class="toc-text">9. 文档数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E5%88%97%E6%97%8F%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">12.10.</span> <span class="toc-text">10. 列族数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">12.11.</span> <span class="toc-text">11. 图数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-4%E7%A7%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E6%B1%87%E6%80%BB"><span class="toc-number">12.12.</span> <span class="toc-text">12. 4 种数据库大汇总</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E5%88%B0%E7%9A%84%E5%8F%AF%E8%83%BD%E8%80%83%E7%82%B9"><span class="toc-number">12.13.</span> <span class="toc-text">提到的可能考点</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li class="active"><a href="/undergraduate/2023/06/14/NJUSE/%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E5%9F%BA%E7%A1%80%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/" rel="bookmark" title="数据管理基础期末复习">数据管理基础期末复习</a></li><li><a href="/undergraduate/2023/06/21/NJUSE/%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E5%9F%BA%E7%A1%80%E7%AE%80%E7%AD%94%E6%95%B4%E7%90%86/" rel="bookmark" title="数据管理基础简答整理">数据管理基础简答整理</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="quas-modo" data-src="/undergraduate/images/avatar.png"><p class="name" itemprop="name">quas-modo</p><div class="description" itemprop="description">notes/thoughts/nonsense</div></div><nav class="state"><div class="item posts"><a href="/undergraduate/archives/"><span class="count">85</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/undergraduate/categories/"><span class="count">27</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/undergraduate/tags/"><span class="count">23</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3F1YXMtbW9kbw==" title="https:&#x2F;&#x2F;github.com&#x2F;quas-modo"><i class="ic i-github"></i></span></div><ul class="menu"><li class="item"><a href="/undergraduate/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/undergraduate/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/undergraduate/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/undergraduate/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/undergraduate/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/undergraduate/friends/" rel="section"><i class="ic i-heart"></i>friends</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/undergraduate/2023/05/25/%E6%AF%94%E8%B5%9B/%E6%9F%90%E5%A4%A7%E5%AD%A6-vivo%E7%BC%96%E7%A8%8B%E9%A9%AC%E6%8B%89%E6%9D%BE%E5%A4%A7%E8%B5%9B%E5%86%B3%E8%B5%9B%E8%AE%B0%E5%BD%95/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/undergraduate/2023/06/21/NJUSE/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/undergraduate/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/undergraduate/categories/NJUSE/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="分类于 数据结构">数据结构</a></div><span><a href="/undergraduate/2023/02/26/NJUSE/dataStructure/Lecture07-Sorting/" title="Lecture07-Sorting">Lecture07-Sorting</a></span></li><li class="item"><div class="breadcrumb"><a href="/undergraduate/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/undergraduate/categories/NJUSE/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/undergraduate/2022/10/04/NJUSE/cpp/Lecture07-%E7%A8%8B%E5%BA%8F%E7%BB%84%E7%BB%87/" title="Lecture07-程序组织">Lecture07-程序组织</a></span></li><li class="item"><div class="breadcrumb"><a href="/undergraduate/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/undergraduate/categories/NJUSE/%E9%9C%80%E6%B1%82/" title="分类于 需求">需求</a></div><span><a href="/undergraduate/2024/01/15/NJUSE/%E9%9C%80%E6%B1%822023%E5%9B%9E%E5%BF%86/" title="需求2023回忆">需求2023回忆</a></span></li><li class="item"><div class="breadcrumb"><a href="/undergraduate/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/undergraduate/categories/NJUSE/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/" title="分类于 互联网计算">互联网计算</a></div><span><a href="/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture06-%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82/" title="Lecture06-会话、表示、应用层">Lecture06-会话、表示、应用层</a></span></li><li class="item"><div class="breadcrumb"><a href="/undergraduate/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/undergraduate/categories/NJUSE/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/undergraduate/2023/02/08/NJUSE/cpp/Lecture14-%E6%A8%A1%E6%9D%BF/" title="Lecture14-模板">Lecture14-模板</a></span></li><li class="item"><div class="breadcrumb"><a href="/undergraduate/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/undergraduate/categories/NJUSE/%E4%BA%BA%E6%9C%BA%E4%BA%A4%E4%BA%92/" title="分类于 人机交互">人机交互</a></div><span><a href="/undergraduate/2024/01/15/NJUSE/%E4%BA%BA%E6%9C%BA%E4%BA%A4%E4%BA%92%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/" title="人机交互期末复习">人机交互期末复习</a></span></li><li class="item"><div class="breadcrumb"><a href="/undergraduate/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/undergraduate/categories/NJUSE/%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E5%9F%BA%E7%A1%80/" title="分类于 数据管理基础">数据管理基础</a></div><span><a href="/undergraduate/2023/06/14/NJUSE/%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E5%9F%BA%E7%A1%80%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/" title="数据管理基础期末复习">数据管理基础期末复习</a></span></li><li class="item"><div class="breadcrumb"><a href="/undergraduate/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/undergraduate/categories/NJUSE/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/" title="分类于 互联网计算">互联网计算</a></div><span><a href="/undergraduate/2023/02/08/NJUSE/internet-computer/Lecture03-%E9%93%BE%E8%B7%AF%E5%B1%82/" title="Lecture03-链路层">Lecture03-链路层</a></span></li><li class="item"><div class="breadcrumb"><a href="/undergraduate/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/undergraduate/categories/NJUSE/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/undergraduate/2022/10/18/NJUSE/cpp/Lecture08-%E6%95%B0%E7%BB%84%E5%92%8C%E6%8C%87%E9%92%88/" title="Lecture08-数组和指针">Lecture08-数组和指针</a></span></li><li class="item"><div class="breadcrumb"><a href="/undergraduate/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/undergraduate/categories/NJUSE/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E4%B8%8E%E7%BB%93%E6%9E%84/" title="分类于 计算机组成与结构">计算机组成与结构</a></div><span><a href="/undergraduate/2022/10/04/NJUSE/COA/Lecture04-%E6%95%B4%E6%95%B0%E8%BF%90%E7%AE%97/" title="Lecture04-整数运算">Lecture04-整数运算</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-quas-modo"></i> </span><span class="author" itemprop="copyrightHolder">quas-modo @ quas-modo</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">411k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">6:14</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2023/06/14/NJUSE/数据管理基础期末复习/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/undergraduate/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->