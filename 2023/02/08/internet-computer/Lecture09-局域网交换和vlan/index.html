<!-- build time:Wed Feb 08 2023 18:25:11 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="Carpe diem" href="https://quas-modo.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="Carpe diem" href="https://quas-modo.github.io/atom.xml"><link rel="alternate" type="application/json" title="Carpe diem" href="https://quas-modo.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="计网"><link rel="canonical" href="https://quas-modo.github.io/2023/02/08/internet-computer/Lecture09-%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E5%92%8Cvlan/"><title>Lecture09-局域网交换和vlan - 互联网计算 - NJUSE | quas-modo = Carpe diem = pluck the day</title><meta name="generator" content="Hexo 5.4.2"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Lecture09-局域网交换和vlan</h1><div class="meta"><span class="item" title="创建时间：2023-02-08 17:53:17"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2023-02-08T17:53:17+08:00">2023-02-08</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>4.7k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>4 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">quas-modo</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/krenz-cushart-steampunk-color5-final.jpg"></li><li class="item" data-background-image="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/krenz-cushart-9.jpg"></li><li class="item" data-background-image="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/krenz-cushart-3-step9.jpg"></li><li class="item" data-background-image="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/krenz-cushart-whitebride-exam4.jpg"></li><li class="item" data-background-image="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/krenz-cushart-shanghai2.jpg"></li><li class="item" data-background-image="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/krenz-cushart-10.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/NJUSE/" itemprop="item" rel="index" title="分类于 NJUSE"><span itemprop="name">NJUSE</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/NJUSE/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/" itemprop="item" rel="index" title="分类于 互联网计算"><span itemprop="name">互联网计算</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://quas-modo.github.io/2023/02/08/internet-computer/Lecture09-%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E5%92%8Cvlan/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="quas-modo"><meta itemprop="description" content="pluck the day, notes/thoughts/nonsense"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Carpe diem"></span><div class="body md" itemprop="articleBody"><h1 id="lecture9-局域网交换与vlan"><a class="anchor" href="#lecture9-局域网交换与vlan">#</a> Lecture9- 局域网交换与 VLAN</h1><h2 id="交换机"><a class="anchor" href="#交换机">#</a> 交换机</h2><h3 id="交换机基本功能"><a class="anchor" href="#交换机基本功能">#</a> 交换机基本功能</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_03.jpg" alt="第9讲：局域网交换与vlan_页面_03"></p><ol><li>根据 MAC 地址建立和维护<strong>交换表</strong> (类似于网桥表)</li><li>将帧切换出接口到目标</li></ol><h3 id="对称交换"><a class="anchor" href="#对称交换">#</a> 对称交换</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_04.jpg" alt="第9讲：局域网交换与vlan_页面_04"></p><ol><li>对称交换可在具有相同带宽 (10/10 Mbps 或 100/100 Mbps) 的端口之间提供交换连接</li><li>用户尝试访问其他网段上的服务器时，可能会导致瓶颈 (对称交换可能会导致带宽不足)</li></ol><h3 id="不对称交换"><a class="anchor" href="#不对称交换">#</a> 不对称交换</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_05.jpg" alt="第9讲：局域网交换与vlan_页面_05"></p><ol><li>通过将带有服务器的网段连接到<strong>更高带宽的端口 (100 Mbps)</strong>，非对称交换 (asymmetric switching) 减少了服务器上潜在瓶颈的可能性</li><li>非对称交换需要在交换器中进行内存缓冲</li><li>非对称交换端口解决对称交换端口中的对称阻塞问题 (进一步保证了服务器的稳定实现)</li></ol><h3 id="内存缓存"><a class="anchor" href="#内存缓存">#</a> 内存缓存</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_06.jpg" alt="第9讲：局域网交换与vlan_页面_06"></p><ol><li>交换机中存储目标和传输数据的内存区域，直到可以将其切换出正确的端口为止。<ol><li>基于端口 (Port) 的内存缓冲<ol><li>数据包存储在每个端口的队列中</li><li>由于目标端口繁忙，一个数据包可能会延迟其他数据包的传输</li><li>其他端口存在不均衡的问题。</li></ol></li><li>共享 (Shared) 内存缓冲<ol><li>所有端口共享的公用内存缓冲</li><li>允许将数据包在一个端口上接收并在另一个端口上发送出去，而无需将其更改为其他队列。</li><li>需要自己记录端口的信息</li></ol></li></ol></li><li>发生阻塞的时候，根据情况按照端口或者内存将包缓存下来</li></ol><h3 id="交换方式"><a class="anchor" href="#交换方式">#</a> 交换方式</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_07.jpg" alt="第9讲：局域网交换与vlan_页面_07"></p><p>储存转发 (Store-and-Forward，网桥、路由器等通过软件的设备)</p><ol><li>交换机<strong>接收整个帧</strong>，最后将其计算为 CRC，然后再将其发送到目的地</li><li>接收后，校验，正确再发送</li></ol><p>Cut-through 直通</p><ol><li>转发会增加延迟：通过使用直通切换方法可以减少它</li><li>快速转发切换：仅在立即转发帧之前检查目标 MAC (只看到<strong>帧的目的地址</strong>就转发)</li><li>碎片释放：读取前 64 个字节去减少碰撞和帧碎片，在转发帧之前</li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_08.jpg" alt="第9讲：局域网交换与vlan_页面_08"></p><p>三种查看方式</p><h3 id="第二层交换机"><a class="anchor" href="#第二层交换机">#</a> 第二层交换机</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_09.jpg" alt="第9讲：局域网交换与vlan_页面_09"></p><ol><li>大规模集成电路，保证链路效率，低时延，低成本</li><li>有一个 MAC 地址</li></ol><h3 id="第三层交换机"><a class="anchor" href="#第三层交换机">#</a> 第三层交换机</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_10.jpg" alt="第9讲：局域网交换与vlan_页面_10"></p><p>基于硬件的帧转发机制，较高的帧转发性能，低时延</p><p>较高速的计算</p><p>每一个端口的代价低</p><p>流控制</p><p>安全性更高</p><p>对数据流进行路由，生成 MAC 和 IP 的映射，直接经过第二层（？，智能性较差</p><h3 id="第四层交换机"><a class="anchor" href="#第四层交换机">#</a> 第四层交换机</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_11.jpg" alt="第9讲：局域网交换与vlan_页面_11"></p><h3 id="多层交换机协议"><a class="anchor" href="#多层交换机协议">#</a> 多层交换机协议</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_12.jpg" alt="第9讲：局域网交换与vlan_页面_12"></p><h2 id="stp-the-spanning-tree-protocol-生成树协议"><a class="anchor" href="#stp-the-spanning-tree-protocol-生成树协议">#</a> STP the Spanning-Tree Protocol 生成树协议</h2><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_13.jpg" alt="第9讲：局域网交换与vlan_页面_13"></p><h3 id="桥回路"><a class="anchor" href="#桥回路">#</a> 桥回路</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_14.jpg" alt="第9讲：局域网交换与vlan_页面_14"></p><ol><li>出于各种原因，网络中可能会出现环路。<ol><li>通常，网络中的环路是<strong>故意提供冗余</strong>的结果。</li><li>也可能由于配置错误而发生：在桥接网络中，环路可能是绝对灾难性的两个主要原因：<ol><li>广播回路 (广播风暴)，没有 TTL</li><li>路由表的错误</li></ol></li></ol></li></ol><h3 id="冗余造成了路由回路"><a class="anchor" href="#冗余造成了路由回路">#</a> 冗余造成了路由回路</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_15.jpg" alt="第9讲：局域网交换与vlan_页面_15"></p><h3 id="第二层路由回路"><a class="anchor" href="#第二层路由回路">#</a> 第二层路由回路</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_16.jpg" alt="第9讲：局域网交换与vlan_页面_16"></p><ol><li>广播和第 2 层回路可能是危险的组合。</li><li>以太网帧没有 TTL 字段</li><li>以太网帧开始循环后，它可能会继续下去，直到有人关闭其中一台交换机或断开链路为止 (外部条件)</li><li>交换机将抖动 (flip flop) 主机 A 的桥接表条目 (创建极高的 CPU 利用率)。</li><li>消耗 CPU 和内存</li></ol><h4 id="泛洪单播帧"><a class="anchor" href="#泛洪单播帧">#</a> 泛洪单播帧</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_17.jpg" alt="第9讲：局域网交换与vlan_页面_17"></p><ul><li>过一段时间 CAT-1 和 CAT-2 没有收到 Host-B 的信息，删除表中的对应记录</li><li>在这之后，Host A 发送给 Host B 信息，然后在 CAT-1 和 CAT-2 之间进行循环</li></ul><h3 id="生成树概述"><a class="anchor" href="#生成树概述">#</a> 生成树概述</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_18.jpg" alt="第9讲：局域网交换与vlan_页面_18"></p><ol><li>生成树协议的元素<ol><li>主要功能：在<strong>交换 / 桥接网络</strong>中允许<strong>冗余路径</strong>，而不会因环路的影响而引起延迟。</li><li>STP 通过计算<strong>稳定的生成树</strong>网络拓扑来防止环路</li><li><strong>生成树帧</strong> (称为桥协议数据单元 - BPDU) 用于确定生成树拓扑</li></ol></li><li>在正常情况下禁用一些端口来防止出现冗余</li></ol><h4 id="决策顺序"><a class="anchor" href="#决策顺序">#</a> 决策顺序</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_19.jpg" alt="第9讲：局域网交换与vlan_页面_19"></p><p>生成树始终使用相同的四步决策序列：</p><ol><li>在拓扑里面最低的 root BID (网桥标识)【找到 root 路由器】</li><li>找到 Root bridgh 的最低路径成本</li><li>每个路径都会选择一个最低 BID 的 sender 这个是针对一个链路的，详见例子</li><li>每个路径再指定一个最低的 ID 端口</li></ol><h4 id="bpdu-bridge-protocol-data-unit"><a class="anchor" href="#bpdu-bridge-protocol-data-unit">#</a> BPDU Bridge Protocol Data Unit</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_20.jpg" alt="第9讲：局域网交换与vlan_页面_20"></p><p>STP 建立一个称为<strong>根网桥的根节点</strong></p><p>生成的树源自根桥。</p><p>不属于最短路径树的冗余连接将被阻止。(block 端口，不转发，但是接收)（只会有一条路最短）</p><p>在阻塞的链接上收到的数据帧将被丢弃。</p><p>交换机发送的允许形成无环逻辑拓扑的消息是 BPDU</p><h4 id="stp-bpdu"><a class="anchor" href="#stp-bpdu">#</a> stp bpdu</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_21.jpg" alt="第9讲：局域网交换与vlan_页面_21"></p><h4 id="bridge-identificationbid"><a class="anchor" href="#bridge-identificationbid">#</a> Bridge Identification/BID</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_22.jpg" alt="第9讲：局域网交换与vlan_页面_22"></p><ol><li>网桥 ID (BID)：8 个字节 (2 + 6)<ol><li>高阶 BID 子字段 (2 个字节)：网桥优先级<ol><li>216 个可能的值：0-65,535 (默认值：32,768)</li><li>通常以十进制格式表示</li></ol></li><li>低阶子字段 (6 个字节)：分配给交换机的 MAC 地址，以十六进制格式表示</li></ol></li><li>STP 成本值：成本越低越好。</li></ol><h4 id="选举根路由器"><a class="anchor" href="#选举根路由器">#</a> 选举根路由器</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_23.jpg" alt="第9讲：局域网交换与vlan_页面_23"></p><ol><li>交换机通过查找具有<strong>最低 BID</strong> 的交换机 (通常称为根战争) 来选择单个根交换机。</li><li>如果所有交换机都使用默认的网桥优先级 32768，则最低的 MAC 地址将作为平局。</li><li>配置优先级来调整根桥</li></ol><h3 id="路径代价cost"><a class="anchor" href="#路径代价cost">#</a> 路径代价 cost</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_24.jpg" alt="第9讲：局域网交换与vlan_页面_24"></p><h3 id="5个stp的状态"><a class="anchor" href="#5个stp的状态">#</a> 5 个 STP 的状态</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_25.jpg" alt="第9讲：局域网交换与vlan_页面_25"></p><ol><li>通过根据策略配置每个端口来建立状态</li><li>然后，STP 根据流量模式 (traffic Patterns) 和潜在环路 (Protential Loops) 修改状态</li><li>STP 状态的默认顺序为：<ol><li>阻塞：没有转发帧，听到了 BPDU</li><li>监听：不转发任何帧，监听数据帧 (确定自己可以参加的交换)，也会发送一些数据帧表示自己状态变了</li><li>学习：不转发帧，学习地址</li><li>转发：转发帧，学习地址</li><li>禁用：没有转发帧，没有听到 BPDU</li></ol></li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230109113837280.png" alt="image-20230109113837280"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230109113900889.png" alt="image-20230109113900889"></p><h3 id="初始stp收敛"><a class="anchor" href="#初始stp收敛">#</a> 初始 STP 收敛</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_26.jpg" alt="第9讲：局域网交换与vlan_页面_26"></p><ol><li>当网络首次启动时，所有网桥都会混合使用 BPDU 信息来泛洪网络。(开始泛洪 BPDU 信息)</li><li>立即，他们应用决策序列，允许他们 BPDU 进行 PK，然后选择出来 ROOT，从而形成整个网络的单个生成树。</li></ol><pre><code>(Step 1) 根交换机决定：选择一个根桥作为该网络的中心点
(Step 2) 选择根端口：所有剩余的网桥都会计算出一组根端口
(Step 3) 选择指定端口：其余所有网桥计算一组指定端口
</code></pre><h4 id="步骤1-根交换机决定"><a class="anchor" href="#步骤1-根交换机决定">#</a> 步骤 1 根交换机决定</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_27.jpg" alt="第9讲：局域网交换与vlan_页面_27"></p><ol><li>（所有路由器都）宣布自己为根</li><li>检查端口上收到的所有 BPDU 以及将在该端口上发送的 BPDU</li><li>对于每个到达的 BPDU，如果其值小于为端口保存的现有 BPDU</li><li>旧值被替换（由于 cat-A 的 BID 最小，所有 BC 均替换）</li><li>BPDU 的发送者被接受为新的根</li></ol><h4 id="步骤2选择根端口"><a class="anchor" href="#步骤2选择根端口">#</a> 步骤 2：选择根端口</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_28.jpg" alt="第9讲：局域网交换与vlan_页面_28"></p><ol><li>每个非根桥必须选择一个根端口。<ol><li>桥的根端口是最接近根桥的端口。</li><li>根路径成本是到根网桥的所有链接的累积 (cumulative) 成本。</li></ol></li></ol><h4 id="步骤3选择网段的指定端口"><a class="anchor" href="#步骤3选择网段的指定端口">#</a> 步骤 3：选择网段的指定端口</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_29.jpg" alt="第9讲：局域网交换与vlan_页面_29"></p><ol><li>每个网段都有一个指定的端口：充当单个网桥 / 交换机端口，该端口既向该网段又向根网桥发送流量，也从该网段和根网桥接收流量。</li><li>包含给定网段的指定端口的网桥 / 交换机称为该网段的指定网桥。</li><li>所有网桥 / 交换机将阻止它们上未指定的端口，根网桥上的每个活动端口都将成为指定端口</li><li>每个链路只有一个指定端口，一旦选定其他就 block 了</li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_30.jpg" alt="第9讲：局域网交换与vlan_页面_30"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_31.jpg" alt="第9讲：局域网交换与vlan_页面_31"></p><h2 id="vlan"><a class="anchor" href="#vlan">#</a> Vlan</h2><h3 id="vlan介绍"><a class="anchor" href="#vlan介绍">#</a> vlan 介绍</h3><h4 id="现有的共享局域网配置"><a class="anchor" href="#现有的共享局域网配置">#</a> 现有的共享局域网配置</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_33.jpg" alt="第9讲：局域网交换与vlan_页面_33"></p><ol><li>在典型的共享局域网中…<ol><li>根据用户所插入 (plug) 的集线器对用户进行物理分组</li><li>路由器分割局域网并提供广播防火墙</li></ol></li><li>在虚拟局域网中<ol><li>您可以按使用的功能，部门或应用程序对用户进行逻辑分组</li><li>通过专有软件进行配置</li></ol></li></ol><h4 id="lan和vlan之间的差异"><a class="anchor" href="#lan和vlan之间的差异">#</a> LAN 和 VLAN 之间的差异</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_34.jpg" alt="第9讲：局域网交换与vlan_页面_34"></p><p>虚拟局域网</p><ol><li>在第 2 层和第 3 层工作</li><li>控制网络广播</li><li>允许用户由网络管理员分配。</li><li>提供更严格的网络安全性。</li></ol><h4 id="vlan标准"><a class="anchor" href="#vlan标准">#</a> vlan 标准</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_35.jpg" alt="第9讲：局域网交换与vlan_页面_35"></p><p>特点</p><ol><li>不限于物理交换机网段的网络设备或用户的<strong>逻辑分组</strong>。</li><li>VLAN 中的设备或用户可以按功能，部门，应用程序等进行分组，而<strong>不管其物理网段的位置</strong>如何。</li><li>VLAN<strong> 创建一个不限于物理网段</strong>的单个广播域，并且将其视为子网。</li><li>VLAN 设置是由网络管理员使用供应商的软件在交换机中完成的。</li></ol><h4 id="分组用户"><a class="anchor" href="#分组用户">#</a> 分组用户</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_36.jpg" alt="第9讲：局域网交换与vlan_页面_36"></p><ol><li>VLAN 可以从逻辑上将用户划分为不同的子网 (广播域)</li><li>广播帧仅在具有相同 VLAN ID 的一个或多个交换机的端口之间切换。(VLAN ID 属于端口)</li><li>可以通过基于以下内容的软件对用户进行逻辑分组：<ol><li>端口号</li><li>MAC 地址</li><li>使用的协议</li><li>使用的应用</li></ol></li></ol><h4 id="有无vlan的网络广播"><a class="anchor" href="#有无vlan的网络广播">#</a> 有无 vlan 的网络广播</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_37.jpg" alt="第9讲：局域网交换与vlan_页面_37"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_38.jpg" alt="第9讲：局域网交换与vlan_页面_38"></p><p>faculty studeng 分别在自己的 vlan 中传输</p><h4 id="vlan间通信"><a class="anchor" href="#vlan间通信">#</a> vlan 间通信</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_39.jpg" alt="第9讲：局域网交换与vlan_页面_39"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_40.jpg" alt="第9讲：局域网交换与vlan_页面_40"></p><h3 id="vlan结构"><a class="anchor" href="#vlan结构">#</a> vlan 结构</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_41.jpg" alt="第9讲：局域网交换与vlan_页面_41"></p><h4 id="backbone"><a class="anchor" href="#backbone">#</a> backbone</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_42.jpg" alt="第9讲：局域网交换与vlan_页面_42"></p><ol><li>VLAN 配置需要支持互连的路由器和交换机之间的骨干数据传输。</li><li>骨干网是用于 VLAN 间通信的区域</li><li>骨干网应该是高速链路，通常为 100Mbps 或更高</li><li>BackBone 可以跑多个 VLAN，是骨干网</li></ol><h4 id="vlan中路由器的作用"><a class="anchor" href="#vlan中路由器的作用">#</a> vlan 中路由器的作用</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_43.jpg" alt="第9讲：局域网交换与vlan_页面_43"></p><ol><li>路由器提供不同 VLAN 之间的连接</li><li>例如，您有 VLAN1 和 VLAN2。<ol><li>在交换机内，位于不同 VLAN 上的用户无法相互通信 (VLAN 的好处！)</li><li>但是，VLAN1 上的用户可以向 VLAN2 上的用户发送电子邮件，但他们需要路由器才能执行此操作。</li></ol></li></ol><h4 id="在vlan中帧的作用"><a class="anchor" href="#在vlan中帧的作用">#</a> 在 vlan 中帧的作用</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_44.jpg" alt="第9讲：局域网交换与vlan_页面_44"></p><ol><li>交换机根据帧中的数据做出过滤和转发决策。</li><li>使用了两种技术<ol><li>帧过滤：检查有关每个帧的特定信息 (MAC 地址或第 3 层协议类型), 特定的 VLAN 记录或者映射</li><li>帧标记：在整个网络骨干网中转发时，在每个帧的标题中放置一个唯一的标识符。</li></ol></li></ol><h5 id="帧过滤"><a class="anchor" href="#帧过滤">#</a> 帧过滤</h5><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_45.jpg" alt="第9讲：局域网交换与vlan_页面_45"></p><h5 id="帧标记"><a class="anchor" href="#帧标记">#</a> 帧标记</h5><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_46.jpg" alt="第9讲：局域网交换与vlan_页面_46"></p><ol><li>帧标记实施过程：<ol><li>在整个网络骨干网中转发时，在每个帧的标题中放置一个 VLAN 标识符。</li><li>每个开关都可以理解和检查标识符。</li><li>当帧离开网络骨干网时，交换机会在帧发送到目标终端站之前删除标识符。只和端口绑定，而不影响主机</li></ol></li><li>帧标记在第 2 层起作用</li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_47.jpg" alt="第9讲：局域网交换与vlan_页面_47"></p><p><strong>主机并不知道 vlan 的存在</strong></p><h5 id="帧标签标准"><a class="anchor" href="#帧标签标准">#</a> 帧标签标准</h5><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_48.jpg" alt="第9讲：局域网交换与vlan_页面_48"></p><p>IEEE802.1Q:IEEE 标准，在标头中插入 VLAN 的标签以标识所属的 VLAN。(帧标记)。</p><p>ISL (Inter-Switch Link)：思科专有。ISL 在数据帧的前面添加一个 26 字节的标头，并在末尾附加一个 CRC (4 字节)。</p><h3 id="vlan实现"><a class="anchor" href="#vlan实现">#</a> vlan 实现</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_49.jpg" alt="第9讲：局域网交换与vlan_页面_49"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_50.jpg" alt="第9讲：局域网交换与vlan_页面_50"></p><p>实现 VLAN 的两种方法</p><ol><li>静态的</li><li>动态的</li></ol><p>每一个端口绑定给一个 VLAN</p><ol><li>确保不共享同一 VLAN 的端口不共享广播。</li><li>确保共享相同 VLAN 的端口将共享广播</li></ol><p>实现途径:</p><ol><li>基于端口的虚拟局域网</li><li>基于 MAC 地址的虚拟局域网</li><li>基于 IP 地址的虚拟局域网</li><li>基于上层协议的虚拟局域网</li></ol><h4 id="静态vlan"><a class="anchor" href="#静态vlan">#</a> 静态 vlan</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_51.jpg" alt="第9讲：局域网交换与vlan_页面_51"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_52.jpg" alt="第9讲：局域网交换与vlan_页面_52"></p><p>定义：静态 VLAN 是指将交换机上的<strong>端口</strong>管理性地分配给 VLAN 的时间</p><p>优点：</p><ol><li>安全，易于配置和监控</li><li>在控制移动的网络中效果很好</li></ol><h4 id="动态vlan"><a class="anchor" href="#动态vlan">#</a> 动态 vlan</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_53.jpg" alt="第9讲：局域网交换与vlan_页面_53"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_54.jpg" alt="第9讲：局域网交换与vlan_页面_54"></p><ol><li>当工作站最初连接到未分配的端口时，交换机会检查表中的条目，并使用正确的 VLAN 动态配置端口</li><li>优点<ol><li>添加或移动用户时减少管理 (更多前期工作)</li><li>集中通知未授权用户</li></ol></li></ol><h4 id="以端口为中心的vlan"><a class="anchor" href="#以端口为中心的vlan">#</a> 以端口为中心的 vlan</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_55.jpg" alt="第9讲：局域网交换与vlan_页面_55"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_56.jpg" alt="第9讲：局域网交换与vlan_页面_56"></p><ol><li>同一 VLAN 中的所有节点都连接到同一路由器接口</li><li>使管理更容易，因为…<ol><li>通过路由器端口分配用户</li><li>VLAN 易于管理。</li><li>提供更高的安全性</li><li>数据包不会 &quot;泄漏&quot; 到其他域</li></ol></li></ol><h4 id="access-and-trunk-links"><a class="anchor" href="#access-and-trunk-links">#</a> access and trunk links</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_57.jpg" alt="第9讲：局域网交换与vlan_页面_57"></p><p>分为两类:</p><ol><li>接入链路：通过一个 VLAN 报文</li><li>骨干链路：通过多个 VLAN 报文</li></ol><h5 id="access"><a class="anchor" href="#access">#</a> access</h5><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_58.jpg" alt="第9讲：局域网交换与vlan_页面_58"></p><ol><li>访问连接是仅作为一个 VLAN 成员的交换机上的连接。</li><li>此 VLAN 被称为端口的本机 VLAN，连接到端口的任何设备都完全不知道 VLAN 存在。</li></ol><h5 id="trunk-links"><a class="anchor" href="#trunk-links">#</a> trunk links</h5><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_59.jpg" alt="第9讲：局域网交换与vlan_页面_59"></p><ol><li>主干链路能够支持多个 VLAN。</li><li>主干链路通常用于将交换机连接到其他交换机或路由器。</li><li>交换机在快速以太网和千兆位以太网端口上都支持骨干链路。</li><li>也存在访问和骨干链接</li><li>一般 Trunk 就是 BackBone</li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_60.jpg" alt="第9讲：局域网交换与vlan_页面_60"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_61.jpg" alt="第9讲：局域网交换与vlan_页面_61"></p><p>骨干链路不属于特定的 VLAN：充当交换机和路由器之间 VLAN 的通道。</p><p>可以将骨干链路配置为传输所有 VLAN 或有限数量的 VLAN。</p><p>但是，骨干链路可能具有本地 VLAN。</p><p>如果骨干线链路由于任何原因失败，则骨干线的本地 VLAN 是该骨干线使用的 VLAN。</p><h4 id="配置vlan"><a class="anchor" href="#配置vlan">#</a> 配置 vlan</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_62.jpg" alt="第9讲：局域网交换与vlan_页面_62"></p><p>在 Cisco 29xx 交换机上配置 VLAN 时，必须遵循以下准则：</p><ol><li>VLAN 的最大数量取决于交换机本身。</li><li>VLAN 1 是出厂默认 VLAN 之一。(native VLAN 往往是 VLAN1，以及广播也是)</li><li>VLAN 1 是默认的以太网 VLAN。</li><li>思科发现协议 (CDP) 和 VLAN 骨干协议 (VTP) 通告在 VLAN 1 上发送。</li><li>默认情况下，Catalyst 29xx IP 地址在 VLAN 1 广播域中。</li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_63.jpg" alt="第9讲：局域网交换与vlan_页面_63"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_64.jpg" alt="第9讲：局域网交换与vlan_页面_64"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_65.jpg" alt="第9讲：局域网交换与vlan_页面_65"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_66.jpg" alt="第9讲：局域网交换与vlan_页面_66"></p><h3 id="vlan间中的路由"><a class="anchor" href="#vlan间中的路由">#</a> vlan 间中的路由</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_67.jpg" alt="第9讲：局域网交换与vlan_页面_67"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_68.jpg" alt="第9讲：局域网交换与vlan_页面_68"></p><ol><li>每个端口连接一个 VLAN，每个 IP 和一个 VLAN 连接</li><li>如下图，我们使用串口线，物理上是一个一个接口，划分成多个 IP 和子接口</li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230109125803577.png" alt="image-20230109125803577"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_69.jpg" alt="第9讲：局域网交换与vlan_页面_69"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_70.jpg" alt="第9讲：局域网交换与vlan_页面_70"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_71.jpg" alt="第9讲：局域网交换与vlan_页面_71"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC9%E8%AE%B2%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan_%E9%A1%B5%E9%9D%A2_72.jpg" alt="第9讲：局域网交换与vlan_页面_72"></p><div class="tags"><a href="/tags/%E8%AE%A1%E7%BD%91/" rel="tag"><i class="ic i-tag"></i> 计网</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-02-08 17:56:50" itemprop="dateModified" datetime="2023-02-08T17:56:50+08:00">2023-02-08</time> </span><span id="2023/02/08/internet-computer/Lecture09-局域网交换和vlan/" class="item leancloud_visitors" data-flag-title="Lecture09-局域网交换和vlan" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.jpg" alt="quas-modo 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.jpg" alt="quas-modo 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="quas-modo 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>quas-modo <i class="ic i-at"><em>@</em></i>Carpe diem</li><li class="link"><strong>本文链接：</strong> <a href="https://quas-modo.github.io/2023/02/08/internet-computer/Lecture09-%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E5%92%8Cvlan/" title="Lecture09-局域网交换和vlan">https://quas-modo.github.io/2023/02/08/internet-computer/Lecture09-局域网交换和vlan/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2023/02/08/internet-computer/Lecture08-%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AERIPOSPF/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;quasdo.oss-cn-hangzhou.aliyuncs.com&#x2F;img&#x2F;krenz-cushart-9.jpg" title="Lecture08-路由协议RIPOSPF"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 互联网计算</span><h3>Lecture08-路由协议RIPOSPF</h3></a></div><div class="item right"><a href="/2023/02/08/internet-computer/Lecture10-%E5%B9%BF%E5%9F%9F%E7%BD%91/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;quasdo.oss-cn-hangzhou.aliyuncs.com&#x2F;img&#x2F;krenz-cushart-whitebride-exam4.jpg" title="Lecture10-广域网"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 互联网计算</span><h3>Lecture10-广域网</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#lecture9-%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E4%B8%8Evlan"><span class="toc-number">1.</span> <span class="toc-text">Lecture9- 局域网交换与 VLAN</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">1.1.</span> <span class="toc-text">交换机</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD"><span class="toc-number">1.1.1.</span> <span class="toc-text">交换机基本功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E7%A7%B0%E4%BA%A4%E6%8D%A2"><span class="toc-number">1.1.2.</span> <span class="toc-text">对称交换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E5%AF%B9%E7%A7%B0%E4%BA%A4%E6%8D%A2"><span class="toc-number">1.1.3.</span> <span class="toc-text">不对称交换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E7%BC%93%E5%AD%98"><span class="toc-number">1.1.4.</span> <span class="toc-text">内存缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F"><span class="toc-number">1.1.5.</span> <span class="toc-text">交换方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">1.1.6.</span> <span class="toc-text">第二层交换机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">1.1.7.</span> <span class="toc-text">第三层交换机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">1.1.8.</span> <span class="toc-text">第四层交换机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.1.9.</span> <span class="toc-text">多层交换机协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#stp-the-spanning-tree-protocol-%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.2.</span> <span class="toc-text">STP the Spanning-Tree Protocol 生成树协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%A5%E5%9B%9E%E8%B7%AF"><span class="toc-number">1.2.1.</span> <span class="toc-text">桥回路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%97%E4%BD%99%E9%80%A0%E6%88%90%E4%BA%86%E8%B7%AF%E7%94%B1%E5%9B%9E%E8%B7%AF"><span class="toc-number">1.2.2.</span> <span class="toc-text">冗余造成了路由回路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%B1%82%E8%B7%AF%E7%94%B1%E5%9B%9E%E8%B7%AF"><span class="toc-number">1.2.3.</span> <span class="toc-text">第二层路由回路</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%9B%E6%B4%AA%E5%8D%95%E6%92%AD%E5%B8%A7"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">泛洪单播帧</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E6%A0%91%E6%A6%82%E8%BF%B0"><span class="toc-number">1.2.4.</span> <span class="toc-text">生成树概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%B3%E7%AD%96%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">决策顺序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bpdu-bridge-protocol-data-unit"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">BPDU Bridge Protocol Data Unit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#stp-bpdu"><span class="toc-number">1.2.4.3.</span> <span class="toc-text">stp bpdu</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bridge-identificationbid"><span class="toc-number">1.2.4.4.</span> <span class="toc-text">Bridge Identification&#x2F;BID</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E4%B8%BE%E6%A0%B9%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="toc-number">1.2.4.5.</span> <span class="toc-text">选举根路由器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84%E4%BB%A3%E4%BB%B7cost"><span class="toc-number">1.2.5.</span> <span class="toc-text">路径代价 cost</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E4%B8%AAstp%E7%9A%84%E7%8A%B6%E6%80%81"><span class="toc-number">1.2.6.</span> <span class="toc-text">5 个 STP 的状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E5%A7%8Bstp%E6%94%B6%E6%95%9B"><span class="toc-number">1.2.7.</span> <span class="toc-text">初始 STP 收敛</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A41-%E6%A0%B9%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%86%B3%E5%AE%9A"><span class="toc-number">1.2.7.1.</span> <span class="toc-text">步骤 1 根交换机决定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A42%E9%80%89%E6%8B%A9%E6%A0%B9%E7%AB%AF%E5%8F%A3"><span class="toc-number">1.2.7.2.</span> <span class="toc-text">步骤 2：选择根端口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A43%E9%80%89%E6%8B%A9%E7%BD%91%E6%AE%B5%E7%9A%84%E6%8C%87%E5%AE%9A%E7%AB%AF%E5%8F%A3"><span class="toc-number">1.2.7.3.</span> <span class="toc-text">步骤 3：选择网段的指定端口</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vlan"><span class="toc-number">1.3.</span> <span class="toc-text">Vlan</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vlan%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.3.1.</span> <span class="toc-text">vlan 介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%8E%B0%E6%9C%89%E7%9A%84%E5%85%B1%E4%BA%AB%E5%B1%80%E5%9F%9F%E7%BD%91%E9%85%8D%E7%BD%AE"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">现有的共享局域网配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#lan%E5%92%8Cvlan%E4%B9%8B%E9%97%B4%E7%9A%84%E5%B7%AE%E5%BC%82"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">LAN 和 VLAN 之间的差异</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vlan%E6%A0%87%E5%87%86"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">vlan 标准</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E7%94%A8%E6%88%B7"><span class="toc-number">1.3.1.4.</span> <span class="toc-text">分组用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E6%97%A0vlan%E7%9A%84%E7%BD%91%E7%BB%9C%E5%B9%BF%E6%92%AD"><span class="toc-number">1.3.1.5.</span> <span class="toc-text">有无 vlan 的网络广播</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vlan%E9%97%B4%E9%80%9A%E4%BF%A1"><span class="toc-number">1.3.1.6.</span> <span class="toc-text">vlan 间通信</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vlan%E7%BB%93%E6%9E%84"><span class="toc-number">1.3.2.</span> <span class="toc-text">vlan 结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#backbone"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">backbone</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vlan%E4%B8%AD%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">vlan 中路由器的作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8vlan%E4%B8%AD%E5%B8%A7%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">在 vlan 中帧的作用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%A7%E8%BF%87%E6%BB%A4"><span class="toc-number">1.3.2.3.1.</span> <span class="toc-text">帧过滤</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%A7%E6%A0%87%E8%AE%B0"><span class="toc-number">1.3.2.3.2.</span> <span class="toc-text">帧标记</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%A7%E6%A0%87%E7%AD%BE%E6%A0%87%E5%87%86"><span class="toc-number">1.3.2.3.3.</span> <span class="toc-text">帧标签标准</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vlan%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.3.3.</span> <span class="toc-text">vlan 实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81vlan"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">静态 vlan</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81vlan"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">动态 vlan</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E7%AB%AF%E5%8F%A3%E4%B8%BA%E4%B8%AD%E5%BF%83%E7%9A%84vlan"><span class="toc-number">1.3.3.3.</span> <span class="toc-text">以端口为中心的 vlan</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#access-and-trunk-links"><span class="toc-number">1.3.3.4.</span> <span class="toc-text">access and trunk links</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#access"><span class="toc-number">1.3.3.4.1.</span> <span class="toc-text">access</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#trunk-links"><span class="toc-number">1.3.3.4.2.</span> <span class="toc-text">trunk links</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEvlan"><span class="toc-number">1.3.3.5.</span> <span class="toc-text">配置 vlan</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vlan%E9%97%B4%E4%B8%AD%E7%9A%84%E8%B7%AF%E7%94%B1"><span class="toc-number">1.3.4.</span> <span class="toc-text">vlan 间中的路由</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/2022/09/08/internet-computer/Lecture01-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0/" rel="bookmark" title="Lecture01-计算机网络概述">Lecture01-计算机网络概述</a></li><li><a href="/2022/10/07/internet-computer/Lecture02-%E7%89%A9%E7%90%86%E5%B1%82/" rel="bookmark" title="Lecture02-物理层">Lecture02-物理层</a></li><li><a href="/2023/02/08/internet-computer/Lecture03-%E9%93%BE%E8%B7%AF%E5%B1%82/" rel="bookmark" title="Lecture03-链路层">Lecture03-链路层</a></li><li><a href="/2023/02/08/internet-computer/Lecture04-%E7%BD%91%E7%BB%9C%E5%B1%82/" rel="bookmark" title="Lecture04-网络层">Lecture04-网络层</a></li><li><a href="/2023/02/08/internet-computer/Lecture05-%E4%BC%A0%E8%BE%93%E5%B1%82/" rel="bookmark" title="Lecture05-传输层">Lecture05-传输层</a></li><li><a href="/2023/02/08/internet-computer/Lecture06-%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82/" rel="bookmark" title="Lecture06-会话、表示、应用层">Lecture06-会话、表示、应用层</a></li><li><a href="/2023/02/08/internet-computer/Lecture07-%E8%B7%AF%E7%94%B1%E5%99%A8/" rel="bookmark" title="Lecture07-路由器">Lecture07-路由器</a></li><li><a href="/2023/02/08/internet-computer/Lecture08-%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AERIPOSPF/" rel="bookmark" title="Lecture08-路由协议RIPOSPF">Lecture08-路由协议RIPOSPF</a></li><li class="active"><a href="/2023/02/08/internet-computer/Lecture09-%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E5%92%8Cvlan/" rel="bookmark" title="Lecture09-局域网交换和vlan">Lecture09-局域网交换和vlan</a></li><li><a href="/2023/02/08/internet-computer/Lecture10-%E5%B9%BF%E5%9F%9F%E7%BD%91/" rel="bookmark" title="Lecture10-广域网">Lecture10-广域网</a></li><li><a href="/2023/02/08/internet-computer/Lecture11-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" rel="bookmark" title="Lecture11-网络安全">Lecture11-网络安全</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="quas-modo" data-src="/images/avatar.jpg"><p class="name" itemprop="name">quas-modo</p><div class="description" itemprop="description">notes/thoughts/nonsense</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">51</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">12</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">8</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3F1YXMtbW9kbw==" title="https:&#x2F;&#x2F;github.com&#x2F;quas-modo"><i class="ic i-github"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>friends</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2023/02/08/internet-computer/Lecture08-%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AERIPOSPF/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2023/02/08/internet-computer/Lecture10-%E5%B9%BF%E5%9F%9F%E7%BD%91/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/%E4%B8%93%E4%B8%9A%E4%B9%A6%E7%B1%8D/" title="分类于 专业书籍">专业书籍</a> <i class="ic i-angle-right"></i> <a href="/categories/%E4%B8%93%E4%B8%9A%E4%B9%A6%E7%B1%8D/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B/" title="分类于 计算机网络自顶向下">计算机网络自顶向下</a></div><span><a href="/2022/09/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B/Lecture02-%E5%BA%94%E7%94%A8%E5%B1%82/" title="Lecture02-应用层">Lecture02-应用层</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/categories/NJUSE/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E4%B8%8E%E7%BB%93%E6%9E%84/" title="分类于 计算机组成与结构">计算机组成与结构</a></div><span><a href="/2022/09/23/COA/Lecture03-%E6%95%B0%E6%8D%AE%E7%9A%84%E6%9C%BA%E5%99%A8%E7%BA%A7%E8%A1%A8%E8%A1%A8%E7%A4%BA/" title="Lecture03-数据的机器级表表示">Lecture03-数据的机器级表表示</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/categories/NJUSE/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/" title="分类于 互联网计算">互联网计算</a></div><span><a href="/2023/02/08/internet-computer/Lecture06-%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82/" title="Lecture06-会话、表示、应用层">Lecture06-会话、表示、应用层</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/categories/NJUSE/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/2022/10/04/cpp/Lecture07-%E7%A8%8B%E5%BA%8F%E7%BB%84%E7%BB%87/" title="Lecture07-程序组织">Lecture07-程序组织</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/categories/NJUSE/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/" title="分类于 互联网计算">互联网计算</a></div><span><a href="/2022/10/07/internet-computer/Lecture02-%E7%89%A9%E7%90%86%E5%B1%82/" title="Lecture02-物理层">Lecture02-物理层</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/categories/NJUSE/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E4%B8%8E%E7%BB%93%E6%9E%84/" title="分类于 计算机组成与结构">计算机组成与结构</a></div><span><a href="/2022/10/14/COA/Lecture05-%E6%B5%AE%E7%82%B9%E6%95%B0%E8%AE%A1%E7%AE%97/" title="Lecture05-浮点数计算">Lecture05-浮点数计算</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/categories/NJUSE/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E4%B8%8E%E7%BB%93%E6%9E%84/" title="分类于 计算机组成与结构">计算机组成与结构</a></div><span><a href="/2022/09/15/COA/Lecture02-%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E7%9A%84%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" title="Lecture02-计算机体系结构的问题及解决方案">Lecture02-计算机体系结构的问题及解决方案</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/categories/NJUSE/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/2022/09/21/cpp/Lecture04-%E7%AC%AC%E4%B8%80%E6%AC%A1cpp%E7%BC%96%E7%A8%8B/" title="Lecture04-第一次cpp编程">Lecture04-第一次cpp编程</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%85%B6%E4%BB%96/" title="分类于 其他">其他</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%85%B6%E4%BB%96/%E8%A5%BF%E6%96%B9%E7%BE%8E%E6%9C%AF%E5%8F%B2/" title="分类于 西方美术史">西方美术史</a></div><span><a href="/2022/09/20/%E8%A5%BF%E6%96%B9%E7%BE%8E%E6%9C%AF%E5%8F%B2/Lecture01-%E5%8F%B2%E5%89%8D%E5%8F%8A%E5%9F%83%E5%8F%8A%E7%BE%8E%E6%9C%AF/" title="Lecture01 史前及埃及美术">Lecture01 史前及埃及美术</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/categories/NJUSE/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/" title="分类于 互联网计算">互联网计算</a></div><span><a href="/2023/02/08/internet-computer/Lecture08-%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AERIPOSPF/" title="Lecture08-路由协议RIPOSPF">Lecture08-路由协议RIPOSPF</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-quas-modo"></i> </span><span class="author" itemprop="copyrightHolder">quas-modo @ quas-modo</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">159k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">2:25</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2023/02/08/internet-computer/Lecture09-局域网交换和vlan/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->