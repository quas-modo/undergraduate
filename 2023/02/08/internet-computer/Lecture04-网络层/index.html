<!-- build time:Fri Jul 14 2023 00:23:44 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="Carpe diem" href="https://quas-modo.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="Carpe diem" href="https://quas-modo.github.io/atom.xml"><link rel="alternate" type="application/json" title="Carpe diem" href="https://quas-modo.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="计网"><link rel="canonical" href="https://quas-modo.github.io/2023/02/08/internet-computer/Lecture04-%E7%BD%91%E7%BB%9C%E5%B1%82/"><title>Lecture04-网络层 - 互联网计算 - NJUSE | quas-modo = Carpe diem = pluck the day</title><meta name="generator" content="Hexo 5.4.2"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Lecture04-网络层</h1><div class="meta"><span class="item" title="创建时间：2023-02-08 17:52:09"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2023-02-08T17:52:09+08:00">2023-02-08</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>7.1k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>6 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">quas-modo</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/wenjun-lin-asset (5).jpg"></li><li class="item" data-background-image="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/krenz-cushart-shanghai2.jpg"></li><li class="item" data-background-image="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/wenjun-lin-asset (4).jpg"></li><li class="item" data-background-image="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/wenjun-lin-asset (2).jpg"></li><li class="item" data-background-image="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/krenz-cushart-whitebride-exam4.jpg"></li><li class="item" data-background-image="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/krenz-cushart-3-step9.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/NJUSE/" itemprop="item" rel="index" title="分类于 NJUSE"><span itemprop="name">NJUSE</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/NJUSE/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/" itemprop="item" rel="index" title="分类于 互联网计算"><span itemprop="name">互联网计算</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://quas-modo.github.io/2023/02/08/internet-computer/Lecture04-%E7%BD%91%E7%BB%9C%E5%B1%82/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="quas-modo"><meta itemprop="description" content="pluck the day, notes/thoughts/nonsense"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Carpe diem"></span><div class="body md" itemprop="articleBody"><h1 id="lecture04-网络层"><a class="anchor" href="#lecture04-网络层">#</a> Lecture04 - 网络层</h1><h2 id="网络层概述"><a class="anchor" href="#网络层概述">#</a> 网络层概述</h2><h3 id="网络层职责"><a class="anchor" href="#网络层职责">#</a> 网络层职责</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_003.jpg" alt="第4讲：网络层原理与技术20200416_页面_003"></p><ol><li>通过网络移动数据：不同网段之间的通信，不同的广播域，两个广播域之间的进行了划分，互不干扰</li><li>使用分层寻址方案 (与 MAC 寻址相反，后者没有层次)</li><li>细分网络并控制流量</li><li>减少交通拥堵，基于 IP 做分段和传达，用来减少拥塞</li><li>与其他网络通讯</li></ol><h3 id="网络层设备"><a class="anchor" href="#网络层设备">#</a> 网络层设备</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_004.jpg" alt="第4讲：网络层原理与技术20200416_页面_004"></p><ol><li>路由器<ol><li>互连网段或网络 (不同网段的分割)</li><li>根据 IP 地址做出合理的决定</li><li>确定最佳路径，根据路由表。</li><li>将数据包从入站端口切换到出站端口</li></ol></li><li>如果 A 网段的设备向路由器发送了一个 B 网段的广播地址，那么路由器会进行转发，然而如果 A 网段设备发送的是本网段的广播地址，路由器则不会进行转发。(广播域划分)</li></ol><h2 id="ip地址和子网划分"><a class="anchor" href="#ip地址和子网划分">#</a> IP 地址和子网划分</h2><h3 id="第三层数据报格式"><a class="anchor" href="#第三层数据报格式">#</a> 第三层数据报格式</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_006.jpg" alt="第4讲：网络层原理与技术20200416_页面_006"></p><h3 id="报文详解"><a class="anchor" href="#报文详解">#</a> 报文详解</h3><h4 id="首部"><a class="anchor" href="#首部">#</a> 首部</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_007.jpg" alt="第4讲：网络层原理与技术20200416_页面_007"></p><h4 id="首部部分"><a class="anchor" href="#首部部分">#</a> 首部部分</h4><p>上面蓝框部分的整体是首部部分，包括固定部分和可变部分</p><h4 id="版本号"><a class="anchor" href="#版本号">#</a> 版本号</h4><p>占 4 bit，指 IP 协议的版本。</p><p>目前的 IP 协议版本号为 4 (即 IPv4)(6 也就对应 IPv6)</p><h4 id="首部长度"><a class="anchor" href="#首部长度">#</a> 首部长度</h4><p>占 4 bit，可表示的最大数值是 15 个单位 (一个单位为 4 字节) 因此 IP 的首部长度的最大值是 60 字节。</p><p>一行是 5 个字节，固定部分有 20 个字节，可变部分最多有 40 个字节。</p><h4 id="服务类型"><a class="anchor" href="#服务类型">#</a> 服务类型</h4><p>占 8bit，用来获得更好的服务，这个字段以前一直没有被人们使用。</p><h4 id="总长度"><a class="anchor" href="#总长度">#</a> 总长度</h4><p>占 16 bit，指<strong>首部和数据</strong>之和的长度，单位为字节，因此数据报的最大长度为 65535 字节 (由于放到帧里面，所以大多数不比 1500 字节长)。总长度必须不超过最大传送单元 MTU。</p><h4 id="标识"><a class="anchor" href="#标识">#</a> 标识</h4><p>标识 (identification)：占 16 bit，它是一个计数器，用来产生数据报的标识。</p><p>解决<strong>报文分片</strong>的问题。相同的标识可以合并成一个大报文。</p><h4 id="标志"><a class="anchor" href="#标志">#</a> 标志</h4><p>标志占 3 bit，最高位为 0</p><ol><li>让发送方对报文进行控制，让中间路由器对其进行控制</li><li>DF (Don’t fragment)：是否允许做分片，0 允许做分片，1 不允许做分片</li><li>MF (More Fragment)：MF 为 0 表示最后一个分片，1 是指后面还有分片</li></ol><h4 id="片偏移"><a class="anchor" href="#片偏移">#</a> 片偏移</h4><p>片偏移 (13 bit) 指出：较长的分组在分片后某片在原分组中的相对位置。片偏移以<strong> 8 个字节</strong>为偏移单位。</p><ol><li>相同标识号，然后根据片偏移进行重排</li><li>因为 16-3 = 13，2^3 = 8 (因为单位是字节，所以用 13 位就可以补齐)</li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230102115026718.png" alt="image-20230102115026718"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_017.jpg" alt="第4讲：网络层原理与技术20200416_页面_017"></p><h4 id="生存时间"><a class="anchor" href="#生存时间">#</a> 生存时间</h4><p>生存时间 (8 bit) 记为 TTL (Time To Live) 数据报在网络中可通过的<strong>路由器数</strong>的最大值。</p><p>是通过计数的方式来进行统计，最大值是<strong> 255</strong> (最多经过 255 个路由器)，路由器每转发一次，就会对生存时间 - 1，减小为 0 后，就会丢弃掉，并且通知给发送方我已经丢弃掉这个报文。</p><p>防止在环上进行传输，避免由于回路问题，造成过大的网络资源浪费</p><h4 id="协议"><a class="anchor" href="#协议">#</a> 协议</h4><p>协议 (8 bit) 字段指出此数据报携带的数据使用何种协议以便目的主机的 IP 层将数据部分上交给哪个处理过程</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_020.jpg" alt="第4讲：网络层原理与技术20200416_页面_020"></p><p>有的协议是上层的，有的协议是第三层协议，具体协议的情况如上</p><h4 id="首部检验和"><a class="anchor" href="#首部检验和">#</a> 首部检验和</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_022.jpg" alt="第4讲：网络层原理与技术20200416_页面_022"></p><p>首部检验和 (16 bit) 字段：只检验数据报的首部，不包括数据部分。这里不采用 CRC 检验码而采用简单的计算方法。</p><p>一般不用，一是只检验首部，不检验数据；二是消耗性能</p><h4 id="源地址和目的地址"><a class="anchor" href="#源地址和目的地址">#</a> 源地址和目的地址</h4><p>各占 4 个字节</p><h3 id="网络层地址"><a class="anchor" href="#网络层地址">#</a> 网络层地址</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_024.jpg" alt="第4讲：网络层原理与技术20200416_页面_024"></p><ol><li><p>IP 地址为 32 位长 (Ipv4 中)</p></li><li><p>它们以点分十进制格式表示为四个八位字节：133.14.17.0</p></li><li><p>IP 地址包含两个组成部分：</p><ul><li><p>网络 ID</p></li><li><p>主机 ID</p></li></ul></li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_025.jpg" alt="第4讲：网络层原理与技术20200416_页面_025"></p><h4 id="网络地址用来标识网段"><a class="anchor" href="#网络地址用来标识网段">#</a> 网络地址：用来标识网段</h4><p>一个网络中，共享一个网络地址</p><ol><li>原来由 ARIN (美国互联网号码注册机构，<span class="exturl" data-url="aHR0cDovL3d3dy5hcmluLm5ldA==">www.arin.net</span>) 分配，现在已经更换</li><li>标识设备所连接 (attached) 的网络</li><li>可以由前三个八位位组 (octets) 中的一个，两个或三个来标识</li></ol><h4 id="主机idip地址后面占据1-3个字节"><a class="anchor" href="#主机idip地址后面占据1-3个字节">#</a> 主机 ID：IP 地址后面占据 1-3 个字节</h4><ol><li>由网络管理员分配</li><li>识别该网络上的特定设备</li><li>可以由最后三个八位位组中的一个，两个或三个来标识</li></ol><h3 id="ip地址"><a class="anchor" href="#ip地址">#</a> IP 地址</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_026.jpg" alt="第4讲：网络层原理与技术20200416_页面_026"></p><p>不同的类地址为地址的网络部分和主机部分保留不同数量的位</p><h4 id="分类"><a class="anchor" href="#分类">#</a> 分类</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_027.jpg" alt="第4讲：网络层原理与技术20200416_页面_027"></p><p><strong>A 类第一位必为 0，B 开头为 10，C 为 110</strong></p><p>根据第一个地址的数值确定是哪类地址</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_028.jpg" alt="第4讲：网络层原理与技术20200416_页面_028"></p><ol><li><p>每个类别的最大主机数量各不相同。(不包含网络号)</p><ul><li><p>A 类拥有 16,777,214 个可用主机 (2<sup>24</sup> – 2)</p></li><li><p>Class B has 65,534 available hosts (2<sup>16</sup> – 2) B 类具有 65,534 个可用主机 (2<sup>16</sup> – 2)</p></li><li><p>Class C has 254 available hosts (2<sup>8</sup> – 2) C 类具有 254 个可用主机 (2<sup>8</sup> –2)</p></li></ul></li><li><p>为什么每一类地址中都要减去 2？</p><ul><li><p>每个网络中的第一个地址都保留用于该网络地址</p></li><li><p>最后一个地址是为广播地址保留的。</p></li></ul></li></ol><h4 id="保留地址"><a class="anchor" href="#保留地址">#</a> 保留地址</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_029.jpg" alt="第4讲：网络层原理与技术20200416_页面_029"></p><p>网络地址：在地址的主机部分中以二进制 0 结尾的 IP 地址</p><ol><li>A 类网络地址示例：113.0.0.0</li><li>网络上的主机只有具有相同网络 ID 的其他主机才能直接通信。(用来确定是不是在一个网段里面)</li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_030.jpg" alt="第4讲：网络层原理与技术20200416_页面_030"></p><p>广播地址：用于将数据发送到网络上的所有设备。(一般是一个网段之间的)</p><ol><li>广播 IP 地址在地址的主机部分中以二进制 1 结尾。</li><li>B 类地址的广播地址的示例：176.10.255.255 (decimal 255 = binary 11111111)</li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_031.jpg" alt="第4讲：网络层原理与技术20200416_页面_031"></p><p>例子</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_032.jpg" alt="第4讲：网络层原理与技术20200416_页面_032"></p><p>用于局域网内部使用</p><p>IP 地址耗尽（IP address delpetion）</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/image-20230102123731364.png" alt="image-20230102123731364"></p><h3 id="子网划分"><a class="anchor" href="#子网划分">#</a> 子网划分</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_033.jpg" alt="第4讲：网络层原理与技术20200416_页面_033"></p><p>网络管理员有时需要将网络划分为较小的网络，称为<strong>子网</strong>，以提供<strong>额外的灵活性</strong>.</p><p>从主机字段借来的位被指定为子网字段 (Subnet Fields)</p><h4 id="子网的基本概念"><a class="anchor" href="#子网的基本概念">#</a> 子网的基本概念</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_034.jpg" alt="第4讲：网络层原理与技术20200416_页面_034"></p><ol><li>子网是网络的较小部分<ul><li>提供寻址灵活性</li></ul></li><li>子网地址通常由网络管理员在本地分配</li><li>子网减少了广播域：使得广播域变小，提高网络利用率，避免接受到大量的无用的广播，广播只能在对应子网中进行广播。</li></ol><h4 id="我们可以借多少位"><a class="anchor" href="#我们可以借多少位">#</a> 我们可以借多少位？</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_035.jpg" alt="第4讲：网络层原理与技术20200416_页面_035"></p><p>最少借 2 位</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_036.jpg" alt="第4讲：网络层原理与技术20200416_页面_036"></p><ol><li><p>借用的最小位数是 2，为什么？</p><p>I 如果只借用 1 位以创建一个子网，那么您将只有一个网络号 -.0 网络 - 和广播号 -.1 网络，没有可以使用的专用网络。</p><p>两位的时候，01 和 10 给 Host，00 给网络 ID，11 位广播地址</p></li><li><p>可以借用的最大位数可以是保留至少 2 位主机号的任何数字 (给 Host 至少保留 2 位，因为 1 位的话，要么一个是 NET 无法使用，要么一个是广播地址)</p></li></ol><h4 id="副作用浪费地址"><a class="anchor" href="#副作用浪费地址">#</a> 副作用：浪费地址</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_037.jpg" alt="第4讲：网络层原理与技术20200416_页面_037"></p><p>我们必须在所需的子网数，每个子网可接受的主机以及地址的浪费之间取得平衡 (strike a balance)。</p><h4 id="子网掩码"><a class="anchor" href="#子网掩码">#</a> 子网掩码</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_038.jpg" alt="第4讲：网络层原理与技术20200416_页面_038"></p><p>别名：扩展网络前缀</p><p>定义我们用来构建网络的位数，以及描述主机地址的位数</p><h4 id="计算一个子网"><a class="anchor" href="#计算一个子网">#</a> 计算一个子网</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_039.jpg" alt="第4讲：网络层原理与技术20200416_页面_039"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_040.jpg" alt="第4讲：网络层原理与技术20200416_页面_040"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_041.jpg" alt="第4讲：网络层原理与技术20200416_页面_041"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_042.jpg" alt="第4讲：网络层原理与技术20200416_页面_042"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_043.jpg" alt="第4讲：网络层原理与技术20200416_页面_043"><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_044.jpg" alt="第4讲：网络层原理与技术20200416_页面_044"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_045.jpg" alt="第4讲：网络层原理与技术20200416_页面_045"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_046.jpg" alt="第4讲：网络层原理与技术20200416_页面_046"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_047.jpg" alt="第4讲：网络层原理与技术20200416_页面_047"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_048.jpg" alt="第4讲：网络层原理与技术20200416_页面_048"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_049.jpg" alt="第4讲：网络层原理与技术20200416_页面_049"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_050.jpg" alt="第4讲：网络层原理与技术20200416_页面_050"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_051.jpg" alt="第4讲：网络层原理与技术20200416_页面_051"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_052.jpg" alt="第4讲：网络层原理与技术20200416_页面_052"></p><p>路由器需要做一个与运算，交换机不用</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_053.jpg" alt="第4讲：网络层原理与技术20200416_页面_053"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_054.jpg" alt="第4讲：网络层原理与技术20200416_页面_054"></p><h2 id="第三层设备路由器"><a class="anchor" href="#第三层设备路由器">#</a> 第三层设备 —— 路由器</h2><h3 id="路径选择"><a class="anchor" href="#路径选择">#</a> 路径选择</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_056.jpg" alt="第4讲：网络层原理与技术20200416_页面_056"></p><p>路由器选择下一路径，根据带宽、跳数、延迟等</p><h3 id="ip地址-2"><a class="anchor" href="#ip地址-2">#</a> IP 地址</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_057.jpg" alt="第4讲：网络层原理与技术20200416_页面_057"></p><ol><li>IP 地址是用软件实现的，是指设备所在的网络。</li><li>路由器连接网络，每个网络必须具有<strong>唯一的网络号</strong>才能成功进行寻找路径。</li><li>唯一的网络号包含在分配 (incorporated) 给该网络上每个设备的 IP 地址中</li><li>IP 地址是逻辑的，是我们配置的。(不同于 MAC 地址)</li><li>IP 地址是有层次，做转发的依据是网段而不是具体的 IP，同一网段设备都有相同的 IP 地址，也就是我们只要到达网段即可</li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_058.jpg" alt="第4讲：网络层原理与技术20200416_页面_058"></p><p>路由器每个端口需要配一个地址，和所连接的网段是同一个信息的</p><h3 id="路由器转发实例"><a class="anchor" href="#路由器转发实例">#</a> 路由器转发实例</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_059.jpg" alt="第4讲：网络层原理与技术20200416_页面_059"></p><p>A5 发到 B5</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_060.jpg" alt="第4讲：网络层原理与技术20200416_页面_060"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_061.jpg" alt="第4讲：网络层原理与技术20200416_页面_061"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_062.jpg" alt="第4讲：网络层原理与技术20200416_页面_062"></p><p>查询路由表</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_063.jpg" alt="第4讲：网络层原理与技术20200416_页面_063"></p><p>形成一个新的帧，MAC 地址是 B1 的</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_064.jpg" alt="第4讲：网络层原理与技术20200416_页面_064"></p><ol><li><p>接口是路由器连接到网络的附加装置，在 IP 路由中也可以称为端口。这个 IP 地址往往被作为这个网络的网关</p></li><li><p>每个接口必须具有一个单独的唯一网络地址。</p><p>比如上图中 S1 和 S2 不能是相同的 IP 地址，否则会发生歧义，S0 不知道转发给谁，路由器的连接的网段一定要是不同的</p></li></ol><h3 id="ip地址分配"><a class="anchor" href="#ip地址分配">#</a> IP 地址分配</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_065.jpg" alt="第4讲：网络层原理与技术20200416_页面_065"></p><ol><li><p>静态地址分配 (Static addressing)</p><ol><li>为每个单独的设备配置一个 IP 地址</li><li>您应该保留非常细致的记录，因为如果使用重复的 IP 地址，可能会出现问题。</li></ol></li><li><p>动态地址分配 (Dynamic addressing)</p><p>有几种不同的方法可用于动态分配 IP 地址：</p><ul><li>RARP: Reverse Address Resolution Protocol. RARP：反向地址解析协议。发起请求</li><li>BOOTP: BOOTstrap Protocol. BOOTP：BOOTstrap 协议。用于工作栈</li><li>DHCP: Dynamic Host Configuration Protocol. (<strong>比较多用</strong>) DHCP：动态主机配置协议</li></ul></li></ol><h2 id="arp-协议"><a class="anchor" href="#arp-协议">#</a> ARP 协议</h2><p>Address Resolution Protocol 地址解析协议</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_067.jpg" alt="第4讲：网络层原理与技术20200416_页面_067"></p><ol><li>为了使设备进行通信，发送设备需要目标设备的<strong> IP 地址和 MAC 地址</strong>。</li><li>ARP 使计算机能够查找与 IP 地址关联的计算机的 MAC 地址。</li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_068.jpg" alt="第4讲：网络层原理与技术20200416_页面_068"></p><ol><li>目的方 IP 地址 -&gt; 目的方 MAC 地址</li><li>需要知道对方的 MAC 地址，来形成数据地址。</li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_069.jpg" alt="第4讲：网络层原理与技术20200416_页面_069"></p><p>ARP Table</p><p>ARP 缓存</p><h3 id="arp操作mac地址解析"><a class="anchor" href="#arp操作mac地址解析">#</a> ARP 操作，MAC 地址解析</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_070.jpg" alt="第4讲：网络层原理与技术20200416_页面_070"></p><p>此时目的地 MAC 地址不知道</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_071.jpg" alt="第4讲：网络层原理与技术20200416_页面_071"></p><p>向目的地地址请求，发出广播</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_072.jpg" alt="第4讲：网络层原理与技术20200416_页面_072"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_073.jpg" alt="第4讲：网络层原理与技术20200416_页面_073"></p><p>C 回应</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_074.jpg" alt="第4讲：网络层原理与技术20200416_页面_074"></p><p>写入 ARP 缓存，发送正常的帧</p><h3 id="目的地本地"><a class="anchor" href="#目的地本地">#</a> 目的地本地</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_075.jpg" alt="第4讲：网络层原理与技术20200416_页面_075"></p><h3 id="网络交流"><a class="anchor" href="#网络交流">#</a> 网络交流</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_076.jpg" alt="第4讲：网络层原理与技术20200416_页面_076"></p><h4 id="默认网关"><a class="anchor" href="#默认网关">#</a> 默认网关</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_077.jpg" alt="第4讲：网络层原理与技术20200416_页面_077"></p><ol><li>为了使设备与另一网络上的另一设备通信，您必须为其<strong>提供默认网关</strong>。</li><li><strong>默认网关是路由器上连接到源主机所在网段的接口的 IP 地址。</strong></li><li>为了使设备将数据发送到另一个网段上的设备的地址，源设备将数据<strong>发送到默认网关</strong>。</li></ol><h4 id="代理"><a class="anchor" href="#代理">#</a> 代理</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_078.jpg" alt="第4讲：网络层原理与技术20200416_页面_078"></p><p>无法设置默认网关的情况</p><ol><li>代理 ARP 是 ARP 的一种变体 (variation)。</li><li>如果源主机未配置默认网关。</li></ol><h3 id="目的地址不是本地"><a class="anchor" href="#目的地址不是本地">#</a> 目的地址不是本地</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_079.jpg" alt="第4讲：网络层原理与技术20200416_页面_079"></p><p>路由器把自己的 MAC 地址给 Host Y</p><h3 id="arp流程图"><a class="anchor" href="#arp流程图">#</a> ARP 流程图</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_080.jpg" alt="第4讲：网络层原理与技术20200416_页面_080"></p><h2 id="网络层服务"><a class="anchor" href="#网络层服务">#</a> 网络层服务</h2><h3 id="面向连接的网络服务"><a class="anchor" href="#面向连接的网络服务">#</a> 面向连接的网络服务</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_082.jpg" alt="第4讲：网络层原理与技术20200416_页面_082"></p><ol><li><p>面向连接的网络服务 —— 在数据传输之前，在传输方和接收方之间建立连接</p><ul><li><p>就是任何发送数据的行为之前，先要建立好连接，协商好参数才会开始传输，所有数据进行有序传输</p></li><li><p>网络情况导致数据出现问题，需要接受方进行一定处理来保证数据正确</p></li></ul></li><li><p>传输过程中要保持连接距离，只有完成传输后才能断开连接。</p></li><li><p>传输比较可靠，代价高。</p></li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_083.jpg" alt="第4讲：网络层原理与技术20200416_页面_083"></p><ol><li><p>（虚）电路交换 vs 面向连接的网络服务</p><p>但是，两个名词并不一样。</p></li><li><p>面向连接：在数据传输之前，与接收方建立一个连接</p></li><li><p>所有 packet（报文）在同一条道路上依次传输，更普遍的，是在同一条虚电路上</p></li></ol><p>虚电路要强于面向连接的，传输更加可靠，保证<strong>传输先后关系</strong>。</p><h3 id="无连接的网络服务"><a class="anchor" href="#无连接的网络服务">#</a> 无连接的网络服务</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_084.jpg" alt="第4讲：网络层原理与技术20200416_页面_084"></p><p>他们分别对待每个数据包。</p><p>IP 是<strong>无连接系统</strong>。</p><h3 id="报文交换"><a class="anchor" href="#报文交换">#</a> 报文交换</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_085.jpg" alt="第4讲：网络层原理与技术20200416_页面_085"></p><ol><li>无连接网络与数据包交换：这两个词都不一样</li><li>当数据包从源传递到目标时，它们可以：<ol><li>切换到其他路径。(每一报文有各自的发送方和接收方，可以根据当前的网络情况，进行路由选择)</li><li>乱序到达。</li></ol></li><li>设备根据<strong>各种标准</strong>为每个数据包<strong>进行路径选择</strong>。不同的报文可能有不同的标准。</li></ol><p>大部分的 Connetionless network 都是基于 packet switched 进行实现，控制网络拥塞。</p><h2 id="路由协议"><a class="anchor" href="#路由协议">#</a> 路由协议</h2><h3 id="网络协议操作"><a class="anchor" href="#网络协议操作">#</a> 网络协议操作</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_087.jpg" alt="第4讲：网络层原理与技术20200416_页面_087"></p><p>ABC 之间都是通过帧进行计算的，直到第三层。</p><h3 id="被动路由协议"><a class="anchor" href="#被动路由协议">#</a> 被动路由协议</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_088.jpg" alt="第4讲：网络层原理与技术20200416_页面_088"></p><ol><li>为网络层提供支持的协议称为路由协议或可路由协议。</li><li>IP 是网络层协议，因此，它可以通过互联网络进行路由。</li></ol><h3 id="不可路由协议"><a class="anchor" href="#不可路由协议">#</a> 不可路由协议</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_089.jpg" alt="第4讲：网络层原理与技术20200416_页面_089"></p><ol><li><p>不可路由协议是不支持第 3 层的协议。</p></li><li><p>这些不可路由协议中最常见的是 NetBEUI。</p><ul><li><p>直接根据目的方的地址在局域网中进行生成定位</p></li><li><p>这个协议不支持第三层，也就是跨局域网是不可以的。</p></li></ul></li><li><p>NetBEUI 是一种小型，快速且高效的协议，仅限于在一个网段上运行</p></li></ol><h3 id="可路由协议的寻址"><a class="anchor" href="#可路由协议的寻址">#</a> 可路由协议的寻址</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_090.jpg" alt="第4讲：网络层原理与技术20200416_页面_090"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_091.jpg" alt="第4讲：网络层原理与技术20200416_页面_091"></p><h3 id="分类1静态vs动态"><a class="anchor" href="#分类1静态vs动态">#</a> 分类 1：静态 vs 动态</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_092.jpg" alt="第4讲：网络层原理与技术20200416_页面_092"></p><ol><li><p>静态路由：网络管理员在路由器中手动输入路由信息。</p></li><li><p>动态路由</p><ul><li><p>路由器可以在运行过程中互相学习信息。</p></li><li><p>使用路由协议更新路由信息。</p></li><li><p>RIP, IGRP, EIGRP, OSPF …</p></li></ul></li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_093.jpg" alt="第4讲：网络层原理与技术20200416_页面_093"></p><ol><li><p>静态路由</p><ol><li><p>用于<strong>隐藏</strong>部分网络。</p><p>安全 (不必进行路由表的交换)</p></li><li><p>测试网络中的特定链接。</p></li><li><p>在到达目标网络的路径只有一条通路时，维护路由表。</p></li></ol></li><li><p>动态路由</p><ol><li>维护路由表。</li><li>以路由更新的形式及时分发信息。</li><li>依靠路由协议共享知识。</li><li>路由器可以调整以适应不断变化的网络状况。</li><li>打开后会启动<strong>进程</strong>，按照不同的协议，和网上的不同设备学习信息，然后根据<strong>算法</strong>生成路由表</li></ol></li></ol><h3 id="主动路由协议"><a class="anchor" href="#主动路由协议">#</a> 主动路由协议</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_094.jpg" alt="第4讲：网络层原理与技术20200416_页面_094"></p><h3 id="被动路由协议和主动路由协议"><a class="anchor" href="#被动路由协议和主动路由协议">#</a> 被动路由协议和主动路由协议</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_095.jpg" alt="第4讲：网络层原理与技术20200416_页面_095"></p><ol><li>Routed Portocol 用于路由器之间，用来保证路由器之间连通 (完成转发)。</li><li>Routing Protocol 用于做各自的路由表的生成：路由器彼此交换信息。</li><li>Routing Protocol 决定 Routed Protocals</li></ol><h3 id="分类2igp-vs-egp"><a class="anchor" href="#分类2igp-vs-egp">#</a> 分类 2：IGP VS EGP</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_096.jpg" alt="第4讲：网络层原理与技术20200416_页面_096"></p><ol><li><p>动态路由</p></li><li><p>内部网关协议 Interior Gateway Protocols</p><p>RIP，IGRP，EIGRP，OSPF</p><p>可在自治系统 (autonomous system，大的单位或者管理方) 中使用，该系统是一个主管部门下的路由器网络，例如公司 (corporate) 网络，学区的网络或政府机构的网络。</p></li><li><p>外部网关协议 Exterior Gateway Protocols</p><p>EGP，BGP</p><p>用于在自治系统之间路由数据包。</p></li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_097.jpg" alt="第4讲：网络层原理与技术20200416_页面_097"></p><p>自治系统是<strong>逻辑</strong>的划分，而未必是物理层次的划分。</p><h3 id="分类3igp分为两类dvp-vs-lsp"><a class="anchor" href="#分类3igp分为两类dvp-vs-lsp">#</a> 分类 3：IGP 分为两类：DVP VS LSP</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_098.jpg" alt="第4讲：网络层原理与技术20200416_页面_098"></p><p><strong>DVP</strong></p><p>距离矢量协议 Distance-Vector Protocols</p><p>RIP, IGRP</p><ol><li>从<strong>邻居</strong>的角度查看网络拓扑。(注意不基于全局)</li><li>在路由器之间添加距离向量。(根据跳数来决定，经过一个路由器 + 1 一次)</li><li>经常定期 (periodic) 更新。（<strong>定时</strong>）</li><li>将路由表的<strong>副本</strong>传递到邻居路由器。</li></ol><p><strong>LVP</strong></p><p>链路状态协议 Link State Protocols</p><p>OSPF</p><ol><li>获取<strong>全局</strong>网络拓扑的通用视图。</li><li>计算到其他路由器的<strong>最短路径</strong>。(基于带宽计算出来的 cost，形成 cost 拓扑图，然后计算出对应的路径代价作为评判依据)</li><li><strong>事件</strong>触发的更新。</li><li>将链接状态路由更新传递给其他路由器</li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_099.jpg" alt="第4讲：网络层原理与技术20200416_页面_099"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_100.jpg" alt="第4讲：网络层原理与技术20200416_页面_100"></p><p>Link State</p><p>用 SPF 算法</p><h3 id="rip路由信息协议dvp"><a class="anchor" href="#rip路由信息协议dvp">#</a> RIP 路由信息协议（DVP）</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_101.jpg" alt="第4讲：网络层原理与技术20200416_页面_101"></p><ol><li>很受欢迎</li><li>内部网关协议</li><li>距离矢量协议</li><li>基于跳数</li><li>最远可达跳数 15</li><li>每 30 秒更新</li><li>不选择最快路径（选择跳数最短的路径）</li><li>产生很多网络流量（network traffic)</li><li>v2 是 v1 的一个进阶版本</li></ol><h3 id="igrp-vs-eigrpdvp"><a class="anchor" href="#igrp-vs-eigrpdvp">#</a> IGRP vs EIGRP(DVP)</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_102.jpg" alt="第4讲：网络层原理与技术20200416_页面_102"></p><ol><li>思科知识产权的。</li><li>内部网关协议。</li><li>距离矢量协议</li><li>指标由 ** 带宽 (bandwidth)，负载 (load)，延迟 (delay) 和可靠性 (reliability)** 组成。加权进行运算。</li><li>IGRP 最大跳数为 255。</li><li>每 90 秒更新一次。</li><li>EIGRP 是 IGRP 的高级版本，它是<strong>混合</strong>路由协议 (不全是根据跳数来计算)。</li></ol><p>比 RIP 性能好很多</p><h3 id="ospflvp"><a class="anchor" href="#ospflvp">#</a> OSPF（LVP）</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_103.jpg" alt="第4讲：网络层原理与技术20200416_页面_103"></p><ol><li>最短路径优先协议</li><li>内部网关协议</li><li>链路状态协议，消耗内存和 CPU</li><li>指标由带宽，速度，流量，可靠性和安全性组成，本科阶段只考虑带宽的。</li><li>事件触发的更新。</li><li>最快和什么有关？(最快指的是带宽)<ol><li>和实时各条链路上的通信冗余有关，也和管理方案有关，简单来说是和带宽有关</li><li>带宽表示为代价，带宽和代价成<strong>反比</strong>。</li></ol></li></ol><h2 id="vlsmvariable-length-subnet-mask-可变长度子网掩码"><a class="anchor" href="#vlsmvariable-length-subnet-mask-可变长度子网掩码">#</a> VLSM (Variable Length Subnet Mask) 可变长度子网掩码</h2><h3 id="经典路由和可变长度子网掩码"><a class="anchor" href="#经典路由和可变长度子网掩码">#</a> 经典路由和可变长度子网掩码</h3><p><img data-src="C:/docu/%E5%A4%A7%E4%BA%8C%E4%B8%8A/cxy/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/%E8%AF%BE%E7%A8%8BPPT/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_105.jpg" alt="第4讲：网络层原理与技术20200416_页面_105"></p><ul><li><p>有类路由</p><p>有类的路由协议要求单个网络使用相同的子网掩码。</p><p>例如：网络 192.168.187.0 必须仅使用一个子网掩码，例如 255.255.255.0。</p></li><li><p>可变长度子网掩码</p><p>VLSM 只是一个特征，它允许单个自治系统的网络具有不同的子网掩码。</p><p>可有效解决网络号浪费的问题</p></li></ul><p><img data-src="C:/docu/%E5%A4%A7%E4%BA%8C%E4%B8%8A/cxy/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/%E8%AF%BE%E7%A8%8BPPT/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_106.jpg" alt="第4讲：网络层原理与技术20200416_页面_106"></p><ol><li>使用 VLSM，网络管理员可以在主机少的网络上使用长掩码，而在主机多的子网上使用短掩码。(提供了很高的灵活性)</li><li>如果路由协议允许 VLSM<ol><li>在路由网络连接上使用 30 位子网掩码 255.255.255.252（两个路由器相连）</li><li>用户网络的 24 位掩码 255.255.255.0</li><li>或者，对于最多 1000 个用户的网络，甚至是 22 位掩码 255.255.252.0。(保留 10 位)</li></ol></li><li>在 CIDR 的基础上发展的，报文中包含有子网掩码。</li></ol><h3 id="为什么使用vlsm"><a class="anchor" href="#为什么使用vlsm">#</a> 为什么使用 VLSM</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_107.jpg" alt="第4讲：网络层原理与技术20200416_页面_107"></p><ol><li>VLSM 允许组织在同一网络地址空间内使用多个子网掩码。</li><li>实施 VLSM 通常被称为 &quot;子网划分&quot;，可用于最大化寻址效率。</li><li>VLSM 是有助于缩小 IPv4 和 IPv6 之间差距的修改 (modifications) 之一。</li></ol><h3 id="vlsm的优缺点"><a class="anchor" href="#vlsm的优缺点">#</a> VLSM 的优缺点</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_108.jpg" alt="第4讲：网络层原理与技术20200416_页面_108"></p><ol><li>高效使用 IP 地址</li><li>更好的路由聚合 (aggregation): 构建超网</li></ol><p>很多协议都支持 VLSM 协议，只有 RIP v1 不支持</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_109.jpg" alt="第4讲：网络层原理与技术20200416_页面_109"></p><p>会导致地址空间的浪费：广播地址和网络号都无法被使用。</p><ol><li>过去，建议不要使用第一个和最后一个子网。但是我们可以使用 Cisco IOS ver12.0 中的子网 0。</li><li>从 IOS ver12.0 起，Cisco 路由器默认使用零子网。</li><li>如果想要禁止零子网，使用该指令: <code>router(config)#no ip subnet-zero()</code></li></ol><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_110.jpg" alt="第4讲：网络层原理与技术20200416_页面_110"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_111.jpg" alt="第4讲：网络层原理与技术20200416_页面_111"></p><p>路由器之间不需要那么多地址，可以进行优化</p><h3 id="例子"><a class="anchor" href="#例子">#</a> 例子</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_112.jpg" alt="第4讲：网络层原理与技术20200416_页面_112"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_113.jpg" alt="第4讲：网络层原理与技术20200416_页面_113"></p><p>为了计算 VLSM 子网，各个主机首先从地址范围分配最大的需求。需求级别应从<strong>最大到最小</strong>列出。</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_114.jpg" alt="第4讲：网络层原理与技术20200416_页面_114"></p><p>Octet 八位字节</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_115.jpg" alt="第4讲：网络层原理与技术20200416_页面_115"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_116.jpg" alt="第4讲：网络层原理与技术20200416_页面_116"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_117.jpg" alt="第4讲：网络层原理与技术20200416_页面_117"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_118.jpg" alt="第4讲：网络层原理与技术20200416_页面_118"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_119.jpg" alt="第4讲：网络层原理与技术20200416_页面_119"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_120.jpg" alt="第4讲：网络层原理与技术20200416_页面_120"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_121.jpg" alt="第4讲：网络层原理与技术20200416_页面_121"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_122.jpg" alt="第4讲：网络层原理与技术20200416_页面_122"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_123.jpg" alt="第4讲：网络层原理与技术20200416_页面_123"></p><p>没被用过的子网才能进一步划分</p><h3 id="路由聚集"><a class="anchor" href="#路由聚集">#</a> 路由聚集</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_124.jpg" alt="第4讲：网络层原理与技术20200416_页面_124"></p><p>Classless InterDomain Routing (CIDR) 无类域间路由</p><p>将 3 个 / 24 的子网合并成一个 / 16 的网络</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_125.jpg" alt="第4讲：网络层原理与技术20200416_页面_125"></p><p>多层聚集</p><h4 id="如何计算路由聚集"><a class="anchor" href="#如何计算路由聚集">#</a> 如何计算路由聚集</h4><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_126.jpg" alt="第4讲：网络层原理与技术20200416_页面_126"></p><p>提取尽可能多的相同的位作为 net 位，其他作为 host 位</p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_127.jpg" alt="第4讲：网络层原理与技术20200416_页面_127"></p><ul><li><p>减少路由表条目的数量。</p></li><li><p>可用于隔离拓扑更改</p></li></ul><h2 id="icmp"><a class="anchor" href="#icmp">#</a> ICMP</h2><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_129.jpg" alt="第4讲：网络层原理与技术20200416_页面_129"></p><p>Internet Control Message Protocol 因特网控制报文协议</p><h3 id="icmp报文格式"><a class="anchor" href="#icmp报文格式">#</a> ICMP 报文格式</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_130.jpg" alt="第4讲：网络层原理与技术20200416_页面_130"></p><h3 id="两种icmp报文"><a class="anchor" href="#两种icmp报文">#</a> 两种 ICMP 报文</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_131.jpg" alt="第4讲：网络层原理与技术20200416_页面_131"></p><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_132.jpg" alt="第4讲：网络层原理与技术20200416_页面_132"></p><h3 id="icmp差错报告报文的数据字段的内容"><a class="anchor" href="#icmp差错报告报文的数据字段的内容">#</a> ICMP 差错报告报文的数据字段的内容</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_133.jpg" alt="第4讲：网络层原理与技术20200416_页面_133"></p><h3 id="不应发送icmp差错报告报文的几种情况"><a class="anchor" href="#不应发送icmp差错报告报文的几种情况">#</a> 不应发送 ICMP 差错报告报文的几种情况</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_134.jpg" alt="第4讲：网络层原理与技术20200416_页面_134"></p><h3 id="ping"><a class="anchor" href="#ping">#</a> PING</h3><p><img data-src="https://quasdo.oss-cn-hangzhou.aliyuncs.com/img/%E7%AC%AC4%E8%AE%B2%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8E%9F%E7%90%86%E4%B8%8E%E6%8A%80%E6%9C%AF20200416_%E9%A1%B5%E9%9D%A2_135.jpg" alt="第4讲：网络层原理与技术20200416_页面_135"></p><p>PING Packet InterNet Groper</p><h2 id="一些其他"><a class="anchor" href="#一些其他">#</a> 一些其他</h2><p>基于 IP 地址，而不是 MAC 地址。</p><p>【IP 地址和 MAC 地址的区别】IP 地址是一个框架，有逻辑和层次。MAC 地址较为平坦（谁生产的商品）</p><p>G 0/0/0 模块 板子 接口</p><p>s 0/1/0 模块 板子 接口</p><p>802.3</p><p>The maximum size of the L-PDU for a 10Mbps network is 1500 bytes. Because 8 bytes are used within the L-PDU for the LLC header, this means that the maximum size of the data field is <strong>1492 bytes</strong>.</p><p>802.11</p><p>The frame body of the 802.11 packet can range from 0-<strong>2312 bytes</strong>.</p><p>Routed protocol</p><p>被动路由协议</p><p>基于路由表</p><p>Non-routable protobal</p><p>不基于路由表</p><p>多播地址</p><p>D 类地址，开头为 1110</p><p>多播地址范围为 224.0.0.0～239.255.255.255</p><div class="tags"><a href="/tags/%E8%AE%A1%E7%BD%91/" rel="tag"><i class="ic i-tag"></i> 计网</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-02-08 17:54:55" itemprop="dateModified" datetime="2023-02-08T17:54:55+08:00">2023-02-08</time> </span><span id="2023/02/08/internet-computer/Lecture04-网络层/" class="item leancloud_visitors" data-flag-title="Lecture04-网络层" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.jpg" alt="quas-modo 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.jpg" alt="quas-modo 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="quas-modo 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>quas-modo <i class="ic i-at"><em>@</em></i>Carpe diem</li><li class="link"><strong>本文链接：</strong> <a href="https://quas-modo.github.io/2023/02/08/internet-computer/Lecture04-%E7%BD%91%E7%BB%9C%E5%B1%82/" title="Lecture04-网络层">https://quas-modo.github.io/2023/02/08/internet-computer/Lecture04-网络层/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2023/02/08/internet-computer/Lecture03-%E9%93%BE%E8%B7%AF%E5%B1%82/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;quasdo.oss-cn-hangzhou.aliyuncs.com&#x2F;img&#x2F;wenjun-lin-asset (4).jpg" title="Lecture03-链路层"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 互联网计算</span><h3>Lecture03-链路层</h3></a></div><div class="item right"><a href="/2023/02/08/internet-computer/Lecture05-%E4%BC%A0%E8%BE%93%E5%B1%82/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;quasdo.oss-cn-hangzhou.aliyuncs.com&#x2F;img&#x2F;wenjun-lin-asset (3).jpg" title="Lecture05-传输层"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 互联网计算</span><h3>Lecture05-传输层</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#lecture04-%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">1.</span> <span class="toc-text">Lecture04 - 网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">网络层概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E8%81%8C%E8%B4%A3"><span class="toc-number">1.1.1.</span> <span class="toc-text">网络层职责</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E8%AE%BE%E5%A4%87"><span class="toc-number">1.1.2.</span> <span class="toc-text">网络层设备</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ip%E5%9C%B0%E5%9D%80%E5%92%8C%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86"><span class="toc-number">1.2.</span> <span class="toc-text">IP 地址和子网划分</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E5%B1%82%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.2.1.</span> <span class="toc-text">第三层数据报格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%A5%E6%96%87%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.2.2.</span> <span class="toc-text">报文详解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A6%96%E9%83%A8"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">首部</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A6%96%E9%83%A8%E9%83%A8%E5%88%86"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">首部部分</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%88%E6%9C%AC%E5%8F%B7"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">版本号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A6%96%E9%83%A8%E9%95%BF%E5%BA%A6"><span class="toc-number">1.2.2.4.</span> <span class="toc-text">首部长度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.2.2.5.</span> <span class="toc-text">服务类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E9%95%BF%E5%BA%A6"><span class="toc-number">1.2.2.6.</span> <span class="toc-text">总长度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%87%E8%AF%86"><span class="toc-number">1.2.2.7.</span> <span class="toc-text">标识</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%87%E5%BF%97"><span class="toc-number">1.2.2.8.</span> <span class="toc-text">标志</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%87%E5%81%8F%E7%A7%BB"><span class="toc-number">1.2.2.9.</span> <span class="toc-text">片偏移</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E5%AD%98%E6%97%B6%E9%97%B4"><span class="toc-number">1.2.2.10.</span> <span class="toc-text">生存时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.2.2.11.</span> <span class="toc-text">协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A6%96%E9%83%A8%E6%A3%80%E9%AA%8C%E5%92%8C"><span class="toc-number">1.2.2.12.</span> <span class="toc-text">首部检验和</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BA%90%E5%9C%B0%E5%9D%80%E5%92%8C%E7%9B%AE%E7%9A%84%E5%9C%B0%E5%9D%80"><span class="toc-number">1.2.2.13.</span> <span class="toc-text">源地址和目的地址</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E5%9C%B0%E5%9D%80"><span class="toc-number">1.2.3.</span> <span class="toc-text">网络层地址</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E7%94%A8%E6%9D%A5%E6%A0%87%E8%AF%86%E7%BD%91%E6%AE%B5"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">网络地址：用来标识网段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E6%9C%BAidip%E5%9C%B0%E5%9D%80%E5%90%8E%E9%9D%A2%E5%8D%A0%E6%8D%AE1-3%E4%B8%AA%E5%AD%97%E8%8A%82"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">主机 ID：IP 地址后面占据 1-3 个字节</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ip%E5%9C%B0%E5%9D%80"><span class="toc-number">1.2.4.</span> <span class="toc-text">IP 地址</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%B1%BB"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%9D%E7%95%99%E5%9C%B0%E5%9D%80"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">保留地址</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86"><span class="toc-number">1.2.5.</span> <span class="toc-text">子网划分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%90%E7%BD%91%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">子网的基本概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E5%80%9F%E5%A4%9A%E5%B0%91%E4%BD%8D"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">我们可以借多少位？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%AF%E4%BD%9C%E7%94%A8%E6%B5%AA%E8%B4%B9%E5%9C%B0%E5%9D%80"><span class="toc-number">1.2.5.3.</span> <span class="toc-text">副作用：浪费地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81"><span class="toc-number">1.2.5.4.</span> <span class="toc-text">子网掩码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E4%B8%80%E4%B8%AA%E5%AD%90%E7%BD%91"><span class="toc-number">1.2.5.5.</span> <span class="toc-text">计算一个子网</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E5%B1%82%E8%AE%BE%E5%A4%87%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="toc-number">1.3.</span> <span class="toc-text">第三层设备 —— 路由器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84%E9%80%89%E6%8B%A9"><span class="toc-number">1.3.1.</span> <span class="toc-text">路径选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ip%E5%9C%B0%E5%9D%80-2"><span class="toc-number">1.3.2.</span> <span class="toc-text">IP 地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E8%BD%AC%E5%8F%91%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.3.3.</span> <span class="toc-text">路由器转发实例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ip%E5%9C%B0%E5%9D%80%E5%88%86%E9%85%8D"><span class="toc-number">1.3.4.</span> <span class="toc-text">IP 地址分配</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#arp-%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.4.</span> <span class="toc-text">ARP 协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#arp%E6%93%8D%E4%BD%9Cmac%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90"><span class="toc-number">1.4.1.</span> <span class="toc-text">ARP 操作，MAC 地址解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E7%9A%84%E5%9C%B0%E6%9C%AC%E5%9C%B0"><span class="toc-number">1.4.2.</span> <span class="toc-text">目的地本地</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E4%BA%A4%E6%B5%81"><span class="toc-number">1.4.3.</span> <span class="toc-text">网络交流</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E7%BD%91%E5%85%B3"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">默认网关</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%90%86"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">代理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E7%9A%84%E5%9C%B0%E5%9D%80%E4%B8%8D%E6%98%AF%E6%9C%AC%E5%9C%B0"><span class="toc-number">1.4.4.</span> <span class="toc-text">目的地址不是本地</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#arp%E6%B5%81%E7%A8%8B%E5%9B%BE"><span class="toc-number">1.4.5.</span> <span class="toc-text">ARP 流程图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.5.</span> <span class="toc-text">网络层服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E8%BF%9E%E6%8E%A5%E7%9A%84%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.5.1.</span> <span class="toc-text">面向连接的网络服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A0%E8%BF%9E%E6%8E%A5%E7%9A%84%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.5.2.</span> <span class="toc-text">无连接的网络服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%A5%E6%96%87%E4%BA%A4%E6%8D%A2"><span class="toc-number">1.5.3.</span> <span class="toc-text">报文交换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.6.</span> <span class="toc-text">路由协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E6%93%8D%E4%BD%9C"><span class="toc-number">1.6.1.</span> <span class="toc-text">网络协议操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A2%AB%E5%8A%A8%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.6.2.</span> <span class="toc-text">被动路由协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E5%8F%AF%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.6.3.</span> <span class="toc-text">不可路由协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%AF%BB%E5%9D%80"><span class="toc-number">1.6.4.</span> <span class="toc-text">可路由协议的寻址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB1%E9%9D%99%E6%80%81vs%E5%8A%A8%E6%80%81"><span class="toc-number">1.6.5.</span> <span class="toc-text">分类 1：静态 vs 动态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E5%8A%A8%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.6.6.</span> <span class="toc-text">主动路由协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A2%AB%E5%8A%A8%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E5%92%8C%E4%B8%BB%E5%8A%A8%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.6.7.</span> <span class="toc-text">被动路由协议和主动路由协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB2igp-vs-egp"><span class="toc-number">1.6.8.</span> <span class="toc-text">分类 2：IGP VS EGP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB3igp%E5%88%86%E4%B8%BA%E4%B8%A4%E7%B1%BBdvp-vs-lsp"><span class="toc-number">1.6.9.</span> <span class="toc-text">分类 3：IGP 分为两类：DVP VS LSP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rip%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF%E5%8D%8F%E8%AE%AEdvp"><span class="toc-number">1.6.10.</span> <span class="toc-text">RIP 路由信息协议（DVP）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#igrp-vs-eigrpdvp"><span class="toc-number">1.6.11.</span> <span class="toc-text">IGRP vs EIGRP(DVP)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ospflvp"><span class="toc-number">1.6.12.</span> <span class="toc-text">OSPF（LVP）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vlsmvariable-length-subnet-mask-%E5%8F%AF%E5%8F%98%E9%95%BF%E5%BA%A6%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81"><span class="toc-number">1.7.</span> <span class="toc-text">VLSM (Variable Length Subnet Mask) 可变长度子网掩码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%8F%E5%85%B8%E8%B7%AF%E7%94%B1%E5%92%8C%E5%8F%AF%E5%8F%98%E9%95%BF%E5%BA%A6%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81"><span class="toc-number">1.7.1.</span> <span class="toc-text">经典路由和可变长度子网掩码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8vlsm"><span class="toc-number">1.7.2.</span> <span class="toc-text">为什么使用 VLSM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vlsm%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">1.7.3.</span> <span class="toc-text">VLSM 的优缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90"><span class="toc-number">1.7.4.</span> <span class="toc-text">例子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E8%81%9A%E9%9B%86"><span class="toc-number">1.7.5.</span> <span class="toc-text">路由聚集</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%AE%A1%E7%AE%97%E8%B7%AF%E7%94%B1%E8%81%9A%E9%9B%86"><span class="toc-number">1.7.5.1.</span> <span class="toc-text">如何计算路由聚集</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#icmp"><span class="toc-number">1.8.</span> <span class="toc-text">ICMP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#icmp%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.8.1.</span> <span class="toc-text">ICMP 报文格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A4%E7%A7%8Dicmp%E6%8A%A5%E6%96%87"><span class="toc-number">1.8.2.</span> <span class="toc-text">两种 ICMP 报文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#icmp%E5%B7%AE%E9%94%99%E6%8A%A5%E5%91%8A%E6%8A%A5%E6%96%87%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5%E7%9A%84%E5%86%85%E5%AE%B9"><span class="toc-number">1.8.3.</span> <span class="toc-text">ICMP 差错报告报文的数据字段的内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E5%BA%94%E5%8F%91%E9%80%81icmp%E5%B7%AE%E9%94%99%E6%8A%A5%E5%91%8A%E6%8A%A5%E6%96%87%E7%9A%84%E5%87%A0%E7%A7%8D%E6%83%85%E5%86%B5"><span class="toc-number">1.8.4.</span> <span class="toc-text">不应发送 ICMP 差错报告报文的几种情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ping"><span class="toc-number">1.8.5.</span> <span class="toc-text">PING</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E5%85%B6%E4%BB%96"><span class="toc-number">1.9.</span> <span class="toc-text">一些其他</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/2022/09/08/internet-computer/Lecture01-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0/" rel="bookmark" title="Lecture01-计算机网络概述">Lecture01-计算机网络概述</a></li><li><a href="/2022/10/07/internet-computer/Lecture02-%E7%89%A9%E7%90%86%E5%B1%82/" rel="bookmark" title="Lecture02-物理层">Lecture02-物理层</a></li><li><a href="/2023/02/08/internet-computer/Lecture03-%E9%93%BE%E8%B7%AF%E5%B1%82/" rel="bookmark" title="Lecture03-链路层">Lecture03-链路层</a></li><li class="active"><a href="/2023/02/08/internet-computer/Lecture04-%E7%BD%91%E7%BB%9C%E5%B1%82/" rel="bookmark" title="Lecture04-网络层">Lecture04-网络层</a></li><li><a href="/2023/02/08/internet-computer/Lecture05-%E4%BC%A0%E8%BE%93%E5%B1%82/" rel="bookmark" title="Lecture05-传输层">Lecture05-传输层</a></li><li><a href="/2023/02/08/internet-computer/Lecture06-%E4%BC%9A%E8%AF%9D%E3%80%81%E8%A1%A8%E7%A4%BA%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82/" rel="bookmark" title="Lecture06-会话、表示、应用层">Lecture06-会话、表示、应用层</a></li><li><a href="/2023/02/08/internet-computer/Lecture07-%E8%B7%AF%E7%94%B1%E5%99%A8/" rel="bookmark" title="Lecture07-路由器">Lecture07-路由器</a></li><li><a href="/2023/02/08/internet-computer/Lecture08-%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AERIPOSPF/" rel="bookmark" title="Lecture08-路由协议RIPOSPF">Lecture08-路由协议RIPOSPF</a></li><li><a href="/2023/02/08/internet-computer/Lecture09-%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E5%92%8Cvlan/" rel="bookmark" title="Lecture09-局域网交换和vlan">Lecture09-局域网交换和vlan</a></li><li><a href="/2023/02/08/internet-computer/Lecture10-%E5%B9%BF%E5%9F%9F%E7%BD%91/" rel="bookmark" title="Lecture10-广域网">Lecture10-广域网</a></li><li><a href="/2023/02/08/internet-computer/Lecture11-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" rel="bookmark" title="Lecture11-网络安全">Lecture11-网络安全</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="quas-modo" data-src="/images/avatar.jpg"><p class="name" itemprop="name">quas-modo</p><div class="description" itemprop="description">notes/thoughts/nonsense</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">66</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">17</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">12</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3F1YXMtbW9kbw==" title="https:&#x2F;&#x2F;github.com&#x2F;quas-modo"><i class="ic i-github"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>friends</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2023/02/08/internet-computer/Lecture03-%E9%93%BE%E8%B7%AF%E5%B1%82/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2023/02/08/internet-computer/Lecture05-%E4%BC%A0%E8%BE%93%E5%B1%82/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/categories/NJUSE/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="分类于 数据结构">数据结构</a></div><span><a href="/2022/12/01/dataStructure/Lecture04-1-%E7%89%B9%E6%AE%8A%E6%A0%91/" title="Lecture04.1-特殊树">Lecture04.1-特殊树</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/categories/NJUSE/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/" title="分类于 互联网计算">互联网计算</a></div><span><a href="/2023/02/08/internet-computer/Lecture03-%E9%93%BE%E8%B7%AF%E5%B1%82/" title="Lecture03-链路层">Lecture03-链路层</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/categories/NJUSE/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%8E%E8%AE%A1%E7%AE%97%E4%BA%8C/" title="分类于 软件工程与计算二">软件工程与计算二</a></div><span><a href="/2023/06/21/NJU/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%8E%E8%AE%A1%E7%AE%97%E4%BA%8C%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/" title="软件工程与计算二期末复习">软件工程与计算二期末复习</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/categories/NJUSE/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/" title="分类于 互联网计算">互联网计算</a></div><span><a href="/2023/02/08/internet-computer/Lecture05-%E4%BC%A0%E8%BE%93%E5%B1%82/" title="Lecture05-传输层">Lecture05-传输层</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/categories/NJUSE/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/" title="分类于 互联网计算">互联网计算</a></div><span><a href="/2023/02/08/internet-computer/Lecture09-%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E5%92%8Cvlan/" title="Lecture09-局域网交换和vlan">Lecture09-局域网交换和vlan</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%85%B6%E4%BB%96/" title="分类于 其他">其他</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%85%B6%E4%BB%96/%E8%A1%8C%E4%B8%9A%E7%A0%94%E7%A9%B6/" title="分类于 行业研究">行业研究</a></div><span><a href="/2022/10/14/%E9%83%91%E9%92%A2%E8%A1%8C%E4%B8%9A%E7%A0%94%E7%A9%B6%E8%AE%AD%E7%BB%83%E8%90%A5/20221013-%E8%AE%A1%E7%AE%97%E6%9C%BA/" title="20221013-计算机">20221013-计算机</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/categories/NJUSE/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/2022/11/01/cpp/Lecture09-%E6%8C%87%E9%92%88/" title="Lecture09-指针">Lecture09-指针</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/categories/NJUSE/cpp/" title="分类于 cpp">cpp</a></div><span><a href="/2023/02/08/cpp/Lecture12-%E5%A4%9A%E6%80%81/" title="Lecture12-多态">Lecture12-多态</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/categories/NJUSE/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="分类于 数据结构">数据结构</a></div><span><a href="/2023/02/26/dataStructure/Lecture07-Sorting/" title="Lecture07-Sorting">Lecture07-Sorting</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/NJUSE/" title="分类于 NJUSE">NJUSE</a> <i class="ic i-angle-right"></i> <a href="/categories/NJUSE/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E4%B8%8E%E7%BB%93%E6%9E%84/" title="分类于 计算机组成与结构">计算机组成与结构</a></div><span><a href="/2023/02/10/COA/Lecture16-%E6%8E%A7%E5%88%B6%E5%99%A8/" title="Lecture16-控制器">Lecture16-控制器</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-quas-modo"></i> </span><span class="author" itemprop="copyrightHolder">quas-modo @ quas-modo</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">303k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">4:36</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2023/02/08/internet-computer/Lecture04-网络层/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->